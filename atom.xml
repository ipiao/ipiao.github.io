<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>欣欣然不知所以</title>
  
  <subtitle>......</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://ipiao.top/"/>
  <updated>2019-04-28T04:10:25.417Z</updated>
  <id>http://ipiao.top/</id>
  
  <author>
    <name>ipiao</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>docker安装</title>
    <link href="http://ipiao.top/2019/04/27/docker%E5%AE%89%E8%A3%85/"/>
    <id>http://ipiao.top/2019/04/27/docker安装/</id>
    <published>2019-04-27T04:48:00.000Z</published>
    <updated>2019-04-28T04:10:25.417Z</updated>
    
    <content type="html"><![CDATA[<h4 id="正式环境不能像开发环境一样随意"><a href="#正式环境不能像开发环境一样随意" class="headerlink" title="正式环境不能像开发环境一样随意.."></a>正式环境不能像开发环境一样随意..</h4><h4 id="网桥"><a href="#网桥" class="headerlink" title="网桥"></a>网桥</h4><figure class="highlight sh">  <table>    <tr>      <td class="gutter">        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre>      </td>      <td class="code">        <pre><span class="line">cat &gt;&gt; /etc/sysctl.conf&lt;&lt;EOF</span><br><span class="line">net.ipv4.ip_forward=1</span><br><span class="line">net.bridge.bridge-nf-call-iptables=1</span><br><span class="line">net.ipv4.neigh.default.gc_thresh1=4096</span><br><span class="line">net.ipv4.neigh.default.gc_thresh2=6144</span><br><span class="line">net.ipv4.neigh.default.gc_thresh3=8192</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"><span class="comment"># 这个其实是重启命令</span></span><br><span class="line">init 6</span><br></pre>      </td>    </tr>  </table></figure><a id="more"></a><h4 id="如果已经安装高版本Docker-可进行降级安装-可选"><a href="#如果已经安装高版本Docker-可进行降级安装-可选" class="headerlink" title="如果已经安装高版本Docker,可进行降级安装(可选)"></a>如果已经安装高版本Docker,可进行降级安装(可选)</h4><figure class="highlight sh">  <table>    <tr>      <td class="gutter">        <pre><span class="line">1</span><br></pre>      </td>      <td class="code">        <pre><span class="line">yum downgrade --<span class="built_in">setopt</span>=obsoletes=0 -y docker-ce-<span class="variable">$&#123;version&#125;</span> docker-ce-selinux-<span class="variable">$&#123;version&#125;</span></span><br></pre>      </td>    </tr>  </table></figure><h4 id="卸载旧版本Docker软件"><a href="#卸载旧版本Docker软件" class="headerlink" title="卸载旧版本Docker软件"></a>卸载旧版本Docker软件</h4><figure class="highlight sh">  <table>    <tr>      <td class="gutter">        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre>      </td>      <td class="code">        <pre><span class="line">sudo yum remove docker \</span><br><span class="line">              docker-client \</span><br><span class="line">              docker-client-latest \</span><br><span class="line">              docker-common \</span><br><span class="line">              docker-latest \</span><br><span class="line">              docker-latest-logrotate \</span><br><span class="line">              docker-logrotate \</span><br><span class="line">              docker-selinux \</span><br><span class="line">              docker-engine-selinux \</span><br><span class="line">              docker-engine \</span><br><span class="line">              container*</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">sudo adduser docker</span><br><span class="line">sudo <span class="built_in">echo</span> <span class="string">'docker ALL=(ALL) ALL'</span> &gt;&gt; /etc/sudoers</span><br><span class="line"><span class="built_in">export</span> docker_version=17.03.2</span><br><span class="line">sudo yum update -y</span><br><span class="line">sudo yum install -y yum-utils device-mapper-persistent-data lvm2 bash-completion</span><br><span class="line">sudo yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span><br><span class="line">sudo yum makecache all</span><br><span class="line">version=$(yum list docker-ce.x86_64 --showduplicates | sort -r|grep <span class="variable">$&#123;docker_version&#125;</span>|awk <span class="string">'&#123;print $2&#125;'</span>)</span><br><span class="line">sudo yum -y install --<span class="built_in">setopt</span>=obsoletes=0 docker-ce-<span class="variable">$&#123;version&#125;</span> docker-ce-selinux-<span class="variable">$&#123;version&#125;</span></span><br><span class="line">sudo usermod -aG docker docker</span><br><span class="line">sudo systemctl <span class="built_in">enable</span> docker</span><br></pre>      </td>    </tr>  </table></figure><h4 id="物理机需要增加overlay2，云服务器已是overlay2。不需要这配置"><a href="#物理机需要增加overlay2，云服务器已是overlay2。不需要这配置" class="headerlink" title="物理机需要增加overlay2，云服务器已是overlay2。不需要这配置"></a>物理机需要增加overlay2，云服务器已是overlay2。不需要这配置</h4><figure class="highlight dts">  <table>    <tr>      <td class="gutter">        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre>      </td>      <td class="code">        <pre><span class="line">vi <span class="meta-keyword">/etc/</span>docker/daemon.json</span><br><span class="line">&#123;</span><br><span class="line"><span class="string">"max-concurrent-downloads"</span>: <span class="number">3</span>,</span><br><span class="line"><span class="string">"max-concurrent-uploads"</span>: <span class="number">5</span>,</span><br><span class="line"></span><br><span class="line"><span class="string">"registry-mirrors"</span>: [<span class="string">"https://a9wm3lf0.mirror.aliyuncs.com"</span>],</span><br><span class="line"></span><br><span class="line"><span class="string">"graph"</span>: <span class="string">"/home/docker"</span>,</span><br><span class="line"></span><br><span class="line"><span class="string">"storage-driver"</span>: <span class="string">"overlay2"</span>,</span><br><span class="line"><span class="string">"storage-opts"</span>: [<span class="string">"overlay2.override_kernel_check=true"</span>],</span><br><span class="line"></span><br><span class="line"><span class="string">"log-driver"</span>: <span class="string">"json-file"</span>,</span><br><span class="line"><span class="string">"log-opts"</span>: &#123;</span><br><span class="line">    <span class="string">"max-size"</span>: <span class="string">"100m"</span>,</span><br><span class="line">    <span class="string">"max-file"</span>: <span class="string">"3"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre>      </td>    </tr>  </table></figure><h4 id="WARNING-bridge-nf-call-ip6tables-is-disabled"><a href="#WARNING-bridge-nf-call-ip6tables-is-disabled" class="headerlink" title="WARNING: bridge-nf-call-ip6tables is disabled"></a>WARNING: bridge-nf-call-ip6tables is disabled</h4><figure class="highlight stylus">  <table>    <tr>      <td class="gutter">        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre>      </td>      <td class="code">        <pre><span class="line">vi /etc/sysctl.conf</span><br><span class="line"></span><br><span class="line">net<span class="selector-class">.bridge</span><span class="selector-class">.bridge-nf-call-ip6tables</span> = <span class="number">1</span></span><br><span class="line">net<span class="selector-class">.bridge</span><span class="selector-class">.bridge-nf-call-iptables</span> = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">sysctl -p</span><br></pre>      </td>    </tr>  </table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;正式环境不能像开发环境一样随意&quot;&gt;&lt;a href=&quot;#正式环境不能像开发环境一样随意&quot; class=&quot;headerlink&quot; title=&quot;正式环境不能像开发环境一样随意..&quot;&gt;&lt;/a&gt;正式环境不能像开发环境一样随意..&lt;/h4&gt;
&lt;h4 id=&quot;网桥&quot;&gt;&lt;a href=&quot;#网桥&quot; class=&quot;headerlink&quot; title=&quot;网桥&quot;&gt;&lt;/a&gt;网桥&lt;/h4&gt;
&lt;figure class=&quot;highlight sh&quot;&gt;
  &lt;table&gt;
    &lt;tr&gt;
      &lt;td class=&quot;gutter&quot;&gt;
        &lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;
      &lt;/td&gt;
      &lt;td class=&quot;code&quot;&gt;
        &lt;pre&gt;&lt;span class=&quot;line&quot;&gt;cat &amp;gt;&amp;gt; /etc/sysctl.conf&amp;lt;&amp;lt;EOF&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.ip_forward=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.bridge.bridge-nf-call-iptables=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.neigh.default.gc_thresh1=4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.neigh.default.gc_thresh2=6144&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.neigh.default.gc_thresh3=8192&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;EOF&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 这个其实是重启命令&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;init 6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;
      &lt;/td&gt;
    &lt;/tr&gt;
  &lt;/table&gt;
&lt;/figure&gt;
    
    </summary>
    
      <category term="不务正业" scheme="http://ipiao.top/categories/%E4%B8%8D%E5%8A%A1%E6%AD%A3%E4%B8%9A/"/>
    
    
      <category term="sh" scheme="http://ipiao.top/tags/sh/"/>
    
  </entry>
  
  <entry>
    <title>sh字符串截取</title>
    <link href="http://ipiao.top/2019/04/27/sh%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%88%AA%E5%8F%96/"/>
    <id>http://ipiao.top/2019/04/27/sh字符串截取/</id>
    <published>2019-04-27T04:17:00.000Z</published>
    <updated>2019-04-27T04:51:48.343Z</updated>
    
    <content type="html"><![CDATA[<h4 id="sh字符串截取"><a href="#sh字符串截取" class="headerlink" title="sh字符串截取"></a>sh字符串截取</h4><blockquote>  <p>*的位置,代表删除侧边</p></blockquote><ol>  <li><code>#</code>号截取，<code>*</code> 删除从<strong>左边</strong>满足条件的第一组字符及其左边字符，保留<strong>右边</strong>字符。<figure class="highlight sh">      <table>        <tr>          <td class="gutter">            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre>          </td>          <td class="code">            <pre><span class="line">var=http://www.aaa.com/123.htm.</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;var#*//&#125;</span>  <span class="comment"># www.aaa.com/123.htm.</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;var#*/&#125;</span>   <span class="comment"># /www.aaa.com/123.htm.</span></span><br></pre>          </td>        </tr>      </table>    </figure>  </li></ol><a id="more"></a><ol start="2">  <li>    <p><code>##</code>号截取，<code>*</code> 删除从<strong>右边</strong>满足条件的第一组字符及其左边字符，保留<strong>右边</strong>字符</p>    <figure class="highlight sh">      <table>        <tr>          <td class="gutter">            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre>          </td>          <td class="code">            <pre><span class="line">var=http://www.aaa.com/123.htm.</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;var##*//&#125;</span>  <span class="comment"># www.aaa.com/123.htm.</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;var##*/&#125;</span>   <span class="comment"># 123.htm.</span></span><br></pre>          </td>        </tr>      </table>    </figure>  </li>  <li>    <p><code>%</code>号截取，<code>*</code> 删除从<strong>左边</strong>满足条件的第一组字符及其左边字符，保留<strong>左边</strong>字符</p>    <figure class="highlight sh">      <table>        <tr>          <td class="gutter">            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre>          </td>          <td class="code">            <pre><span class="line">var=http://www.aaa.com/123.htm.</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;var%//*&#125;</span>  <span class="comment"># http:</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;var%/*&#125;</span>   <span class="comment"># http://www.aaa.com</span></span><br></pre>          </td>        </tr>      </table>    </figure>  </li>  <li>    <p><code>%%</code>号截取，<code>*</code> 删除从<strong>右边</strong>满足条件的第一组字符及其左边字符，保留<strong>左边</strong>字符</p>    <figure class="highlight sh">      <table>        <tr>          <td class="gutter">            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre>          </td>          <td class="code">            <pre><span class="line">var=http://www.aaa.com/123.htm.</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;var%%//*&#125;</span>  <span class="comment"># http:</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;var%%/*&#125;</span>   <span class="comment"># http:</span></span><br></pre>          </td>        </tr>      </table>    </figure>  </li>  <li>    <p>下标截取(开始位置+长度)(负数下标表示从右边数)</p>    <figure class="highlight php">      <table>        <tr>          <td class="gutter">            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre>          </td>          <td class="code">            <pre><span class="line"><span class="keyword">var</span>=http:<span class="comment">//www.aaa.com/123.htm.</span></span><br><span class="line"><span class="keyword">echo</span> $&#123;<span class="keyword">var</span>:<span class="number">0</span>:<span class="number">5</span>&#125;   <span class="comment"># http:</span></span><br><span class="line"><span class="keyword">echo</span> $&#123;<span class="keyword">var</span>:<span class="number">0</span>:<span class="number">-1</span>&#125;  <span class="comment"># http://www.aaa.com/123.htm.</span></span><br></pre>          </td>        </tr>      </table>    </figure>  </li>  <li>    <p>缺省下标(个数)截取</p>    <figure class="highlight php">      <table>        <tr>          <td class="gutter">            <pre><span class="line">1</span><br><span class="line">2</span><br></pre>          </td>          <td class="code">            <pre><span class="line"><span class="keyword">var</span>=http:<span class="comment">//www.aaa.com/123.htm.</span></span><br><span class="line"><span class="keyword">echo</span> $&#123;<span class="keyword">var</span>:<span class="number">5</span>&#125;     <span class="comment"># www.aaa.com/123.htm.</span></span><br></pre>          </td>        </tr>      </table>    </figure>  </li></ol>]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;sh字符串截取&quot;&gt;&lt;a href=&quot;#sh字符串截取&quot; class=&quot;headerlink&quot; title=&quot;sh字符串截取&quot;&gt;&lt;/a&gt;sh字符串截取&lt;/h4&gt;
&lt;blockquote&gt;
  &lt;p&gt;*的位置,代表删除侧边&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ol&gt;
  &lt;li&gt;&lt;code&gt;#&lt;/code&gt;号截取，&lt;code&gt;*&lt;/code&gt; 删除从&lt;strong&gt;左边&lt;/strong&gt;满足条件的第一组字符及其左边字符，保留&lt;strong&gt;右边&lt;/strong&gt;字符。&lt;figure class=&quot;highlight sh&quot;&gt;
      &lt;table&gt;
        &lt;tr&gt;
          &lt;td class=&quot;gutter&quot;&gt;
            &lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;
          &lt;/td&gt;
          &lt;td class=&quot;code&quot;&gt;
            &lt;pre&gt;&lt;span class=&quot;line&quot;&gt;var=http://www.aaa.com/123.htm.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;variable&quot;&gt;$&amp;#123;var#*//&amp;#125;&lt;/span&gt;  &lt;span class=&quot;comment&quot;&gt;# www.aaa.com/123.htm.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;variable&quot;&gt;$&amp;#123;var#*/&amp;#125;&lt;/span&gt;   &lt;span class=&quot;comment&quot;&gt;# /www.aaa.com/123.htm.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;
          &lt;/td&gt;
        &lt;/tr&gt;
      &lt;/table&gt;
    &lt;/figure&gt;
  &lt;/li&gt;
&lt;/ol&gt;
    
    </summary>
    
      <category term="不务正业" scheme="http://ipiao.top/categories/%E4%B8%8D%E5%8A%A1%E6%AD%A3%E4%B8%9A/"/>
    
    
      <category term="sh" scheme="http://ipiao.top/tags/sh/"/>
    
  </entry>
  
  <entry>
    <title>ssh-config</title>
    <link href="http://ipiao.top/2019/04/27/ssh-config/"/>
    <id>http://ipiao.top/2019/04/27/ssh-config/</id>
    <published>2019-04-27T03:52:00.000Z</published>
    <updated>2019-04-27T04:52:12.650Z</updated>
    
    <content type="html"><![CDATA[<h4 id="ssh-配置说明"><a href="#ssh-配置说明" class="headerlink" title="ssh 配置说明"></a>ssh 配置说明</h4><ol>  <li>位置:一般是 ~/./ssh/config,文件存在直接创建即可.</li>  <li>格式: </li></ol><figure class="highlight sh">  <table>    <tr>      <td class="gutter">        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre>      </td>      <td class="code">        <pre><span class="line">Host <span class="built_in">test</span> <span class="comment"># 随意命名</span></span><br><span class="line">    HostName 118.25.7.38 </span><br><span class="line">    User root</span><br><span class="line">    Port 22</span><br><span class="line">    IdentityFile ~/.ssh/id_rsa <span class="comment"># 指定密钥文件</span></span><br><span class="line"><span class="comment"># ProxyCommand ssh test2 -W '%h %p'  # 跳板机跳转</span></span><br><span class="line">    <span class="comment"># ProxyCommand sshpass -p pwd ssh %u@%h  # 账号密码免输入密码登录</span></span><br></pre>      </td>    </tr>  </table></figure><a id="more"></a><ol start="3">  <li>通过 <code>ssh test</code> 就可以登录服务器</li>  <li>ssh-keygen -t rsa 生成自己的密钥</li>  <li>ssh-copy-id 可以在账号密码登录后将自己的密钥拷贝到服务器,以后就可以不用账号密码(支持的情况下)</li>  <li>    <p>ssh 执行多命令(其实是 <code>&lt;&lt; EOF</code> 的使用)</p>    <figure class="highlight bash">      <table>        <tr>          <td class="gutter">            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre>          </td>          <td class="code">            <pre><span class="line">ssh <span class="variable">$host</span> &lt;&lt;EOF</span><br><span class="line">    <span class="built_in">cd</span> <span class="variable">$path</span></span><br><span class="line">    mv <span class="variable">$tmpbinaryname</span> <span class="variable">$binaryname</span></span><br><span class="line">    cp <span class="variable">$binaryname</span> <span class="variable">$cmd</span></span><br><span class="line">    <span class="built_in">cd</span> <span class="variable">$cmd</span></span><br><span class="line">    nohup ./<span class="variable">$binaryname</span> 2&gt;&amp;1 &amp;</span><br><span class="line">EOF</span><br></pre>          </td>        </tr>      </table>    </figure>    <ul>      <li>6.1 脚本执行可能会在退出的时候切断服务,是由于进程间的依赖关系造成的,可以加 <code>setsid</code>, 如 <code>setsid nohup ./$binaryname 2&gt;&amp;1 &amp;</code></li>    </ul>  </li>  <li>scp, 依赖ssh. <code>scp $binaryname $host:$path/$tmpbinaryname</code>,上传到服务器<ul>      <li>7.1 <code>scp $host:$path/$tmpbinaryname $binaryname</code>,反过来就是从服务器下载</li>    </ul>  </li></ol>]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;ssh-配置说明&quot;&gt;&lt;a href=&quot;#ssh-配置说明&quot; class=&quot;headerlink&quot; title=&quot;ssh 配置说明&quot;&gt;&lt;/a&gt;ssh 配置说明&lt;/h4&gt;
&lt;ol&gt;
  &lt;li&gt;位置:一般是 ~/./ssh/config,文件存在直接创建即可.&lt;/li&gt;
  &lt;li&gt;格式: &lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&quot;highlight sh&quot;&gt;
  &lt;table&gt;
    &lt;tr&gt;
      &lt;td class=&quot;gutter&quot;&gt;
        &lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;
      &lt;/td&gt;
      &lt;td class=&quot;code&quot;&gt;
        &lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Host &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;# 随意命名&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    HostName 118.25.7.38 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    User root&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Port 22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    IdentityFile ~/.ssh/id_rsa &lt;span class=&quot;comment&quot;&gt;# 指定密钥文件&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;comment&quot;&gt;# ProxyCommand ssh test2 -W &#39;%h %p&#39;  # 跳板机跳转&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;# ProxyCommand sshpass -p pwd ssh %u@%h  # 账号密码免输入密码登录&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;
      &lt;/td&gt;
    &lt;/tr&gt;
  &lt;/table&gt;
&lt;/figure&gt;
    
    </summary>
    
      <category term="不务正业" scheme="http://ipiao.top/categories/%E4%B8%8D%E5%8A%A1%E6%AD%A3%E4%B8%9A/"/>
    
    
      <category term="sh" scheme="http://ipiao.top/tags/sh/"/>
    
  </entry>
  
  <entry>
    <title>文件监听 inotify</title>
    <link href="http://ipiao.top/2019/04/27/%E6%96%87%E4%BB%B6%E7%9B%91%E5%90%AC-inotify/"/>
    <id>http://ipiao.top/2019/04/27/文件监听-inotify/</id>
    <published>2019-04-27T03:17:00.000Z</published>
    <updated>2019-04-27T04:52:33.211Z</updated>
    
    <content type="html"><![CDATA[<h4 id="inotify文件事件的自动化部署"><a href="#inotify文件事件的自动化部署" class="headerlink" title="inotify文件事件的自动化部署"></a>inotify文件事件的自动化部署</h4><ul>  <li>    <p>需要安装,补充inotify命令inotify-tools,inotifywait.</p>    <figure class="highlight sh">      <table>        <tr>          <td class="gutter">            <pre><span class="line">1</span><br></pre>          </td>          <td class="code">            <pre><span class="line">sudo apt-get(yum) install inotify-tools</span><br></pre>          </td>        </tr>      </table>    </figure>  </li>  <li>    <p>inotifywait -h 了解其使用方法</p>  </li></ul><a id="more"></a><h4 id="基于文件事件的自动化部署"><a href="#基于文件事件的自动化部署" class="headerlink" title="基于文件事件的自动化部署"></a>基于文件事件的自动化部署</h4><ul>  <li>1.需求: 由于公司所有服务器采用跳板机(jumpserver)登录方式,目前无法通过任何方式进行直连以及文件的直接传输,于是乎,程序更新部署(尤其是测试环境)显得及其麻烦.当前只能通过将程序文件上传(ftp)到目的服务器临时目录 /tmp,然后再进行二次操作.</li>  <li>2.解决方案: 考虑二次操作,有几个解决方案,其中2个比较代表性的是:<ul>      <li>2.1 通过supervisord配置,界面管理重启.</li>      <li>2.2 通过文件监听inotifywait自己实现监听重启脚本</li>    </ul>  </li>  <li>3.方案对比<ul>      <li>3.1 supervisord劣势: 需要额外的配置文件,需要开放管理界面端口,(根据以往的经验,)容易失效</li>      <li>3.2 supervisord优势: 界面管理,可以随时重启当前服务</li>      <li>3.3 inotifywait劣势: 每次重启需要手动出发事件(相当于去supervisord界面点击一下),但是要通过jumpserver的界面去操作,中间多了好几步.</li>      <li>3.4 inotifywait优势: 安装简单(就是一个安装命令和一个监听脚本),根据自己的服务特性写脚本足够灵活(不必重复的配置文件)</li>    </ul>  </li></ul><h4 id="微服务配置脚本"><a href="#微服务配置脚本" class="headerlink" title="微服务配置脚本"></a>微服务配置脚本</h4><blockquote>  <p>由于完全自己开发,所有的脚本,配置格式都比较统一,所以脚本不会复杂</p></blockquote><figure class="highlight sh">  <table>    <tr>      <td class="gutter">        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre>      </td>      <td class="code">        <pre><span class="line"><span class="meta">#!/usr/bin/env bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 监听文件夹改动并自动编译重启</span></span><br><span class="line">SRCDIR=`<span class="built_in">pwd</span>`</span><br><span class="line"><span class="function"><span class="title">dorestart</span></span>()&#123;</span><br><span class="line">    sleep 2</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"restart <span class="variable">$1</span>"</span></span><br><span class="line">    <span class="built_in">cd</span> <span class="string">"/srv/onevideo/<span class="variable">$1</span>"</span></span><br><span class="line">    f=<span class="string">"1v1_<span class="variable">$1</span>"</span></span><br><span class="line">    tmpfile=<span class="string">"/tmp/onevideo/<span class="variable">$1</span>/<span class="variable">$f</span>"</span></span><br><span class="line">    <span class="keyword">if</span> [ ! -f <span class="variable">$tmpfile</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">return</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    setsid sh restart.sh &amp;</span><br><span class="line">    <span class="comment"># mv $tmpfile ./</span></span><br><span class="line">    <span class="comment"># chmod +x $f</span></span><br><span class="line">    <span class="comment"># ps -aux|grep $f|grep -v grep|awk '&#123;print $2&#125;'|xargs kill -15 # 2|3|15</span></span><br><span class="line">    <span class="comment"># sleep 2</span></span><br><span class="line">    <span class="comment"># dt=`date "+%m%d_%H%M"`</span></span><br><span class="line">    <span class="comment"># if [ ! -d logs_bak ]; then</span></span><br><span class="line">    <span class="comment">#     mkdir logs_bak</span></span><br><span class="line">    <span class="comment"># fi</span></span><br><span class="line">    <span class="comment"># mv "$1.log" "logs_bak/$1"_"$dt.log"</span></span><br><span class="line">    <span class="comment"># setsid nohup ./$f -c "server.yaml" --registry_address "127.0.0.1:8500" 2&gt;&amp;1 &gt;&gt;"$1.log" &amp; </span></span><br><span class="line">    <span class="built_in">cd</span> <span class="variable">$SRCDIR</span></span><br><span class="line">    <span class="keyword">if</span> [ ! -f <span class="string">"<span class="variable">$1</span>/EOF"</span> ]; <span class="keyword">then</span></span><br><span class="line">        touch <span class="string">"<span class="variable">$1</span>/EOF"</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    <span class="comment"># setsid sh restart.sh &amp;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"restart <span class="variable">$1</span> done"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 这里 format 定义输出的日志格式, read类似程序里的scan(将输入读取到指定变量的意思)</span></span><br><span class="line">inotifywait -mrq --timefmt <span class="string">'%d/%m/%y %H:%M'</span> --format <span class="string">'%T %Xe %w %f'</span> \</span><br><span class="line"> -e DELETE,CREATE --excludei *.* <span class="variable">$SRCDIR</span>/* | <span class="keyword">while</span> <span class="built_in">read</span> DATE TIME EVENT DIR FILE; <span class="keyword">do</span></span><br><span class="line">RDIR=<span class="variable">$&#123;DIR%/&#125;</span></span><br><span class="line">dir=<span class="variable">$&#123;RDIR##*/&#125;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"notify <span class="variable">$EVENT</span>:<span class="variable">$dir</span>-<span class="variable">$FILE</span>"</span> </span><br><span class="line"><span class="comment"># if [ "CLOSE_WRITEXCLOSE" == "$EVENT" ] #CLOSE事件不止一次发生,并且暂时不知道怎么判断文件上传结束</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="string">"EOF"</span> == <span class="string">"<span class="variable">$FILE</span>"</span> ] <span class="comment"># 通过EOF文件标记上传结束</span></span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">   dorestart <span class="variable">$dir</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre>      </td>    </tr>  </table></figure><ul>  <li>说明: 略</li>  <li>操作: 每次上传完新程序文件,只需要删除对应目录下(自动生成的)EOF文件即可重启</li>  <li>执行: 不用 -d的原因是 -d -o 执行的时候出现了问题(提示日志文件权限之类的,没有细查…)</li></ul><h4 id="为什么不监听文件上传完成后重启"><a href="#为什么不监听文件上传完成后重启" class="headerlink" title="为什么不监听文件上传完成后重启"></a>为什么不监听文件上传完成后重启</h4><ol>  <li>大文件断续上传,会产生好几个CREATE\CLOSE事件,不好判断(主要是我也不会)文件是否真的完整上传完成.</li>  <li>上传时就在同一个目录下,删除一个EOF文件足够简单.并且这样还可以支持无更新重启(虽然上面脚本没支持)</li>  <li>动作缓冲,潜意识提醒你检查服务状态^0_0*</li></ol>]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;inotify文件事件的自动化部署&quot;&gt;&lt;a href=&quot;#inotify文件事件的自动化部署&quot; class=&quot;headerlink&quot; title=&quot;inotify文件事件的自动化部署&quot;&gt;&lt;/a&gt;inotify文件事件的自动化部署&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;需要安装,补充inotify命令inotify-tools,inotifywait.&lt;/p&gt;
    &lt;figure class=&quot;highlight sh&quot;&gt;
      &lt;table&gt;
        &lt;tr&gt;
          &lt;td class=&quot;gutter&quot;&gt;
            &lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;
          &lt;/td&gt;
          &lt;td class=&quot;code&quot;&gt;
            &lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sudo apt-get(yum) install inotify-tools&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;
          &lt;/td&gt;
        &lt;/tr&gt;
      &lt;/table&gt;
    &lt;/figure&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;inotifywait -h 了解其使用方法&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="不务正业" scheme="http://ipiao.top/categories/%E4%B8%8D%E5%8A%A1%E6%AD%A3%E4%B8%9A/"/>
    
    
      <category term="sh" scheme="http://ipiao.top/tags/sh/"/>
    
  </entry>
  
  <entry>
    <title>数字游戏</title>
    <link href="http://ipiao.top/2019/01/22/%E6%95%B0%E5%AD%97%E6%B8%B8%E6%88%8F/"/>
    <id>http://ipiao.top/2019/01/22/数字游戏/</id>
    <published>2019-01-22T06:42:00.000Z</published>
    <updated>2019-01-24T08:55:32.491Z</updated>
    
    <content type="html"><![CDATA[<h4 id="数学猜心魔术"><a href="#数学猜心魔术" class="headerlink" title="数学猜心魔术"></a>数学猜心魔术</h4><ol>  <li>让对方随便写一个五位数（五个数字各不相同，例如：37415）</li>  <li>用这五位数的五个数字再随意组成另外一个五位数 （例如：75314）</li>  <li>用这两个五位数相减（大数减小数，75314-37415=37899）</li>  <li>让对方记住得数中的任意一个数字，再把得数的其他数字告诉你 。（例如，我记住了“7”，把3899告诉你。）</li>  <li>你只要把对方告诉你的那几个数字一直相加到一位数，然后用9减就可以知道对方想的是什么数了 （你就把3899作一个简单的处理，3+8+9+9=29，所得的和还是一个两位数，你就继续处理2+9=11，继续处理1+1=2，最后得到一位数2以后，用最大的一位数9去减，9-2=7，那么你就猜到他心里记住的是7了。）</li></ol><p><img src="/images/pasted-6.png" alt="upload successful"><br>  <a id="more"></a></p>]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;数学猜心魔术&quot;&gt;&lt;a href=&quot;#数学猜心魔术&quot; class=&quot;headerlink&quot; title=&quot;数学猜心魔术&quot;&gt;&lt;/a&gt;数学猜心魔术&lt;/h4&gt;
&lt;ol&gt;
  &lt;li&gt;让对方随便写一个五位数（五个数字各不相同，例如：37415）&lt;/li&gt;
  &lt;li&gt;用这五位数的五个数字再随意组成另外一个五位数 （例如：75314）&lt;/li&gt;
  &lt;li&gt;用这两个五位数相减（大数减小数，75314-37415=37899）&lt;/li&gt;
  &lt;li&gt;让对方记住得数中的任意一个数字，再把得数的其他数字告诉你 。（例如，我记住了“7”，把3899告诉你。）&lt;/li&gt;
  &lt;li&gt;你只要把对方告诉你的那几个数字一直相加到一位数，然后用9减就可以知道对方想的是什么数了 （你就把3899作一个简单的处理，3+8+9+9=29，所得的和还是一个两位数，你就继续处理2+9=11，继续处理1+1=2，最后得到一位数2以后，用最大的一位数9去减，9-2=7，那么你就猜到他心里记住的是7了。）&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&quot;/images/pasted-6.png&quot; alt=&quot;upload successful&quot;&gt;&lt;br&gt;
    
    </summary>
    
      <category term="装13指南" scheme="http://ipiao.top/categories/%E8%A3%8513%E6%8C%87%E5%8D%97/"/>
    
    
      <category term="数" scheme="http://ipiao.top/tags/%E6%95%B0/"/>
    
      <category term="魔术" scheme="http://ipiao.top/tags/%E9%AD%94%E6%9C%AF/"/>
    
  </entry>
  
  <entry>
    <title>scrapy爬虫-英语考研词汇</title>
    <link href="http://ipiao.top/2019/01/11/scrapy%E7%88%AC%E8%99%AB-%E8%8B%B1%E8%AF%AD%E8%80%83%E7%A0%94%E8%AF%8D%E6%B1%87/"/>
    <id>http://ipiao.top/2019/01/11/scrapy爬虫-英语考研词汇/</id>
    <published>2019-01-11T08:16:00.000Z</published>
    <updated>2019-01-16T09:57:28.415Z</updated>
    
    <content type="html"><![CDATA[<h4 id="scapy爬虫-考研英语词汇"><a href="#scapy爬虫-考研英语词汇" class="headerlink" title="scapy爬虫-考研英语词汇"></a>scapy爬虫-考研英语词汇</h4><blockquote>  <p>之前都是用go语言爬虫的，学习了一点python，尝试着用scrapy框架爬虫 </p></blockquote><blockquote>  <p>爬虫之前需要大致了解一下scarpy框架，官方文档实在看的累，找了一个中文翻译的简要了解了一下，地址是(<a href="http://www.scrapyd.cn/doc/165.html" target="_blank" rel="noopener">http://www.scrapyd.cn/doc/165.html</a>)</p></blockquote><blockquote>  <p>爬取的扇贝网的英语词汇(<a href="https://www.shanbay.com/wordbook/34/)，" target="_blank" rel="noopener">https://www.shanbay.com/wordbook/34/)，</a> 虽然网页访问是要登录的，但是实际爬虫幷不需要。</p>  <ul>    <li>1.扇贝网的文档结构十分统一</li>    <li>2.右上角的搜索框，搜一个单词，很容易就通过调试获取到单词信息接口</li>    <li>3.接口有次数限制，最好控制一下频率或者使用代理</li>  </ul></blockquote><a id="more"></a><blockquote>  <p>于是，根据以上两点，很容易就能做到这个爬虫。而且由于结构的一致性，稍加修改，就能扩展到所有词汇的爬虫。</p></blockquote><blockquote>  <p>就英语考研词汇而言，内容有限，直接将最后的结果存储到json文件就可以了</p></blockquote><blockquote>  <p>具体代码如下:</p></blockquote><figure class="highlight py">  <table>    <tr>      <td class="gutter">        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br></pre>      </td>      <td class="code">        <pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> urllib3</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WordbookSpider</span><span class="params">(scrapy.Spider)</span>:</span></span><br><span class="line">    wl = []</span><br><span class="line">    failedwds = []</span><br><span class="line">    name = <span class="string">'wordbook'</span></span><br><span class="line">    allowed_domains = [<span class="string">'www.shanbay.com'</span>]</span><br><span class="line">    book = <span class="string">'34'</span></span><br><span class="line">    file = <span class="keyword">None</span></span><br><span class="line">    tmp_fp = <span class="keyword">None</span></span><br><span class="line">    succ_fp = <span class="keyword">None</span></span><br><span class="line">    successws = []</span><br><span class="line">    proxys = [</span><br><span class="line">        <span class="string">"http://124.207.82.166:8008"</span></span><br><span class="line">    ]</span><br><span class="line">    proxyManagers = []</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">randproxy</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> random.choice(self.proxyManagers)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">start_requests</span><span class="params">(self)</span>:</span></span><br><span class="line">        url = <span class="string">"http://www.shanbay.com/wordbook/"</span></span><br><span class="line">        book = getattr(self, <span class="string">'book'</span>, <span class="keyword">None</span>)  <span class="comment"># 获取tag值，也就是爬取时传过来的参数</span></span><br><span class="line">        <span class="keyword">if</span> book <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">None</span>:</span><br><span class="line">            self.book = book</span><br><span class="line">        url = url + self.book  <span class="comment"># 构造url</span></span><br><span class="line">        file = getattr(self, <span class="string">'file'</span>)</span><br><span class="line">        <span class="keyword">if</span> file <span class="keyword">is</span> <span class="keyword">None</span>:</span><br><span class="line">            self.file = <span class="string">"shanbei_wordbook_"</span> + self.book + <span class="string">".json"</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            self.file = file</span><br><span class="line">        tmpfile = <span class="string">"shanbei_wordbook_"</span> + self.book + <span class="string">"_tmp.json"</span></span><br><span class="line">        self.tmp_fp = open(tmpfile, <span class="string">'a'</span>, encoding=<span class="string">'utf-8'</span>)</span><br><span class="line"></span><br><span class="line">        successfile = <span class="string">"shanbei_wordbook_"</span> + self.book + <span class="string">"_success.txt"</span></span><br><span class="line">        self.succ_fp = open(successfile, <span class="string">'a'</span>, encoding=<span class="string">'utf-8'</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># self.successws = self.succ_fp.readlines()</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> proxy <span class="keyword">in</span> self.proxys:</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                <span class="keyword">if</span> proxy == <span class="string">""</span>:</span><br><span class="line">                    pool = urllib3.PoolManager(num_pools=<span class="number">5</span>)</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    pool = urllib3.ProxyManager(proxy_url=proxy, num_pools=<span class="number">5</span>)</span><br><span class="line">            <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">                print(<span class="string">"can not conn:"</span>, proxy, e)</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            self.proxyManagers.append(pool)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">yield</span> scrapy.Request(url, self.parse)  <span class="comment"># 发送请求爬取参数内容</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">parse</span><span class="params">(self, response)</span>:</span></span><br><span class="line">        ll = response.xpath(<span class="string">'//*[@id="wordbook-wordlist-container"]'</span>)</span><br><span class="line">        <span class="keyword">for</span> l <span class="keyword">in</span> ll:</span><br><span class="line">            wa = l.css(<span class="string">'a::attr(href)'</span>).extract()</span><br><span class="line">            <span class="keyword">for</span> w <span class="keyword">in</span> wa:</span><br><span class="line">                next_page = response.urljoin(w) + <span class="string">"?page=1"</span></span><br><span class="line">                <span class="keyword">yield</span> scrapy.Request(next_page, callback=self.parsewds)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 避免一次性操作失败,可以分文件存储或者每一次查找到结果后存储到临时文件,最后统一处理格式</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">parsewds</span><span class="params">(self, response)</span>:</span></span><br><span class="line">        ll = response.xpath(<span class="string">'/html/body/div[3]/div/div[1]/div[2]/div/table'</span>)</span><br><span class="line">        wl = ll.xpath(<span class="string">"//td[@class='span2']/strong//text()"</span>).extract()</span><br><span class="line">        <span class="keyword">for</span> w <span class="keyword">in</span> wl:</span><br><span class="line">            <span class="keyword">if</span> w <span class="keyword">not</span> <span class="keyword">in</span> self.successws:</span><br><span class="line">                <span class="comment"># print(w)</span></span><br><span class="line">                self.searchword(w)</span><br><span class="line">                time.sleep(<span class="number">0.001</span>)</span><br><span class="line">                <span class="comment"># pass</span></span><br><span class="line">        <span class="keyword">if</span> len(wl) &gt; <span class="number">1</span>:</span><br><span class="line">            time.sleep(<span class="number">1</span>)</span><br><span class="line">            ss = response.url.split(<span class="string">'page='</span>)</span><br><span class="line">            page = int(ss[len(ss)<span class="number">-1</span>])</span><br><span class="line">            next_page = ss[<span class="number">0</span>] + <span class="string">"page="</span> + str(page+<span class="number">1</span>)</span><br><span class="line">            <span class="keyword">yield</span> scrapy.Request(next_page, callback=self.parsewds)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">searchword</span><span class="params">(self, w, first=True)</span>:</span></span><br><span class="line">        r = self.randproxy().request(<span class="string">"GET"</span>, self.makesearchpath(w), retries=<span class="number">2</span>)</span><br><span class="line">        resp = json.loads(r.data, encoding=<span class="string">"utf-8"</span>)</span><br><span class="line">        <span class="comment"># resp = requests.get(self.makesearchpath(w)).json(encoding="utf-8")</span></span><br><span class="line">        print(resp)</span><br><span class="line">        <span class="keyword">if</span> resp[<span class="string">'status_code'</span>] == <span class="number">0</span>:</span><br><span class="line">            data = resp[<span class="string">'data'</span>]</span><br><span class="line">            data[<span class="string">'word'</span>] = w</span><br><span class="line">            self.succ_fp.write(w)</span><br><span class="line">            self.succ_fp.write(<span class="string">"\n"</span>)</span><br><span class="line">            self.wl.append(data)</span><br><span class="line">            json.dump(data, self.tmp_fp, ensure_ascii=<span class="keyword">False</span>)</span><br><span class="line">            self.tmp_fp.write(<span class="string">",\n"</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">if</span> first:</span><br><span class="line">                self.searchword(w)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                self.failedwds.append(w)</span><br><span class="line">        print(data)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">makesearchurl</span><span class="params">(self, w)</span>:</span></span><br><span class="line">        tm = int(time.time()*<span class="number">1000</span>)</span><br><span class="line">        url = <span class="string">"/api/v1/bdc/search/?version=2&amp;word=&#123;&#125;&amp;_=&#123;&#125;"</span>.format(w, tm)</span><br><span class="line">        <span class="keyword">return</span> url</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">makesearchpath</span><span class="params">(self, w)</span>:</span></span><br><span class="line">        tm = int(time.time()*<span class="number">1000</span>)</span><br><span class="line">        path = <span class="string">"http://www.shanbay.com/api/v1/bdc/search/?version=2&amp;word=&#123;&#125;&amp;_=&#123;&#125;"</span>.format(w, tm)</span><br><span class="line">        <span class="keyword">return</span> path</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">close</span><span class="params">(self, spider, reason)</span>:</span></span><br><span class="line">        self.wl.sort(key=<span class="keyword">lambda</span> w: w[<span class="string">'word'</span>].lower())</span><br><span class="line">        fp = open(self.file, <span class="string">'w'</span>, encoding=<span class="string">'utf-8'</span>)</span><br><span class="line">        json.dump(self.wl, fp, ensure_ascii=<span class="keyword">False</span>, indent=<span class="number">4</span>)</span><br><span class="line">        print(<span class="string">"failed words"</span>, self.failedwds)</span><br><span class="line">        fp.close()</span><br><span class="line">        super().close(spider, reason)</span><br></pre>      </td>    </tr>  </table></figure><blockquote>  <p>运行</p></blockquote><figure class="highlight sh">  <table>    <tr>      <td class="gutter">        <pre><span class="line">1</span><br></pre>      </td>      <td class="code">        <pre><span class="line">scrapy  crawl wordbook -a book=34</span><br></pre>      </td>    </tr>  </table></figure><blockquote>  <p>全部过程</p></blockquote><figure class="highlight sh">  <table>    <tr>      <td class="gutter">        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre>      </td>      <td class="code">        <pre><span class="line"><span class="comment">#### 安装包</span></span><br><span class="line">pip install scrapy</span><br><span class="line"><span class="comment">#### 创建项目</span></span><br><span class="line">scrapy startproject xxx</span><br><span class="line"><span class="comment">#### 生成爬虫文件</span></span><br><span class="line">scrapy genspider -t basic wordbook https://www.shanbay.com/wordbook/</span><br><span class="line"><span class="comment">#### 写代码</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#### 执行</span></span><br><span class="line">scrapy  crawl wordbook -a book=34</span><br></pre>      </td>    </tr>  </table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;scapy爬虫-考研英语词汇&quot;&gt;&lt;a href=&quot;#scapy爬虫-考研英语词汇&quot; class=&quot;headerlink&quot; title=&quot;scapy爬虫-考研英语词汇&quot;&gt;&lt;/a&gt;scapy爬虫-考研英语词汇&lt;/h4&gt;
&lt;blockquote&gt;
  &lt;p&gt;之前都是用go语言爬虫的，学习了一点python，尝试着用scrapy框架爬虫 &lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
  &lt;p&gt;爬虫之前需要大致了解一下scarpy框架，官方文档实在看的累，找了一个中文翻译的简要了解了一下，地址是(&lt;a href=&quot;http://www.scrapyd.cn/doc/165.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;http://www.scrapyd.cn/doc/165.html&lt;/a&gt;)&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
  &lt;p&gt;爬取的扇贝网的英语词汇(&lt;a href=&quot;https://www.shanbay.com/wordbook/34/)，&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://www.shanbay.com/wordbook/34/)，&lt;/a&gt; 虽然网页访问是要登录的，但是实际爬虫幷不需要。&lt;/p&gt;
  &lt;ul&gt;
    &lt;li&gt;1.扇贝网的文档结构十分统一&lt;/li&gt;
    &lt;li&gt;2.右上角的搜索框，搜一个单词，很容易就通过调试获取到单词信息接口&lt;/li&gt;
    &lt;li&gt;3.接口有次数限制，最好控制一下频率或者使用代理&lt;/li&gt;
  &lt;/ul&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="不务正业" scheme="http://ipiao.top/categories/%E4%B8%8D%E5%8A%A1%E6%AD%A3%E4%B8%9A/"/>
    
    
      <category term="python" scheme="http://ipiao.top/tags/python/"/>
    
      <category term="爬虫" scheme="http://ipiao.top/tags/%E7%88%AC%E8%99%AB/"/>
    
  </entry>
  
  <entry>
    <title>Leetcode 31-40</title>
    <link href="http://ipiao.top/2018/12/29/Leetcode-31-40/"/>
    <id>http://ipiao.top/2018/12/29/Leetcode-31-40/</id>
    <published>2018-12-29T10:22:00.000Z</published>
    <updated>2019-01-17T08:11:13.688Z</updated>
    
    <content type="html"><![CDATA[<h4 id="31-下一个排列"><a href="#31-下一个排列" class="headerlink" title="31. 下一个排列"></a>31. 下一个排列</h4><blockquote>  <p>实现获取下一个排列的函数，算法需要将给定数字序列重新排列成字典序中下一个更大的排列。</p>  <p>如果不存在下一个更大的排列，则将数字重新排列成最小的排列（即升序排列）。</p>  <p>必须原地修改，只允许使用额外常数空间。</p>  <p>以下是一些例子，输入位于左侧列，其相应输出位于右侧列。<br>1,2,3 → 1,3,2<br>3,2,1 → 1,2,3<br>1,1,5 → 1,5,1</p></blockquote><a id="more"></a><blockquote>  <p>解: 重点在于下一个的规则</p></blockquote><ul>  <li>    <p>code</p>    <figure class="highlight go">      <table>        <tr>          <td class="gutter">            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre>          </td>          <td class="code">            <pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">nextPermutation</span><span class="params">(nums []<span class="keyword">int</span>)</span></span>  &#123;</span><br><span class="line">    <span class="keyword">for</span> i:=<span class="built_in">len</span>(nums) <span class="number">-1</span>; i&gt;<span class="number">0</span>; i-- &#123;</span><br><span class="line">        <span class="keyword">if</span> nums[i] &gt; nums[i<span class="number">-1</span>]&#123;</span><br><span class="line">            ind:=i</span><br><span class="line">            <span class="keyword">for</span> j:=i+<span class="number">1</span>;j&lt;<span class="built_in">len</span>(nums);j++&#123;</span><br><span class="line">                <span class="keyword">if</span> nums[j]&gt;nums[i<span class="number">-1</span>] &amp;&amp; nums[j] &lt;= nums[ind]&#123;</span><br><span class="line">                    ind = j</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            swap(nums, ind, i<span class="number">-1</span>)</span><br><span class="line">            reverse(nums[i:])</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125; </span><br><span class="line">    &#125;</span><br><span class="line">    reverse(nums)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">reverse</span><span class="params">(nums []<span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">     i := <span class="number">0</span></span><br><span class="line">     j := <span class="built_in">len</span>(nums) <span class="number">-1</span></span><br><span class="line">     <span class="keyword">for</span> i &lt; j &#123;</span><br><span class="line">         swap(nums,i,j)</span><br><span class="line">        i++;</span><br><span class="line">        j--;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">swap</span><span class="params">(nums []<span class="keyword">int</span>,i ,j <span class="keyword">int</span>)</span></span>&#123;</span><br><span class="line">    tmp := nums[i]</span><br><span class="line">    nums[i] = nums[j]</span><br><span class="line">    nums[j] = tmp</span><br><span class="line">&#125;</span><br></pre>          </td>        </tr>      </table>    </figure>  </li></ul><h4 id="32-最长有效括号"><a href="#32-最长有效括号" class="headerlink" title="32. 最长有效括号"></a>32. 最长有效括号</h4><blockquote>  <p>给定一个只包含 ‘(‘ 和 ‘)’ 的字符串，找出最长的包含有效括号的子串的长度。</p></blockquote><ul>  <li>    <p>code</p>    <figure class="highlight go">      <table>        <tr>          <td class="gutter">            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre>          </td>          <td class="code">            <pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">longestValidParentheses</span><span class="params">(s <span class="keyword">string</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    bytes := []<span class="keyword">byte</span>(s)</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(bytes) &lt; <span class="number">2</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">    lengthList := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="built_in">len</span>(bytes))</span><br><span class="line">    <span class="keyword">var</span> max <span class="keyword">int</span></span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">1</span>; i &lt; <span class="built_in">len</span>(bytes); i++ &#123;</span><br><span class="line">        <span class="keyword">if</span> bytes[i] == <span class="string">')'</span> &#123;</span><br><span class="line">            j := i - lengthList[i<span class="number">-1</span>] - <span class="number">1</span></span><br><span class="line">            <span class="keyword">if</span> j &gt;= <span class="number">0</span> &amp;&amp; bytes[j] == <span class="string">'('</span> &#123;</span><br><span class="line">                lengthList[i] = lengthList[i<span class="number">-1</span>] + <span class="number">2</span></span><br><span class="line">                <span class="keyword">if</span> j<span class="number">-1</span> &gt;= <span class="number">0</span> &#123;</span><br><span class="line">                    lengthList[i] += lengthList[j<span class="number">-1</span>]</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> lengthList[i] &gt; max &#123;</span><br><span class="line">            max = lengthList[i]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> max</span><br><span class="line">&#125;</span><br></pre>          </td>        </tr>      </table>    </figure>  </li></ul><h4 id="33-搜索旋转排序数组"><a href="#33-搜索旋转排序数组" class="headerlink" title="33. 搜索旋转排序数组"></a>33. 搜索旋转排序数组</h4><blockquote>  <p>假设按照升序排序的数组在预先未知的某个点上进行了旋转。<br>( 例如，数组 [0,1,2,4,5,6,7] 可能变为 [4,5,6,7,0,1,2] )。<br>搜索一个给定的目标值，如果数组中存在这个目标值，则返回它的索引，否则返回 -1 。<br>你可以假设数组中不存在重复的元素。<br>你的算法时间复杂度必须是 O(log n) 级别。</p></blockquote><ul>  <li>    <p>code</p>    <figure class="highlight go">      <table>        <tr>          <td class="gutter">            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre>          </td>          <td class="code">            <pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">search</span><span class="params">(nums []<span class="keyword">int</span>, target <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    length := <span class="built_in">len</span>(nums)</span><br><span class="line">    <span class="keyword">if</span> length == <span class="number">0</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> length == <span class="number">1</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> nums[<span class="number">0</span>] != target &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> search1(nums, <span class="number">0</span>, length<span class="number">-1</span>, target)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">search1</span><span class="params">(nums []<span class="keyword">int</span>, left, right, target <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> left &gt; right &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> left == right &#123;</span><br><span class="line">        <span class="keyword">if</span> nums[left] == target &#123;</span><br><span class="line">            <span class="keyword">return</span> left</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line">    &#125;</span><br><span class="line">    mid := left + (right-left)/<span class="number">2</span></span><br><span class="line">    <span class="keyword">if</span> nums[mid] == target &#123;</span><br><span class="line">        <span class="keyword">return</span> mid</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> nums[left] &lt; nums[mid] &amp;&amp; nums[left] &lt;= target &amp;&amp; nums[mid] &gt; target &#123;</span><br><span class="line">        <span class="keyword">return</span> binarySearch(nums, left, mid<span class="number">-1</span>, target)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> nums[right] &gt; nums[mid] &amp;&amp; nums[mid] &lt; target &amp;&amp; nums[right] &gt;= target &#123;</span><br><span class="line">        <span class="keyword">return</span> binarySearch(nums, mid+<span class="number">1</span>, right, target)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> nums[left] &gt; nums[mid] &#123;</span><br><span class="line">        <span class="keyword">return</span> search1(nums, left, mid<span class="number">-1</span>, target)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> nums[right] &lt; nums[mid] &#123;</span><br><span class="line">        <span class="keyword">return</span> search1(nums, mid+<span class="number">1</span>, right, target)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">binarySearch</span><span class="params">(nums []<span class="keyword">int</span>, left, right, target <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> left &gt; right &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line">    &#125;</span><br><span class="line">    mid := left + (right-left)/<span class="number">2</span></span><br><span class="line">    <span class="keyword">if</span> nums[mid] == target &#123;</span><br><span class="line">        <span class="keyword">return</span> mid</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> target &lt; nums[mid] &#123;</span><br><span class="line">        <span class="keyword">return</span> binarySearch(nums, left, mid<span class="number">-1</span>, target)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> binarySearch(nums, mid+<span class="number">1</span>, right, target)</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre>          </td>        </tr>      </table>    </figure>  </li></ul><h4 id="34-在排序数组中查找元素的第一个和最后一个位置"><a href="#34-在排序数组中查找元素的第一个和最后一个位置" class="headerlink" title="34. 在排序数组中查找元素的第一个和最后一个位置"></a>34. 在排序数组中查找元素的第一个和最后一个位置</h4><blockquote>  <p>给定一个按照升序排列的整数数组 nums，和一个目标值 target。找出给定目标值在数组中的开始位置和结束位置。<br>你的算法时间复杂度必须是 O(log n) 级别。<br>如果数组中不存在目标值，返回 [-1, -1]。</p></blockquote><ul>  <li>    <p>code</p>    <figure class="highlight go">      <table>        <tr>          <td class="gutter">            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre>          </td>          <td class="code">            <pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">searchRange</span><span class="params">(nums []<span class="keyword">int</span>, target <span class="keyword">int</span>)</span> []<span class="title">int</span></span> &#123;</span><br><span class="line">    length := <span class="built_in">len</span>(nums)</span><br><span class="line">    <span class="keyword">if</span> length == <span class="number">0</span> || length == <span class="number">1</span> &amp;&amp; nums[<span class="number">0</span>] != target &#123;</span><br><span class="line">        <span class="keyword">return</span> []<span class="keyword">int</span>&#123;<span class="number">-1</span>, <span class="number">-1</span>&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> searchRangeI(nums, <span class="number">0</span>, length<span class="number">-1</span>, target)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">searchRangeI</span><span class="params">(nums []<span class="keyword">int</span>, left, right, target <span class="keyword">int</span>)</span> <span class="params">(ret []<span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">    length := <span class="built_in">len</span>(nums)</span><br><span class="line">    <span class="keyword">if</span> length == <span class="number">0</span> || left &gt; right &#123;</span><br><span class="line">        <span class="keyword">return</span> []<span class="keyword">int</span>&#123;<span class="number">-1</span>, <span class="number">-1</span>&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> left == right &#123;</span><br><span class="line">        <span class="keyword">if</span> nums[left] == target &#123;</span><br><span class="line">            <span class="keyword">return</span> []<span class="keyword">int</span>&#123;left, left&#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> []<span class="keyword">int</span>&#123;<span class="number">-1</span>, <span class="number">-1</span>&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    mid := left + (right-left)/<span class="number">2</span></span><br><span class="line">    <span class="keyword">if</span> nums[mid] == target &#123;</span><br><span class="line">        lower := findLower(nums, left, mid, target)</span><br><span class="line">        upper := findUpper(nums, mid, right, target)</span><br><span class="line">        <span class="keyword">return</span> []<span class="keyword">int</span>&#123;lower, upper&#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> nums[mid] &lt; target &#123;</span><br><span class="line">        <span class="keyword">return</span> searchRangeI(nums, mid+<span class="number">1</span>, right, target)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> searchRangeI(nums, left, mid<span class="number">-1</span>, target)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">findLower</span><span class="params">(nums []<span class="keyword">int</span>, left, right, target <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    length := <span class="built_in">len</span>(nums)</span><br><span class="line">    <span class="keyword">if</span> length == <span class="number">0</span> || left &gt; right &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> left == right &#123;</span><br><span class="line">        <span class="keyword">if</span> nums[right] == target &#123;</span><br><span class="line">            <span class="keyword">return</span> right</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line">    &#125;</span><br><span class="line">    mid := left + (right-left)/<span class="number">2</span></span><br><span class="line">    <span class="keyword">if</span> nums[mid] == target &#123;</span><br><span class="line">        <span class="keyword">if</span> mid &gt; left &amp;&amp; nums[mid<span class="number">-1</span>] == target &#123;</span><br><span class="line">            <span class="keyword">return</span> findLower(nums, left, mid<span class="number">-1</span>, target)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> mid</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> findLower(nums, mid+<span class="number">1</span>, right, target)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">findUpper</span><span class="params">(nums []<span class="keyword">int</span>, left, right, target <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    length := <span class="built_in">len</span>(nums)</span><br><span class="line">    <span class="keyword">if</span> length == <span class="number">0</span> || left &gt; right &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> left == right &#123;</span><br><span class="line">        <span class="keyword">if</span> nums[left] == target &#123;</span><br><span class="line">            <span class="keyword">return</span> left</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line">    &#125;</span><br><span class="line">    mid := left + (right-left)/<span class="number">2</span></span><br><span class="line">    <span class="keyword">if</span> nums[mid] == target &#123;</span><br><span class="line">        <span class="keyword">if</span> mid &lt; right &amp;&amp; nums[mid+<span class="number">1</span>] == target &#123;</span><br><span class="line">            <span class="keyword">return</span> findUpper(nums, mid+<span class="number">1</span>, right, target)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> mid</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> findUpper(nums, left, mid<span class="number">-1</span>, target)</span><br><span class="line">&#125;</span><br></pre>          </td>        </tr>      </table>    </figure>  </li></ul><h4 id="35-搜索插入位置"><a href="#35-搜索插入位置" class="headerlink" title="35. 搜索插入位置"></a>35. 搜索插入位置</h4><blockquote>  <p>给定一个排序数组和一个目标值，在数组中找到目标值，并返回其索引。如果目标值不存在于数组中，返回它将会被按顺序插入的位置。<br>你可以假设数组中无重复元素。</p></blockquote><ul>  <li>    <p>code</p>    <figure class="highlight go">      <table>        <tr>          <td class="gutter">            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre>          </td>          <td class="code">            <pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">searchInsert</span><span class="params">(nums []<span class="keyword">int</span>, target <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(nums) == <span class="number">0</span>&#123;</span><br><span class="line">        nums = <span class="built_in">append</span>(nums, target)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> find(nums, <span class="number">0</span>, <span class="built_in">len</span>(nums)<span class="number">-1</span>, target)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">find</span><span class="params">(nums []<span class="keyword">int</span>, left, right ,target <span class="keyword">int</span>)</span> <span class="title">int</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> left == right&#123;</span><br><span class="line">        <span class="keyword">if</span> nums[left] &gt;= target&#123;</span><br><span class="line">            <span class="keyword">return</span> left</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> right+<span class="number">1</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    mid := left + (right - left)/<span class="number">2</span></span><br><span class="line">    <span class="keyword">if</span> nums[mid] == target&#123;</span><br><span class="line">        <span class="keyword">return</span> mid</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> nums[mid] &gt; target&#123;</span><br><span class="line">        <span class="keyword">return</span> find(nums, left, mid, target)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> find(nums, mid+<span class="number">1</span>, right, target)</span><br><span class="line">&#125;</span><br></pre>          </td>        </tr>      </table>    </figure>  </li></ul><h4 id="36-有效的数独"><a href="#36-有效的数独" class="headerlink" title="36. 有效的数独"></a>36. 有效的数独</h4><blockquote>  <p>判断一个 9x9 的数独是否有效。只需要根据以下规则，验证已经填入的数字是否有效即可。<br>数字 1-9 在每一行只能出现一次。<br>数字 1-9 在每一列只能出现一次。<br>数字 1-9 在每一个以粗实线分隔的 3x3 宫内只能出现一次。<br><img src="/images/pasted-3.png" alt="upload successful"><br>上图是一个部分填充的有效的数独。<br>数独部分空格内已填入了数字，空白格用 ‘.’ 表示。</p></blockquote><ul>  <li>    <p>code</p>    <figure class="highlight go">      <table>        <tr>          <td class="gutter">            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre>          </td>          <td class="code">            <pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">isValidSudoku</span><span class="params">(board [][]<span class="keyword">byte</span>)</span> <span class="title">bool</span></span> &#123;</span><br><span class="line">    rows := [<span class="number">9</span>][<span class="number">9</span>]<span class="keyword">byte</span>&#123;&#125;</span><br><span class="line">    squars := [<span class="number">9</span>][<span class="number">9</span>]<span class="keyword">byte</span>&#123;&#125;</span><br><span class="line">    list := [<span class="number">9</span>][<span class="number">9</span>]<span class="keyword">byte</span>&#123;&#125;</span><br><span class="line">    <span class="keyword">for</span> i, sb := <span class="keyword">range</span> board &#123;</span><br><span class="line">        <span class="keyword">for</span> j := <span class="keyword">range</span> sb &#123;</span><br><span class="line">            rows[j][i] = sb[j]</span><br><span class="line">            squars[(i/<span class="number">3</span>)*<span class="number">3</span>+(j/<span class="number">3</span>)][(i%<span class="number">3</span>)*<span class="number">3</span>+(j%<span class="number">3</span>)] = sb[j]</span><br><span class="line">            list[i][j] = sb[j]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> _, row := <span class="keyword">range</span> list &#123;</span><br><span class="line">        <span class="keyword">if</span> hasRepeted(row) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> _, row := <span class="keyword">range</span> rows &#123;</span><br><span class="line">        <span class="keyword">if</span> hasRepeted(row) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> _, row := <span class="keyword">range</span> squars &#123;</span><br><span class="line">        <span class="keyword">if</span> hasRepeted(row) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">hasRepeted</span><span class="params">(bs [9]<span class="keyword">byte</span>)</span> <span class="title">bool</span></span> &#123;</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(bs)<span class="number">-1</span>; i++ &#123;</span><br><span class="line">        <span class="keyword">for</span> j := i + <span class="number">1</span>; j &lt; <span class="built_in">len</span>(bs); j++ &#123;</span><br><span class="line">            <span class="keyword">if</span> bs[i] != <span class="string">'.'</span> &amp;&amp; bs[i] == bs[j] &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125;</span><br></pre>          </td>        </tr>      </table>    </figure>  </li></ul><h4 id="37-解数独"><a href="#37-解数独" class="headerlink" title="37. 解数独"></a>37. 解数独</h4><blockquote>  <p>编写一个程序，通过已填充的空格来解决数独问题。<br>一个数独的解法需遵循如下规则：<br>数字 1-9 在每一行只能出现一次。<br>数字 1-9 在每一列只能出现一次。<br>数字 1-9 在每一个以粗实线分隔的 3x3 宫内只能出现一次。<br>空白格用 ‘.’ 表示。</p></blockquote><p><img src="/images/pasted-4.png" alt="upload successful"></p><blockquote>  <p>一个数独。</p></blockquote><p><img src="/images/pasted-5.png" alt="upload successful"></p><blockquote>  <p>答案被标成红色。<br>Note:<br>给定的数独序列只包含数字 1-9 和字符 ‘.’ 。<br>你可以假设给定的数独只有唯一解。<br>给定数独永远是 9x9 形式的。</p></blockquote><blockquote>  <p>解: 暴力递归</p></blockquote><h4 id="38-报数"><a href="#38-报数" class="headerlink" title="38. 报数"></a>38. 报数</h4><blockquote>  <p>报数序列是一个整数序列，按照其中的整数的顺序进行报数，得到下一个数。其前五项如下：</p>  <ol>    <li>1</li>    <li>11</li>    <li>21</li>    <li>1211</li>    <li>111221<br>1 被读作 “one 1” (“一个一”) , 即 11。<br>11 被读作 “two 1s” (“两个一”）, 即 21。<br>21 被读作 “one 2”, “one 1” （”一个二” , “一个一”) , 即 1211。<br>给定一个正整数 n（1 ≤ n ≤ 30），输出报数序列的第 n 项。<br>注意：整数顺序将表示为一个字符串。</li>  </ol></blockquote><ul>  <li>code <figure class="highlight go">      <table>        <tr>          <td class="gutter">            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre>          </td>          <td class="code">            <pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">countAndSay</span><span class="params">(n <span class="keyword">int</span>)</span> <span class="title">string</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> n == <span class="number">1</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"1"</span></span><br><span class="line">    &#125;</span><br><span class="line">    base := countAndSay(n - <span class="number">1</span>)</span><br><span class="line">    i := <span class="number">0</span></span><br><span class="line">    count := <span class="number">1</span></span><br><span class="line">    ret := <span class="string">""</span></span><br><span class="line">    <span class="keyword">for</span> j := <span class="number">1</span>; j &lt; <span class="built_in">len</span>(base); j++ &#123;</span><br><span class="line">        <span class="keyword">if</span> base[j] == base[i] &#123;</span><br><span class="line">            count++</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            ret += fmt.Sprint(count, <span class="keyword">string</span>(base[i]))</span><br><span class="line">            i = j</span><br><span class="line">            count = <span class="number">1</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    ret += fmt.Sprint(count, <span class="keyword">string</span>(base[i]))</span><br><span class="line">    <span class="keyword">return</span> ret</span><br><span class="line">&#125;</span><br></pre>          </td>        </tr>      </table>    </figure>  </li></ul><h4 id="39-组合总和"><a href="#39-组合总和" class="headerlink" title="39. 组合总和"></a>39. 组合总和</h4><blockquote>  <p>给定一个无重复元素的数组 candidates 和一个目标数 target ，找出 candidates 中所有可以使数字和为 target 的组合。<br>candidates 中的数字可以无限制重复被选取。<br>说明：<br>所有数字（包括 target）都是正整数。<br>解集不能包含重复的组合。 </p></blockquote><ul>  <li>    <p>code</p>    <figure class="highlight go">      <table>        <tr>          <td class="gutter">            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre>          </td>          <td class="code">            <pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">combinationSum</span><span class="params">(candidates []<span class="keyword">int</span>, target <span class="keyword">int</span>)</span> [][]<span class="title">int</span></span> &#123;</span><br><span class="line">    sort.Ints(candidates)</span><br><span class="line">    <span class="keyword">return</span> cbs(candidates,<span class="number">0</span>, target)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">cbs</span><span class="params">(nums []<span class="keyword">int</span>,start, target <span class="keyword">int</span>)</span> [][]<span class="title">int</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> target &lt;= <span class="number">0</span> || nums[start] &gt; target&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ret := [][]<span class="keyword">int</span>&#123;&#125;</span><br><span class="line">    <span class="keyword">if</span> nums[start] == target&#123;</span><br><span class="line">        ret = <span class="built_in">append</span>(ret, []<span class="keyword">int</span>&#123;nums[start]&#125;)</span><br><span class="line">        <span class="keyword">return</span> ret</span><br><span class="line">    &#125;</span><br><span class="line">    rs := cbs(nums, start, target-nums[start])</span><br><span class="line">    <span class="keyword">for</span> _,r1:=<span class="keyword">range</span> rs&#123;</span><br><span class="line">        nr := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="built_in">len</span>(r1)+<span class="number">1</span>)</span><br><span class="line">        nr[<span class="number">0</span>] = nums[start]</span><br><span class="line">        <span class="built_in">copy</span>(nr[<span class="number">1</span>:], r1)</span><br><span class="line">        ret = <span class="built_in">append</span>(ret, nr)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> start &lt; <span class="built_in">len</span>(nums)<span class="number">-1</span>&#123;</span><br><span class="line">        ret = <span class="built_in">append</span>(ret, cbs(nums, start+<span class="number">1</span>, target)...)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ret</span><br><span class="line">&#125;</span><br></pre>          </td>        </tr>      </table>    </figure>  </li></ul><h4 id="40-组合总和-II"><a href="#40-组合总和-II" class="headerlink" title="40. 组合总和 II"></a>40. 组合总和 II</h4><blockquote>  <p>给定一个数组 candidates 和一个目标数 target ，找出 candidates 中所有可以使数字和为 target 的组合。<br>candidates 中的每个数字在每个组合中只能使用一次。<br>说明：<br>所有数字（包括目标数）都是正整数。<br>解集不能包含重复的组合。 </p></blockquote><ul>  <li>    <p>code</p>    <figure class="highlight go">      <table>        <tr>          <td class="gutter">            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre>          </td>          <td class="code">            <pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">combinationSum2</span><span class="params">(candidates []<span class="keyword">int</span>, target <span class="keyword">int</span>)</span> [][]<span class="title">int</span></span> &#123;</span><br><span class="line">    sort.Ints(candidates)</span><br><span class="line">    <span class="keyword">return</span> DFS(candidates, <span class="number">0</span>, target, []<span class="keyword">int</span>&#123;&#125;, [][]<span class="keyword">int</span>&#123;&#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">DFS</span><span class="params">(candidates []<span class="keyword">int</span>, start <span class="keyword">int</span>, target <span class="keyword">int</span>, solution []<span class="keyword">int</span>, results [][]<span class="keyword">int</span>)</span> <span class="params">(rets [][]<span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">    rets = results</span><br><span class="line">    <span class="keyword">if</span> target &lt; <span class="number">0</span> &#123;</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> target == <span class="number">0</span> &#123;</span><br><span class="line">        rets = <span class="built_in">append</span>(rets, solution)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> i := start; i &lt; <span class="built_in">len</span>(candidates); i++ &#123;</span><br><span class="line">        <span class="keyword">if</span> i &gt; start &amp;&amp; candidates[i] == candidates[i<span class="number">-1</span>] &#123;</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        &#125;</span><br><span class="line">        candidate := candidates[i]</span><br><span class="line">        repliaSolution := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="built_in">len</span>(solution))</span><br><span class="line">        <span class="built_in">copy</span>(repliaSolution, solution)</span><br><span class="line">        repliaSolution = <span class="built_in">append</span>(repliaSolution, candidate)</span><br><span class="line">        rets = DFS(candidates, i+<span class="number">1</span>, target-candidate, repliaSolution, rets)</span><br><span class="line">        repliaSolution = repliaSolution[:<span class="built_in">len</span>(repliaSolution)<span class="number">-1</span>]</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">&#125;</span><br></pre>          </td>        </tr>      </table>    </figure>  </li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;31-下一个排列&quot;&gt;&lt;a href=&quot;#31-下一个排列&quot; class=&quot;headerlink&quot; title=&quot;31. 下一个排列&quot;&gt;&lt;/a&gt;31. 下一个排列&lt;/h4&gt;
&lt;blockquote&gt;
  &lt;p&gt;实现获取下一个排列的函数，算法需要将给定数字序列重新排列成字典序中下一个更大的排列。&lt;/p&gt;
  &lt;p&gt;如果不存在下一个更大的排列，则将数字重新排列成最小的排列（即升序排列）。&lt;/p&gt;
  &lt;p&gt;必须原地修改，只允许使用额外常数空间。&lt;/p&gt;
  &lt;p&gt;以下是一些例子，输入位于左侧列，其相应输出位于右侧列。&lt;br&gt;1,2,3 → 1,3,2&lt;br&gt;3,2,1 → 1,2,3&lt;br&gt;1,1,5 → 1,5,1&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="日常练习" scheme="http://ipiao.top/categories/%E6%97%A5%E5%B8%B8%E7%BB%83%E4%B9%A0/"/>
    
    
      <category term="leetcode" scheme="http://ipiao.top/tags/leetcode/"/>
    
  </entry>
  
  <entry>
    <title>Leetcode 21-30</title>
    <link href="http://ipiao.top/2018/12/27/Leetcode-21-30/"/>
    <id>http://ipiao.top/2018/12/27/Leetcode-21-30/</id>
    <published>2018-12-27T07:17:00.000Z</published>
    <updated>2018-12-29T09:56:36.535Z</updated>
    
    <content type="html"><![CDATA[<h4 id="21-合并两个有序链表"><a href="#21-合并两个有序链表" class="headerlink" title="21. 合并两个有序链表"></a>21. 合并两个有序链表</h4><blockquote>  <p>将两个有序链表合并为一个新的有序链表并返回。新链表是通过拼接给定的两个链表的所有节点组成的。<br>示例：<br>输入：1-&gt;2-&gt;4, 1-&gt;3-&gt;4<br>输出：1-&gt;1-&gt;2-&gt;3-&gt;4-&gt;4</p></blockquote><a id="more"></a><ul>  <li>    <p>code</p>    <figure class="highlight go">      <table>        <tr>          <td class="gutter">            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre>          </td>          <td class="code">            <pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * type ListNode struct &#123;</span></span><br><span class="line"><span class="comment"> *     Val int</span></span><br><span class="line"><span class="comment"> *     Next *ListNode</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">mergeTwoLists</span><span class="params">(l1 *ListNode, l2 *ListNode)</span> *<span class="title">ListNode</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> l1 == <span class="literal">nil</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> l2</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> l2 == <span class="literal">nil</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> l1</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> root = <span class="built_in">new</span>(ListNode)</span><br><span class="line">    <span class="keyword">if</span> l1.Val &lt; l2.Val&#123;</span><br><span class="line">        root.Val = l1.Val</span><br><span class="line">        l1 = l1.Next</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        root.Val = l2.Val</span><br><span class="line">        l2 = l2.Next</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> l1 !=<span class="literal">nil</span> || l2!=<span class="literal">nil</span>&#123;</span><br><span class="line">        root.Next = mergeTwoLists(l1, l2)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> root</span><br><span class="line">&#125;</span><br></pre>          </td>        </tr>      </table>    </figure>  </li></ul><h4 id="22-括号生成"><a href="#22-括号生成" class="headerlink" title="22. 括号生成"></a>22. 括号生成</h4><blockquote>  <p>给出 n 代表生成括号的对数，请你写出一个函数，使其能够生成所有可能的并且有效的括号组合。<br>例如，给出 n = 3，生成结果为：<br>[<br> “((()))”,<br> “(()())”,<br> “(())()”,<br> “()(())”,<br> “()()()”<br>]</p></blockquote><ul>  <li>    <p>code</p>    <figure class="highlight go">      <table>        <tr>          <td class="gutter">            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre>          </td>          <td class="code">            <pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">generateParenthesis</span><span class="params">(n <span class="keyword">int</span>)</span> []<span class="title">string</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> ans = []<span class="keyword">string</span>&#123;&#125;</span><br><span class="line">    generate(&amp;ans, <span class="string">""</span>, <span class="number">0</span>, <span class="number">0</span>, n)</span><br><span class="line">    <span class="keyword">return</span> ans</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">generate</span><span class="params">(ans *[]<span class="keyword">string</span>,cur <span class="keyword">string</span>,l <span class="keyword">int</span>, r <span class="keyword">int</span>, max <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(cur) == max*<span class="number">2</span>&#123;</span><br><span class="line">        *ans = <span class="built_in">append</span>(*ans, cur)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> l &lt; max&#123;</span><br><span class="line">         generate(ans, cur + <span class="string">"("</span>, l+<span class="number">1</span>, r, max)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> r &lt; l&#123;</span><br><span class="line">        generate(ans, cur + <span class="string">")"</span>, l, r+<span class="number">1</span>, max)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre>          </td>        </tr>      </table>    </figure>  </li></ul><h4 id="23-合并K个排序链表"><a href="#23-合并K个排序链表" class="headerlink" title="23. 合并K个排序链表"></a>23. 合并K个排序链表</h4><blockquote>  <p>合并 k 个排序链表，返回合并后的排序链表。请分析和描述算法的复杂度。</p></blockquote><ul>  <li>    <p>code</p>    <figure class="highlight go">      <table>        <tr>          <td class="gutter">            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre>          </td>          <td class="code">            <pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * type ListNode struct &#123;</span></span><br><span class="line"><span class="comment"> *     Val int</span></span><br><span class="line"><span class="comment"> *     Next *ListNode</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">mergeKLists</span><span class="params">(lists []*ListNode)</span> *<span class="title">ListNode</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(lists) == <span class="number">0</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(lists) == <span class="number">1</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> lists[<span class="number">0</span>]</span><br><span class="line">    &#125; </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> mergeTwoLists(mergeKLists(lists[:<span class="built_in">len</span>(lists)/<span class="number">2</span>]), mergeKLists(lists[<span class="built_in">len</span>(lists)/<span class="number">2</span>:]))</span><br><span class="line">&#125;</span><br></pre>          </td>        </tr>      </table>    </figure>  </li></ul><h4 id="24-两两交换链表中的节点"><a href="#24-两两交换链表中的节点" class="headerlink" title="24. 两两交换链表中的节点"></a>24. 两两交换链表中的节点</h4><blockquote>  <p>给定一个链表，两两交换其中相邻的节点，并返回交换后的链表。<br>示例:<br>给定 1-&gt;2-&gt;3-&gt;4, 你应该返回 2-&gt;1-&gt;4-&gt;3.<br>说明:<br>你的算法只能使用常数的额外空间。<br>你不能只是单纯的改变节点内部的值，而是需要实际的进行节点交换。</p></blockquote><ul>  <li>    <p>code</p>    <figure class="highlight vim">      <table>        <tr>          <td class="gutter">            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre>          </td>          <td class="code">            <pre><span class="line">/**</span><br><span class="line"> * Definition <span class="keyword">for</span> singly-linked <span class="keyword">list</span>.</span><br><span class="line"> * <span class="built_in">type</span> ListNode struct &#123;</span><br><span class="line"> *     Val <span class="keyword">int</span></span><br><span class="line"> *     <span class="keyword">Next</span> *ListNode</span><br><span class="line"> * &#125;</span><br><span class="line"> */</span><br><span class="line">func swapPairs(head *ListNode) *ListNode &#123;</span><br><span class="line">    <span class="keyword">if</span> head == nil || head.<span class="keyword">Next</span> == nil&#123;</span><br><span class="line">        <span class="keyword">return</span> head</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">p</span> := head</span><br><span class="line">    head = head.<span class="keyword">Next</span></span><br><span class="line">    <span class="keyword">p</span>.<span class="keyword">Next</span> = swapPairs(head.<span class="keyword">Next</span>)</span><br><span class="line">    head.<span class="keyword">Next</span> = <span class="keyword">p</span></span><br><span class="line">    <span class="keyword">return</span> head</span><br><span class="line">&#125;</span><br></pre>          </td>        </tr>      </table>    </figure>  </li></ul><h4 id="25-k个一组翻转链表"><a href="#25-k个一组翻转链表" class="headerlink" title="25. k个一组翻转链表"></a>25. k个一组翻转链表</h4><blockquote>  <p>给出一个链表，每 k 个节点一组进行翻转，并返回翻转后的链表。<br>k 是一个正整数，它的值小于或等于链表的长度。如果节点总数不是 k 的整数倍，那么将最后剩余节点保&gt; 持原有顺序。<br>示例 :<br>给定这个链表：1-&gt;2-&gt;3-&gt;4-&gt;5<br>当 k = 2 时，应当返回: 2-&gt;1-&gt;4-&gt;3-&gt;5<br>当 k = 3 时，应当返回: 3-&gt;2-&gt;1-&gt;4-&gt;5<br>说明 :<br>你的算法只能使用常数的额外空间。<br>你不能只是单纯的改变节点内部的值，而是需要实际的进行节点交换。</p></blockquote><ul>  <li>    <p>code</p>    <figure class="highlight go">      <table>        <tr>          <td class="gutter">            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre>          </td>          <td class="code">            <pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * type ListNode struct &#123;</span></span><br><span class="line"><span class="comment"> *     Val int</span></span><br><span class="line"><span class="comment"> *     Next *ListNode</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">reverseKGroup</span><span class="params">(head *ListNode, k <span class="keyword">int</span>)</span> *<span class="title">ListNode</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> k == <span class="number">1</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> head</span><br><span class="line">    &#125;</span><br><span class="line">    fake := &amp;ListNode&#123;Next: head&#125;</span><br><span class="line">    p := fake</span><br><span class="line">    <span class="keyword">for</span> p != <span class="literal">nil</span>&#123;</span><br><span class="line">        p.Next = reverseKNodes(p.Next, k)</span><br><span class="line">        <span class="keyword">for</span> i:=<span class="number">0</span>; p!=<span class="literal">nil</span> &amp;&amp; i&lt;k; i++&#123;</span><br><span class="line">            p = p.Next</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> fake.Next</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">reverseKNodes</span><span class="params">(head *ListNode, k <span class="keyword">int</span>)</span> *<span class="title">ListNode</span></span> &#123;</span><br><span class="line">    end := head</span><br><span class="line">    <span class="keyword">for</span> end != <span class="literal">nil</span> &amp;&amp; k&gt;<span class="number">0</span>&#123; <span class="comment">// end 是结束后一个</span></span><br><span class="line">        end = end.Next</span><br><span class="line">        k--</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> k &gt; <span class="number">0</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> head</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> qNode *ListNode</span><br><span class="line">    <span class="keyword">var</span> ret = end</span><br><span class="line">    <span class="keyword">var</span> node = head</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> node != end &#123;</span><br><span class="line">        qNode = node.Next</span><br><span class="line">        node.Next = ret</span><br><span class="line">        ret = node</span><br><span class="line">        node = qNode</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ret</span><br><span class="line">&#125;</span><br></pre>          </td>        </tr>      </table>    </figure>  </li></ul><h4 id="26-删除排序数组中的重复项"><a href="#26-删除排序数组中的重复项" class="headerlink" title="26. 删除排序数组中的重复项"></a>26. 删除排序数组中的重复项</h4><blockquote>  <p>给定一个排序数组，你需要在原地删除重复出现的元素，使得每个元素只出现一次，返回移除后数组的新长度。<br>不要使用额外的数组空间，你必须在原地修改输入数组并在使用 O(1) 额外空间的条件下完成。</p></blockquote><ul>  <li>code<figure class="highlight go">      <table>        <tr>          <td class="gutter">            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre>          </td>          <td class="code">            <pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">removeDuplicates</span><span class="params">(nums []<span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(nums) &lt;= <span class="number">1</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">len</span>(nums)</span><br><span class="line">    &#125;</span><br><span class="line">    newLen:=<span class="number">1</span></span><br><span class="line">    base:=nums[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i:=<span class="number">1</span>; i&lt;<span class="built_in">len</span>(nums); i++&#123;</span><br><span class="line">        <span class="keyword">if</span> nums[i] != base&#123;</span><br><span class="line">            nums[newLen],newLen,base = nums[i],newLen+<span class="number">1</span>,nums[i]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> newLen</span><br><span class="line">&#125;</span><br></pre>          </td>        </tr>      </table>    </figure>  </li></ul><h4 id="27-移除元素"><a href="#27-移除元素" class="headerlink" title="27. 移除元素"></a>27. 移除元素</h4><blockquote>  <p>给定一个数组 nums 和一个值 val，你需要原地移除所有数值等于 val 的元素，返回移除后数组的新长度。<br>不要使用额外的数组空间，你必须在原地修改输入数组并在使用 O(1) 额外空间的条件下完成。<br>元素的顺序可以改变。你不需要考虑数组中超出新长度后面的元素。</p></blockquote><ul>  <li>    <p>code</p>    <figure class="highlight go">      <table>        <tr>          <td class="gutter">            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre>          </td>          <td class="code">            <pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">removeElement</span><span class="params">(nums []<span class="keyword">int</span>, val <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    ind:=<span class="number">0</span></span><br><span class="line">    ret:=<span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i:=<span class="keyword">range</span> nums&#123;</span><br><span class="line">        <span class="keyword">if</span> nums[i] != val&#123;</span><br><span class="line">            ret++</span><br><span class="line">            nums[ind] = nums[i]</span><br><span class="line">            ind++</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ret</span><br><span class="line">&#125;</span><br></pre>          </td>        </tr>      </table>    </figure>  </li></ul><h4 id="28-实现strStr"><a href="#28-实现strStr" class="headerlink" title="28. 实现strStr()"></a>28. 实现strStr()</h4><blockquote>  <p>给定一个 haystack 字符串和一个 needle 字符串，在 haystack 字符串中找出 needle 字符串出现的第一个位置 (从0开始)。如果不存在，则返回 -1。</p></blockquote><blockquote>  <p>解: 经典 KMP 算法</p></blockquote><ul>  <li>    <p>code</p>    <figure class="highlight go">      <table>        <tr>          <td class="gutter">            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre>          </td>          <td class="code">            <pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">strStr</span><span class="params">(haystack <span class="keyword">string</span>, needle <span class="keyword">string</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> needle == <span class="string">""</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> kmpIndex([]<span class="keyword">byte</span>(haystack), []<span class="keyword">byte</span>(needle))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">kmpIndex</span><span class="params">(s, p []<span class="keyword">byte</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    i := <span class="number">0</span></span><br><span class="line">    j := <span class="number">0</span></span><br><span class="line">    next := getNext(p)</span><br><span class="line">    <span class="keyword">for</span> i &lt; <span class="built_in">len</span>(s) &amp;&amp; j &lt; <span class="built_in">len</span>(p) &#123;</span><br><span class="line">        <span class="keyword">if</span> j == <span class="number">-1</span> || s[i] == p[j] &#123;</span><br><span class="line">            i++</span><br><span class="line">            j++</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            j = next[j]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> j == <span class="built_in">len</span>(p) &#123;</span><br><span class="line">        <span class="keyword">return</span> i - j</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">getNext</span><span class="params">(ms []<span class="keyword">byte</span>)</span> []<span class="title">int</span></span> &#123;</span><br><span class="line">    length := <span class="built_in">len</span>(ms)</span><br><span class="line">    next := <span class="built_in">make</span>([]<span class="keyword">int</span>, length)</span><br><span class="line">    next[<span class="number">0</span>] = <span class="number">-1</span></span><br><span class="line">    k := <span class="number">-1</span></span><br><span class="line">    j := <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> j &lt; length<span class="number">-1</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> k == <span class="number">-1</span> || ms[j] == ms[k] &#123;</span><br><span class="line">            j++</span><br><span class="line">            k++</span><br><span class="line">            <span class="keyword">if</span> ms[j] != ms[k] &#123;</span><br><span class="line">                next[j] = k</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                next[j] = next[k]</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            k = next[k]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> next</span><br><span class="line">&#125;</span><br></pre>          </td>        </tr>      </table>    </figure>  </li></ul><h4 id="29-两数相除"><a href="#29-两数相除" class="headerlink" title="29. 两数相除"></a>29. 两数相除</h4><blockquote>  <p>给定两个整数，被除数 dividend 和除数 divisor。将两数相除，要求不使用乘法、除法和 mod 运算符。<br>返回被除数 dividend 除以除数 divisor 得到的商。<br>示例 1:<br>输入: dividend = 10, divisor = 3<br>输出: 3<br>示例 2:<br>输入: dividend = 7, divisor = -3<br>输出: -2<br>说明:<br>被除数和除数均为 32 位有符号整数。<br>除数不为 0。<br>我们的环境只能存储 32 位有符号整数，其数值范围是 [−231, 231 − 1]。本题中，如果除法结果溢出，则返回 231 − 1。</p></blockquote><blockquote>  <p>解: 分治法</p></blockquote><ul>  <li>    <p>code</p>    <figure class="highlight maxima">      <table>        <tr>          <td class="gutter">            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre>          </td>          <td class="code">            <pre><span class="line">func <span class="built_in">divide</span>(dividend int, divisor int) int &#123;</span><br><span class="line">    <span class="keyword">if</span> dividend &lt; <span class="number">0</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> dividend &gt; math.MinInt32&#123;</span><br><span class="line">            <span class="keyword">if</span> divisor == math.MinInt32&#123;</span><br><span class="line">                <span class="built_in">return</span> <span class="number">0</span></span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="built_in">return</span> <span class="built_in">divide</span>(<span class="number">0</span>-dividend, <span class="number">0</span>-divisor)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">if</span> divisor == math.MinInt32&#123;</span><br><span class="line">                <span class="built_in">return</span> <span class="number">1</span></span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span> divisor == -<span class="number">1</span>&#123;</span><br><span class="line">                <span class="built_in">return</span> math.MaxInt32</span><br><span class="line">            &#125; <span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="keyword">if</span> divisor &gt; <span class="number">0</span>&#123;</span><br><span class="line">                    <span class="built_in">return</span> <span class="built_in">divide</span>(divisor+dividend, divisor)-<span class="number">1</span></span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    <span class="built_in">return</span> <span class="built_in">divide</span>(dividend-divisor, divisor)+<span class="number">1</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    ret := <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> divisor &gt; <span class="number">0</span>&#123;</span><br><span class="line">        <span class="built_in">sum</span> := divisor</span><br><span class="line">        <span class="keyword">for</span> <span class="built_in">sum</span> &lt;= dividend&#123;</span><br><span class="line">            ret++</span><br><span class="line">            <span class="built_in">sum</span> += divisor</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="built_in">sum</span> := <span class="number">0</span>-divisor</span><br><span class="line">        <span class="keyword">for</span> <span class="built_in">sum</span> &lt;= dividend &#123;</span><br><span class="line">            ret--</span><br><span class="line">            <span class="built_in">sum</span> -= divisor</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">return</span> ret</span><br><span class="line">&#125;</span><br></pre>          </td>        </tr>      </table>    </figure>  </li></ul><h4 id="30-与所有单词相关联的字串"><a href="#30-与所有单词相关联的字串" class="headerlink" title="30. 与所有单词相关联的字串"></a>30. 与所有单词相关联的字串</h4><blockquote>  <p>给定一个字符串 s 和一些长度相同的单词 words。在 s 中找出可以恰好串联 words 中所有单词的子串的起始位置。</p>  <p>子串要与 words 中的单词完全匹配，中间不能有其他字符，但不需要考虑 words 中单词串联的顺序。</p>  <p>示例 1:</p>  <p>输入:<br> s = “barfoothefoobarman”,<br> words = [“foo”,”bar”]<br>输出: [0,9]<br>解释: 从索引 0 和 9 开始的子串分别是 “barfoor” 和 “foobar” 。<br>输出的顺序不重要, [9,0] 也是有效答案。<br>示例 2:</p>  <p>输入:<br> s = “wordgoodstudentgoodword”,<br> words = [“word”,”student”]<br>输出: []</p></blockquote><ul>  <li>    <p>code</p>    <figure class="highlight go">      <table>        <tr>          <td class="gutter">            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre>          </td>          <td class="code">            <pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">findSubstring</span><span class="params">(s <span class="keyword">string</span>, words []<span class="keyword">string</span>)</span> []<span class="title">int</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(s) == <span class="number">0</span>|| <span class="built_in">len</span>(words) == <span class="number">0</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">    &#125;</span><br><span class="line">    m1 := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span>)</span><br><span class="line">    <span class="keyword">for</span> _,word:=<span class="keyword">range</span> words&#123;</span><br><span class="line">        m1[word] += <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">    ret := []<span class="keyword">int</span>&#123;&#125;</span><br><span class="line">    sl := <span class="built_in">len</span>(words[<span class="number">0</span>])</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i:=<span class="number">0</span>; i&lt;sl; i++&#123;</span><br><span class="line">        cm := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span>)</span><br><span class="line">        c := <span class="number">0</span></span><br><span class="line">        ind := i</span><br><span class="line">        <span class="keyword">for</span> st:=i; st&lt;<span class="built_in">len</span>(s)-<span class="built_in">len</span>(words)*sl+<span class="number">1</span>; &#123;</span><br><span class="line">            w := s[ind:ind+sl]</span><br><span class="line">            <span class="keyword">if</span> wc,ok := m1[w]; ok&#123;</span><br><span class="line">                <span class="keyword">if</span> cm[w] == wc &#123;</span><br><span class="line">                    cm[s[st:st+sl]]-=<span class="number">1</span></span><br><span class="line">                    c--</span><br><span class="line">                    st += sl</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    cm[w] ++</span><br><span class="line">                    ind += sl</span><br><span class="line">                    <span class="keyword">if</span> c == <span class="built_in">len</span>(words)<span class="number">-1</span> &#123;</span><br><span class="line">                        ret =<span class="built_in">append</span>(ret, st)</span><br><span class="line">                        cm[s[st:st+sl]]-=<span class="number">1</span></span><br><span class="line">                        st += sl</span><br><span class="line">                    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                         c++ </span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                c = <span class="number">0</span></span><br><span class="line">                ind += sl</span><br><span class="line">                st = ind</span><br><span class="line">                cm = <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ret</span><br><span class="line">&#125;</span><br></pre>          </td>        </tr>      </table>    </figure>  </li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;21-合并两个有序链表&quot;&gt;&lt;a href=&quot;#21-合并两个有序链表&quot; class=&quot;headerlink&quot; title=&quot;21. 合并两个有序链表&quot;&gt;&lt;/a&gt;21. 合并两个有序链表&lt;/h4&gt;
&lt;blockquote&gt;
  &lt;p&gt;将两个有序链表合并为一个新的有序链表并返回。新链表是通过拼接给定的两个链表的所有节点组成的。&lt;br&gt;示例：&lt;br&gt;输入：1-&amp;gt;2-&amp;gt;4, 1-&amp;gt;3-&amp;gt;4&lt;br&gt;输出：1-&amp;gt;1-&amp;gt;2-&amp;gt;3-&amp;gt;4-&amp;gt;4&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="日常练习" scheme="http://ipiao.top/categories/%E6%97%A5%E5%B8%B8%E7%BB%83%E4%B9%A0/"/>
    
    
      <category term="leetcode" scheme="http://ipiao.top/tags/leetcode/"/>
    
  </entry>
  
  <entry>
    <title>Leetcode 11-20</title>
    <link href="http://ipiao.top/2018/12/26/Leetcode-11-20/"/>
    <id>http://ipiao.top/2018/12/26/Leetcode-11-20/</id>
    <published>2018-12-26T07:03:58.000Z</published>
    <updated>2018-12-27T06:33:22.814Z</updated>
    
    <content type="html"><![CDATA[<h4 id="11-盛最多水的容器"><a href="#11-盛最多水的容器" class="headerlink" title="11. 盛最多水的容器"></a>11. 盛最多水的容器</h4><blockquote>  <p>给定 n 个非负整数 a1，a2，…，an，每个数代表坐标中的一个点 (i, ai) 。在坐标内画 n 条垂直线，垂直线 i 的两个端点分别为 (i, ai) 和 (i, 0)。找出其中的两条线，使得它们与 x 轴共同构成的容器可以容纳最多的水。</p>  <p>说明：你不能倾斜容器，且 n 的值至少为 2。</p></blockquote><p><img src="/images/pasted-1.png" alt="upload successful"></p><blockquote>  <p>解: 1.如果可以使用暴力，很多事情就变得简单了。<br>    <a id="more"></a>  </p></blockquote><ul>  <li>code<figure class="highlight go">      <table>        <tr>          <td class="gutter">            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre>          </td>          <td class="code">            <pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">maxArea</span><span class="params">(height []<span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    s:=<span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i:=<span class="number">0</span> ;i&lt;<span class="built_in">len</span>(height)<span class="number">-1</span>;i++&#123;</span><br><span class="line">        <span class="keyword">for</span> j:=i+<span class="number">1</span>;j&lt;<span class="built_in">len</span>(height);j++&#123;</span><br><span class="line">            a:=height[j]*(j-i)</span><br><span class="line">            <span class="keyword">if</span> height[j]&gt; height[i]&#123;</span><br><span class="line">                a = height[i]*(j-i)</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> a &gt; s&#123;</span><br><span class="line">                s = a</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> s</span><br><span class="line">&#125;</span><br></pre>          </td>        </tr>      </table>    </figure>  </li></ul><blockquote>  <p>2.双指针法</p></blockquote><ul>  <li>    <p>code</p>    <figure class="highlight go">      <table>        <tr>          <td class="gutter">            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre>          </td>          <td class="code">            <pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">maxArea</span><span class="params">(height []<span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    l := <span class="built_in">len</span>(height)</span><br><span class="line">    s := <span class="number">0</span></span><br><span class="line">    i,j := <span class="number">0</span>,l<span class="number">-1</span></span><br><span class="line">    <span class="keyword">for</span> i&lt;j &#123;</span><br><span class="line">        <span class="keyword">var</span> s1 <span class="keyword">int</span></span><br><span class="line">        <span class="keyword">if</span> height[i]&lt;height[j]&#123;</span><br><span class="line">            s1 = height[i]*(j-i)</span><br><span class="line">            i++</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            s1 = height[j]*(j-i)</span><br><span class="line">            j--</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> s1 &gt; s&#123;</span><br><span class="line">           s = s1 </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> s</span><br><span class="line">&#125;</span><br></pre>          </td>        </tr>      </table>    </figure>  </li></ul><h4 id="12-整数转罗马数字"><a href="#12-整数转罗马数字" class="headerlink" title="12. 整数转罗马数字"></a>12. 整数转罗马数字</h4><blockquote>  <p>罗马数字包含以下七种字符： I， V， X， L，C，D 和 M。</p>  <p>字符 数值<br>I 1<br>V 5<br>X 10<br>L 50<br>C 100<br>D 500<br>M 1000<br>例如， 罗马数字 2 写做 II ，即为两个并列的 1。12 写做 XII ，即为 X + II 。 27 写做 XXVII, 即为 XX + V + II 。</p>  <p>通常情况下，罗马数字中小的数字在大的数字的右边。但也存在特例，例如 4 不写做 IIII，而是 IV。数字 1 在数字 5 的左边，所表示的数等于大数 5 减小数 1 得到的数值 4 。同样地，数字 9 表示为 IX。这个特殊的规则只适用于以下六种情况：</p>  <p>I 可以放在 V (5) 和 X (10) 的左边，来表示 4 和 9。<br>X 可以放在 L (50) 和 C (100) 的左边，来表示 40 和 90。<br>C 可以放在 D (500) 和 M (1000) 的左边，来表示 400 和 900。<br>给定一个整数，将其转为罗马数字。输入确保在 1 到 3999 的范围内。</p></blockquote><ul>  <li>    <p>code</p>    <figure class="highlight go">      <table>        <tr>          <td class="gutter">            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre>          </td>          <td class="code">            <pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">intToRoman</span><span class="params">(num <span class="keyword">int</span>)</span> <span class="title">string</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> base = []<span class="keyword">int</span>&#123;<span class="number">1000</span>,<span class="number">900</span>, <span class="number">500</span>,<span class="number">400</span>, <span class="number">100</span>,<span class="number">90</span>, <span class="number">50</span>,<span class="number">40</span>, <span class="number">10</span>,<span class="number">9</span>,<span class="number">5</span>,<span class="number">4</span>,<span class="number">1</span>&#125;</span><br><span class="line">    <span class="keyword">var</span> strs = []<span class="keyword">string</span>&#123;<span class="string">"M"</span>,<span class="string">"CM"</span>, <span class="string">"D"</span>,<span class="string">"CD"</span>,<span class="string">"C"</span>,<span class="string">"XC"</span>,<span class="string">"L"</span>,<span class="string">"XL"</span>,<span class="string">"X"</span>, <span class="string">"IX"</span>,<span class="string">"V"</span>,<span class="string">"IV"</span>,<span class="string">"I"</span>&#125;</span><br><span class="line">    ret := <span class="string">""</span></span><br><span class="line">    <span class="keyword">for</span> i,b:=<span class="keyword">range</span> base&#123;</span><br><span class="line">        x := num/b</span><br><span class="line">        num = num%b</span><br><span class="line">        <span class="keyword">if</span> x!=<span class="number">0</span>&#123;</span><br><span class="line">            <span class="keyword">for</span> j:=<span class="number">0</span>;j&lt;x;j++&#123;</span><br><span class="line">                ret +=strs[i]</span><br><span class="line">            &#125; </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ret</span><br><span class="line">&#125;</span><br></pre>          </td>        </tr>      </table>    </figure>  </li></ul><h4 id="13-罗马数字转整数"><a href="#13-罗马数字转整数" class="headerlink" title="13. 罗马数字转整数"></a>13. 罗马数字转整数</h4><blockquote>  <p>罗马数字包含以下七种字符: I， V， X， L，C，D 和 M。</p>  <p>字符 数值<br>I 1<br>V 5<br>X 10<br>L 50<br>C 100<br>D 500<br>M 1000<br>例如， 罗马数字 2 写做 II ，即为两个并列的 1。12 写做 XII ，即为 X + II 。 27 写做 XXVII, 即为 XX + V + II 。</p>  <p>通常情况下，罗马数字中小的数字在大的数字的右边。但也存在特例，例如 4 不写做 IIII，而是 IV。数字 1 在数字 5 的左边，所表示的数等于大数 5 减小数 1 得到的数值 4 。同样地，数字 9 表示为 IX。这个特殊的规则只适用于以下六种情况：</p>  <p>I 可以放在 V (5) 和 X (10) 的左边，来表示 4 和 9。<br>X 可以放在 L (50) 和 C (100) 的左边，来表示 40 和 90。<br>C 可以放在 D (500) 和 M (1000) 的左边，来表示 400 和 900。<br>给定一个罗马数字，将其转换成整数。输入确保在 1 到 3999 的范围内。</p></blockquote><ul>  <li>    <p>code</p>    <figure class="highlight go">      <table>        <tr>          <td class="gutter">            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre>          </td>          <td class="code">            <pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">romanToInt</span><span class="params">(s <span class="keyword">string</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">   <span class="keyword">var</span> base = []<span class="keyword">int</span>&#123;<span class="number">1000</span>,<span class="number">900</span>, <span class="number">500</span>,<span class="number">400</span>, <span class="number">100</span>,<span class="number">90</span>, <span class="number">50</span>,<span class="number">40</span>, <span class="number">10</span>,<span class="number">9</span>,<span class="number">5</span>,<span class="number">4</span>,<span class="number">1</span>&#125;</span><br><span class="line">   <span class="keyword">var</span> strs = []<span class="keyword">string</span>&#123;<span class="string">"M"</span>,<span class="string">"CM"</span>, <span class="string">"D"</span>,<span class="string">"CD"</span>,<span class="string">"C"</span>,<span class="string">"XC"</span>,<span class="string">"L"</span>,<span class="string">"XL"</span>,<span class="string">"X"</span>, <span class="string">"IX"</span>,<span class="string">"V"</span>,<span class="string">"IV"</span>,<span class="string">"I"</span>&#125; </span><br><span class="line"></span><br><span class="line">    ret:=<span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i:=<span class="number">0</span>;i&lt; <span class="built_in">len</span>(strs);&#123;</span><br><span class="line">        <span class="keyword">if</span> strings.HasPrefix(s,strs[i])&#123;</span><br><span class="line">            ret+=base[i]  </span><br><span class="line">            s = s[<span class="built_in">len</span>(strs[i]):]</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            i++</span><br><span class="line">        &#125;        </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ret</span><br><span class="line">&#125;</span><br></pre>          </td>        </tr>      </table>    </figure>  </li></ul><h4 id="14-最长公共前缀"><a href="#14-最长公共前缀" class="headerlink" title="14. 最长公共前缀"></a>14. 最长公共前缀</h4><blockquote>  <p>编写一个函数来查找字符串数组中的最长公共前缀。<br>如果不存在公共前缀，返回空字符串 “”。</p></blockquote><ul>  <li>    <p>code</p>    <figure class="highlight go">      <table>        <tr>          <td class="gutter">            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre>          </td>          <td class="code">            <pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">longestCommonPrefix</span><span class="params">(strs []<span class="keyword">string</span>)</span> <span class="title">string</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(strs)==<span class="number">0</span>&#123;                 <span class="comment">// 如果空，返回“”</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">""</span></span><br><span class="line">    &#125;</span><br><span class="line">    base:=strs[<span class="number">0</span>]                   <span class="comment">// 选取第一个字符串作为对比基串</span></span><br><span class="line">    <span class="keyword">for</span> i:=<span class="number">0</span>;i&lt;<span class="built_in">len</span>(base);i++&#123;       </span><br><span class="line">        b:=base[i]</span><br><span class="line">        <span class="keyword">for</span> j:=<span class="number">1</span>;j&lt;<span class="built_in">len</span>(strs);j++&#123;   <span class="comment">// 按索引对比</span></span><br><span class="line">            <span class="keyword">if</span> i&gt;=<span class="built_in">len</span>(strs[j]) || strs[j][i]!=b&#123;</span><br><span class="line">                <span class="keyword">return</span> base[:i]     <span class="comment">// 不想等就返回</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> base</span><br><span class="line">&#125;</span><br></pre>          </td>        </tr>      </table>    </figure>  </li></ul><h4 id="15-三数之和"><a href="#15-三数之和" class="headerlink" title="15. 三数之和"></a>15. 三数之和</h4><blockquote>  <p>给定一个包含 n 个整数的数组 nums，判断 nums 中是否存在三个元素 a，b，c ，使得 a + b + c = 0 ？找出所有满足条件且不重复的三元组。<br>注意：答案中不可以包含重复的三元组。<br>例如, 给定数组 nums = [-1, 0, 1, 2, -1, -4]，<br>满足要求的三元组集合为：<br>[<br> [-1, 0, 1],<br> [-1, -1, 2]<br>]</p></blockquote><blockquote>  <p>解: 1.分层循环</p></blockquote><ul>  <li>    <p>code</p>    <figure class="highlight go">      <table>        <tr>          <td class="gutter">            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre>          </td>          <td class="code">            <pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">threeSum</span><span class="params">(nums []<span class="keyword">int</span>)</span> [][]<span class="title">int</span></span> &#123;</span><br><span class="line">    sort.Ints(nums)</span><br><span class="line">    ret := [][]<span class="keyword">int</span>&#123;&#125;</span><br><span class="line">    l:=<span class="built_in">len</span>(nums)</span><br><span class="line">    <span class="keyword">for</span> i:=<span class="number">0</span>;i&lt; l<span class="number">-2</span>; i++&#123;</span><br><span class="line">        <span class="keyword">if</span> nums[i] &gt; <span class="number">0</span> &#123;</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> i&gt;<span class="number">0</span> &amp;&amp; nums[i] == nums[i<span class="number">-1</span>]&#123;</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        &#125;</span><br><span class="line">        ts := twoSum(nums[i+<span class="number">1</span>:], -nums[i])</span><br><span class="line">        <span class="keyword">for</span> _,s:=<span class="keyword">range</span> ts&#123;</span><br><span class="line">            ret = <span class="built_in">append</span>(ret, []<span class="keyword">int</span>&#123;nums[i], s[<span class="number">0</span>], s[<span class="number">1</span>]&#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ret</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">twoSum</span><span class="params">(nums []<span class="keyword">int</span>, n <span class="keyword">int</span>)</span>[][]<span class="title">int</span></span>&#123;</span><br><span class="line">    ret :=  [][]<span class="keyword">int</span>&#123;&#125;</span><br><span class="line">    <span class="keyword">for</span> i:=<span class="number">0</span>; i&lt;<span class="built_in">len</span>(nums)<span class="number">-1</span>;i++&#123;</span><br><span class="line">        <span class="keyword">if</span> nums[i]&gt;n/<span class="number">2</span>&#123;</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> i&gt;<span class="number">0</span> &amp;&amp; nums[i] == nums[i<span class="number">-1</span>]&#123;</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        &#125;</span><br><span class="line">        o,has := one(nums[i+<span class="number">1</span>:], n-nums[i])</span><br><span class="line">        <span class="keyword">if</span> has&#123;</span><br><span class="line">            ret = <span class="built_in">append</span>(ret, []<span class="keyword">int</span>&#123;nums[i], o&#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ret</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">one</span><span class="params">(nums []<span class="keyword">int</span>,n <span class="keyword">int</span>)</span> <span class="params">(<span class="keyword">int</span>,<span class="keyword">bool</span>)</span></span> &#123;</span><br><span class="line">    end:=<span class="built_in">len</span>(nums)<span class="number">-1</span></span><br><span class="line">    start:=<span class="number">0</span></span><br><span class="line">    <span class="keyword">if</span> nums[start] == n&#123;</span><br><span class="line">        <span class="keyword">return</span> nums[start],<span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> nums[end] == n&#123;</span><br><span class="line">        <span class="keyword">return</span> nums[end],<span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> start&lt;end &#123;</span><br><span class="line">        mid := (start+end)/<span class="number">2</span></span><br><span class="line">        <span class="keyword">if</span> mid &gt; start&#123;</span><br><span class="line">            <span class="keyword">if</span> nums[mid] == n&#123;</span><br><span class="line">               <span class="keyword">return</span> nums[mid],<span class="literal">true</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> nums[mid]&gt;n &#123;</span><br><span class="line">                end = mid</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                start = mid</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>,<span class="literal">false</span></span><br><span class="line">&#125;</span><br></pre>          </td>        </tr>      </table>    </figure>  </li></ul><blockquote>  <p>2.三指针法</p></blockquote><ul>  <li>    <p>code</p>    <figure class="highlight go">      <table>        <tr>          <td class="gutter">            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre>          </td>          <td class="code">            <pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">threeSum</span><span class="params">(nums []<span class="keyword">int</span>)</span> [][]<span class="title">int</span></span> &#123;</span><br><span class="line">    ret := [][]<span class="keyword">int</span>&#123;&#125;</span><br><span class="line">    sort.Ints(nums)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i:=<span class="number">0</span>; i&lt;<span class="built_in">len</span>(nums)<span class="number">-2</span>; i++&#123;</span><br><span class="line">        <span class="keyword">if</span> nums[i] &gt; <span class="number">0</span>&#123;</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> i &gt; <span class="number">0</span> &amp;&amp; nums[i] == nums[i<span class="number">-1</span>]&#123;</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        j, k := i+<span class="number">1</span>, <span class="built_in">len</span>(nums)<span class="number">-1</span></span><br><span class="line">        <span class="keyword">for</span> j&lt;k &#123;</span><br><span class="line">            <span class="keyword">if</span> j &gt; i+<span class="number">1</span> &amp;&amp; nums[j] == nums[j<span class="number">-1</span>]&#123;</span><br><span class="line">                j++</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> nums[i] + nums[j] + nums[k] == <span class="number">0</span>&#123;</span><br><span class="line">                ret = <span class="built_in">append</span>(ret, []<span class="keyword">int</span>&#123;nums[i], nums[j], nums[k]&#125;)</span><br><span class="line">                j++</span><br><span class="line">                k--</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span> nums[i] + nums[j] + nums[k] &gt; <span class="number">0</span>&#123;</span><br><span class="line">                k--</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                j++</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ret</span><br><span class="line">&#125;</span><br></pre>          </td>        </tr>      </table>    </figure>  </li></ul><h4 id="16-最接近的三数之和"><a href="#16-最接近的三数之和" class="headerlink" title="16. 最接近的三数之和"></a>16. 最接近的三数之和</h4><blockquote>  <p>给定一个包括 n 个整数的数组 nums 和 一个目标值 target。找出 nums 中的三个整数，使得它们的和与 target 最接近。返回这三个数的和。假定每组输入只存在唯一答案。<br>例如，给定数组 nums = [-1，2，1，-4], 和 target = 1.<br>与 target 最接近的三个数的和为 2. (-1 + 2 + 1 = 2).</p></blockquote><blockquote>  <p>解: 三指针</p></blockquote><ul>  <li>code<figure class="highlight go">      <table>        <tr>          <td class="gutter">            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre>          </td>          <td class="code">            <pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">threeSumClosest</span><span class="params">(nums []<span class="keyword">int</span>, target <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    sort.Ints(nums)</span><br><span class="line">    det:=<span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i:=<span class="number">0</span>; i&lt;<span class="built_in">len</span>(nums)<span class="number">-2</span>; i++&#123;</span><br><span class="line">        <span class="keyword">if</span> i == <span class="number">0</span>&#123;</span><br><span class="line">            det = nums[<span class="number">0</span>] + nums[<span class="number">1</span>] + nums[<span class="built_in">len</span>(nums)<span class="number">-1</span>] - target</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span> nums[i] == nums[i<span class="number">-1</span>]&#123;</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        j, k := i+<span class="number">1</span>, <span class="built_in">len</span>(nums)<span class="number">-1</span></span><br><span class="line">        <span class="keyword">for</span> j&lt;k &#123;</span><br><span class="line">            <span class="keyword">if</span> j &gt; i+<span class="number">1</span> &amp;&amp; nums[j] == nums[j<span class="number">-1</span>]&#123;</span><br><span class="line">                j++</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            &#125;</span><br><span class="line">            temp :=  nums[i] + nums[j] + nums[k] - target</span><br><span class="line">            <span class="keyword">if</span> temp == <span class="number">0</span>&#123;</span><br><span class="line">                <span class="keyword">return</span> target</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> abs(temp)&lt; abs(det) &#123;</span><br><span class="line">                    det = temp</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> temp &lt; <span class="number">0</span>&#123;</span><br><span class="line">                    j++</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    k--</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> det + target</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">abs</span><span class="params">(n <span class="keyword">int</span>)</span><span class="title">int</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> n &lt; <span class="number">0</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> -n</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> n</span><br><span class="line">&#125;</span><br></pre>          </td>        </tr>      </table>    </figure>  </li></ul><h4 id="17-电话号码的字母组合"><a href="#17-电话号码的字母组合" class="headerlink" title="17. 电话号码的字母组合"></a>17. 电话号码的字母组合</h4><blockquote>  <p>给定一个仅包含数字 2-9 的字符串，返回所有它能表示的字母组合。<br>给出数字到字母的映射如下（与电话按键相同）。注意 1 不对应任何字母。</p></blockquote><p><img src="/images/pasted-2.png" alt="upload successful"></p><ul>  <li>    <p>code</p>    <figure class="highlight go">      <table>        <tr>          <td class="gutter">            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre>          </td>          <td class="code">            <pre><span class="line"><span class="comment">// 当然可以做复用</span></span><br><span class="line"> <span class="function"><span class="keyword">func</span> <span class="title">letterCombinations</span><span class="params">(digits <span class="keyword">string</span>)</span> []<span class="title">string</span></span> &#123;</span><br><span class="line">     numMap := <span class="keyword">map</span>[<span class="keyword">byte</span>][]<span class="keyword">string</span>&#123;</span><br><span class="line">         <span class="string">'2'</span>: []<span class="keyword">string</span>&#123;<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>&#125;,</span><br><span class="line">         <span class="string">'3'</span>: []<span class="keyword">string</span>&#123;<span class="string">"d"</span>, <span class="string">"e"</span>, <span class="string">"f"</span>&#125;,</span><br><span class="line">         <span class="string">'4'</span>: []<span class="keyword">string</span>&#123;<span class="string">"g"</span>, <span class="string">"h"</span>, <span class="string">"i"</span>&#125;,</span><br><span class="line">         <span class="string">'5'</span>: []<span class="keyword">string</span>&#123;<span class="string">"j"</span>, <span class="string">"k"</span>, <span class="string">"l"</span>&#125;,</span><br><span class="line">         <span class="string">'6'</span>: []<span class="keyword">string</span>&#123;<span class="string">"m"</span>, <span class="string">"n"</span>, <span class="string">"o"</span>&#125;,</span><br><span class="line">         <span class="string">'7'</span>: []<span class="keyword">string</span>&#123;<span class="string">"p"</span>, <span class="string">"q"</span>, <span class="string">"r"</span>, <span class="string">"s"</span>&#125;,</span><br><span class="line">         <span class="string">'8'</span>: []<span class="keyword">string</span>&#123;<span class="string">"t"</span>, <span class="string">"u"</span>, <span class="string">"v"</span>&#125;,</span><br><span class="line">         <span class="string">'9'</span>: []<span class="keyword">string</span>&#123;<span class="string">"w"</span>, <span class="string">"x"</span>, <span class="string">"y"</span>, <span class="string">"z"</span>&#125;,</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="keyword">if</span> <span class="built_in">len</span>(digits) == <span class="number">0</span>&#123;</span><br><span class="line">         <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     fm := numMap[digits[<span class="number">0</span>]]</span><br><span class="line">     <span class="keyword">if</span> <span class="built_in">len</span>(digits) == <span class="number">1</span>&#123;</span><br><span class="line">         <span class="keyword">return</span> fm</span><br><span class="line">     &#125;</span><br><span class="line">     em := letterCombinations(digits[<span class="number">1</span>:])</span><br><span class="line">     ret := []<span class="keyword">string</span>&#123;&#125;</span><br><span class="line">     <span class="keyword">for</span> _,f := <span class="keyword">range</span> fm&#123;</span><br><span class="line">         <span class="keyword">for</span> _,e:=<span class="keyword">range</span> em&#123;</span><br><span class="line">             ret = <span class="built_in">append</span>(ret , f+e)</span><br><span class="line">         &#125;</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="keyword">return</span> ret</span><br><span class="line"> &#125;</span><br></pre>          </td>        </tr>      </table>    </figure>  </li></ul><h4 id="18-四数之和"><a href="#18-四数之和" class="headerlink" title="18. 四数之和"></a>18. 四数之和</h4><blockquote>  <p>给定一个包含 n 个整数的数组 nums 和一个目标值 target，判断 nums 中是否存在四个元素 a，b，c 和 d ，使得 a + b + c + d 的值与 target 相等？找出所有满足条件且不重复的四元组。</p>  <p>注意：</p>  <p>答案中不可以包含重复的四元组。</p>  <p>示例：</p>  <p>给定数组 nums = [1, 0, -1, 0, -2, 2]，和 target = 0。</p>  <p>满足要求的四元组集合为：<br>[<br> [-1, 0, 0, 1],<br> [-2, -1, 1, 2],<br> [-2, 0, 0, 2]<br>]</p></blockquote><blockquote>  <p>解:有一句mmp，不知当讲不当讲</p></blockquote><ul>  <li>    <p>code</p>    <figure class="highlight go">      <table>        <tr>          <td class="gutter">            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre>          </td>          <td class="code">            <pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">fourSum</span><span class="params">(nums []<span class="keyword">int</span>, target <span class="keyword">int</span>)</span> [][]<span class="title">int</span></span> &#123;</span><br><span class="line">    sort.Ints(nums)</span><br><span class="line">    <span class="keyword">return</span> kSum(nums, <span class="number">4</span>, target)  </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// k&gt;=2</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">kSum</span><span class="params">(nums []<span class="keyword">int</span>, k, target <span class="keyword">int</span>)</span>[][]<span class="title">int</span></span>&#123;</span><br><span class="line">    ret := [][]<span class="keyword">int</span>&#123;&#125;</span><br><span class="line">    <span class="keyword">if</span> k == <span class="number">2</span>&#123;</span><br><span class="line">        i, j := <span class="number">0</span>, <span class="built_in">len</span>(nums)<span class="number">-1</span></span><br><span class="line">        <span class="keyword">for</span> i &lt; j&#123;</span><br><span class="line">            <span class="keyword">if</span> nums[i] &gt; target/<span class="number">2</span>&#123;</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> i &gt; <span class="number">0</span> &amp;&amp; nums[i] == nums[i<span class="number">-1</span>]&#123;</span><br><span class="line">                i++</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> nums[i] + nums[j] == target&#123;</span><br><span class="line">                ret = <span class="built_in">append</span>(ret, []<span class="keyword">int</span>&#123;nums[i], nums[j]&#125;)</span><br><span class="line">                i++</span><br><span class="line">                j--</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span> nums[i] + nums[j] &lt; target&#123;</span><br><span class="line">                i++</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                j--</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">for</span> i:=<span class="number">0</span>; i&lt;<span class="built_in">len</span>(nums) - k + <span class="number">1</span>; i++&#123;</span><br><span class="line">            <span class="keyword">if</span> nums[i] &gt;  target/k &#123;</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> i &gt; <span class="number">0</span> &amp;&amp; nums[i] == nums[i<span class="number">-1</span>]&#123;</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            &#125;</span><br><span class="line">            ts := kSum(nums[i+<span class="number">1</span>:], k<span class="number">-1</span>, target-nums[i])</span><br><span class="line">            <span class="keyword">for</span> j:=<span class="keyword">range</span> ts&#123; </span><br><span class="line">                r := <span class="built_in">make</span>([]<span class="keyword">int</span>, k)</span><br><span class="line">                r[<span class="number">0</span>] = nums[i]</span><br><span class="line">                <span class="built_in">copy</span>(r[<span class="number">1</span>:], ts[j])</span><br><span class="line">                ret = <span class="built_in">append</span>(ret,r)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ret</span><br><span class="line">&#125;</span><br></pre>          </td>        </tr>      </table>    </figure>  </li></ul><h4 id="19-删除链表的倒数第N个节点"><a href="#19-删除链表的倒数第N个节点" class="headerlink" title="19. 删除链表的倒数第N个节点"></a>19. 删除链表的倒数第N个节点</h4><blockquote>  <p>给定一个链表，删除链表的倒数第 n 个节点，并且返回链表的头结点。</p></blockquote><blockquote>  <p>解: 从头节点与第n个节点同时移动，后一个节点移动至末尾，头节点将移动至倒数第n个节点</p></blockquote><ul>  <li>    <p>code</p>    <figure class="highlight go">      <table>        <tr>          <td class="gutter">            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre>          </td>          <td class="code">            <pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * type ListNode struct &#123;</span></span><br><span class="line"><span class="comment"> *     Val int</span></span><br><span class="line"><span class="comment"> *     Next *ListNode</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">removeNthFromEnd</span><span class="params">(head *ListNode, n <span class="keyword">int</span>)</span> *<span class="title">ListNode</span></span> &#123;</span><br><span class="line"></span><br><span class="line">    first := head</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">1</span>; i &lt; n; i++ &#123;</span><br><span class="line">        first = first.Next</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> npNode *ListNode</span><br><span class="line">    second := head</span><br><span class="line">    <span class="keyword">for</span> first.Next != <span class="literal">nil</span> &#123;</span><br><span class="line">        first = first.Next</span><br><span class="line">        npNode = second</span><br><span class="line">        second = second.Next</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> npNode == <span class="literal">nil</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> second.Next</span><br><span class="line">    &#125;</span><br><span class="line">    npNode.Next = second.Next</span><br><span class="line">    <span class="keyword">return</span> head</span><br><span class="line">&#125;</span><br></pre>          </td>        </tr>      </table>    </figure>  </li></ul><h4 id="20-有效的括号"><a href="#20-有效的括号" class="headerlink" title="20. 有效的括号"></a>20. 有效的括号</h4><blockquote>  <p>给定一个只包括 ‘(‘，’)’，’{‘，’}’，’[‘，’]’ 的字符串，判断字符串是否有效。<br>有效字符串需满足：<br>左括号必须用相同类型的右括号闭合。<br>左括号必须以正确的顺序闭合。<br>注意空字符串可被认为是有效字符串。</p></blockquote><blockquote>  <p>解: 经典栈</p></blockquote><ul>  <li>code<figure class="highlight go">      <table>        <tr>          <td class="gutter">            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre>          </td>          <td class="code">            <pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">isValid</span><span class="params">(s <span class="keyword">string</span>)</span> <span class="title">bool</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> match = <span class="keyword">map</span>[<span class="keyword">byte</span>]<span class="keyword">byte</span>&#123;</span><br><span class="line">        <span class="string">')'</span>:<span class="string">'('</span>,</span><br><span class="line">        <span class="string">']'</span>:<span class="string">'['</span>,</span><br><span class="line">        <span class="string">'&#125;'</span>:<span class="string">'&#123;'</span>,</span><br><span class="line">    &#125;</span><br><span class="line">    stack := []<span class="keyword">byte</span>&#123;&#125;</span><br><span class="line">    <span class="keyword">for</span> _,b:= <span class="keyword">range</span> []<span class="keyword">byte</span>(s)&#123;</span><br><span class="line">        <span class="keyword">switch</span> b&#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">'('</span>,<span class="string">'&#123;'</span>,<span class="string">'['</span>:</span><br><span class="line">                stack = <span class="built_in">append</span>(stack, b)</span><br><span class="line">            <span class="keyword">case</span> <span class="string">')'</span>,<span class="string">'&#125;'</span>,<span class="string">']'</span>:</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">len</span>(stack) == <span class="number">0</span> || stack[<span class="built_in">len</span>(stack)<span class="number">-1</span>] != match[b]&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">            &#125;</span><br><span class="line">            stack = stack[:<span class="built_in">len</span>(stack)<span class="number">-1</span>]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">len</span>(stack) == <span class="number">0</span></span><br><span class="line">&#125;</span><br></pre>          </td>        </tr>      </table>    </figure>  </li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;11-盛最多水的容器&quot;&gt;&lt;a href=&quot;#11-盛最多水的容器&quot; class=&quot;headerlink&quot; title=&quot;11. 盛最多水的容器&quot;&gt;&lt;/a&gt;11. 盛最多水的容器&lt;/h4&gt;
&lt;blockquote&gt;
  &lt;p&gt;给定 n 个非负整数 a1，a2，…，an，每个数代表坐标中的一个点 (i, ai) 。在坐标内画 n 条垂直线，垂直线 i 的两个端点分别为 (i, ai) 和 (i, 0)。找出其中的两条线，使得它们与 x 轴共同构成的容器可以容纳最多的水。&lt;/p&gt;
  &lt;p&gt;说明：你不能倾斜容器，且 n 的值至少为 2。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;/images/pasted-1.png&quot; alt=&quot;upload successful&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;解: 1.如果可以使用暴力，很多事情就变得简单了。&lt;br&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>AntDesign 圣诞节彩蛋</title>
    <link href="http://ipiao.top/2018/12/26/AntDesign-%E5%9C%A3%E8%AF%9E%E8%8A%82%E5%BD%A9%E8%9B%8B/"/>
    <id>http://ipiao.top/2018/12/26/AntDesign-圣诞节彩蛋/</id>
    <published>2018-12-26T02:02:00.000Z</published>
    <updated>2018-12-26T02:34:31.152Z</updated>
    
    <content type="html"><![CDATA[<h4 id="Ho-Ho-Ho"><a href="#Ho-Ho-Ho" class="headerlink" title="Ho! Ho! Ho!"></a>Ho! Ho! Ho!</h4><ul>  <li>    <p>昨天，蚂蚁金服被喷了，原因是其开源带代码(<a href="https://github.com/ant-design/ant-design" target="_blank" rel="noopener">https://github.com/ant-design/ant-design</a>) 里埋下一个在圣诞节才触发的彩蛋。不凑巧的是，某部最近才发文，思想是“中国人不过洋节”。</p>  </li>  <li>    <p>于是,在第一个洋节就出了一堆彩蛋引发的事件，情节严重者就要失业、背锅。传称，“在代码里下毒”。AntDesign自然而然遭遇炮轰(<a href="https://github.com/ant-design/ant-design/issues/13848" target="_blank" rel="noopener">https://github.com/ant-design/ant-design/issues/13848</a>) 。</p>  </li></ul><a id="more"></a><ul>  <li>作为一名吃瓜群众，本着看戏不嫌热闹的精神，表示对开源者的支持。开源本来就是一项高度自由的活动。只不过不同于我们这类低等开发者，成功的开源框架有了大量的受众，或多或少会影响到这项受众的利益。但是在受众为开源框架锁惊叹，收到褒奖的时候，缺不见得有感恩戴德的表现。同时，某种习性让我们不由自主的找寻一个背锅侠，于是矛头指向开源者。但是，第一责任人不可否认的是开发者本人啊。且不说开发者的能力问题，开发本是开发者的职责，使用别人的框架是节省了不少成本的，甚至大多比自己做的好。在使用开源框架的时候，我想很多了都有承受<code>bug</code>的准备。可是，彩蛋和<code>bug</code>其实有什么区别呢。对于开发者，都是预料之外的问题罢了。</li></ul><p><img src="/images/pasted-0.png" alt="ant-design 彩蛋网图"></p>]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;Ho-Ho-Ho&quot;&gt;&lt;a href=&quot;#Ho-Ho-Ho&quot; class=&quot;headerlink&quot; title=&quot;Ho! Ho! Ho!&quot;&gt;&lt;/a&gt;Ho! Ho! Ho!&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;昨天，蚂蚁金服被喷了，原因是其开源带代码(&lt;a href=&quot;https://github.com/ant-design/ant-design&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://github.com/ant-design/ant-design&lt;/a&gt;) 里埋下一个在圣诞节才触发的彩蛋。不凑巧的是，某部最近才发文，思想是“中国人不过洋节”。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;于是,在第一个洋节就出了一堆彩蛋引发的事件，情节严重者就要失业、背锅。传称，“在代码里下毒”。AntDesign自然而然遭遇炮轰(&lt;a href=&quot;https://github.com/ant-design/ant-design/issues/13848&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://github.com/ant-design/ant-design/issues/13848&lt;/a&gt;) 。&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="闲文野趣" scheme="http://ipiao.top/categories/%E9%97%B2%E6%96%87%E9%87%8E%E8%B6%A3/"/>
    
    
      <category term="吃瓜" scheme="http://ipiao.top/tags/%E5%90%83%E7%93%9C/"/>
    
  </entry>
  
  <entry>
    <title>Leetcode 6-10</title>
    <link href="http://ipiao.top/2018/12/25/Leetcode-6-10/"/>
    <id>http://ipiao.top/2018/12/25/Leetcode-6-10/</id>
    <published>2018-12-25T07:14:00.000Z</published>
    <updated>2018-12-27T10:35:12.942Z</updated>
    
    <content type="html"><![CDATA[<h4 id="6-Z-字形变换"><a href="#6-Z-字形变换" class="headerlink" title="6. Z 字形变换"></a>6. Z 字形变换</h4><blockquote>  <p>将一个给定字符串根据给定的行数，以从上往下、从左到右进行 Z 字形排列。比如输入字符串 为”LEETCODEISHIRING” 行数为 3 时，排列如下（忽略下划线）：<br> L _ C _ I _ R<br> E T O E S I I G<br> E _ D _ H _ N<br>之后，你的输出需要从左往右逐行读取，产生出一个新的字符串，比如：”LCIRETOESIIGEDHN”。请你实现这个将字符串进行指定行数变换的函数。</p></blockquote><a id="more"></a><blockquote>  <p>解: 这是一个有规律的图形阵，没什么可说的，直接套规律公式，避免一切花里胡哨</p></blockquote><ul>  <li>    <p>code</p>    <figure class="highlight go">      <table>        <tr>          <td class="gutter">            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre>          </td>          <td class="code">            <pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">convert</span><span class="params">(s <span class="keyword">string</span>, numRows <span class="keyword">int</span>)</span> <span class="title">string</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> numRows == <span class="number">1</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> s</span><br><span class="line">    &#125;</span><br><span class="line">    rs := []<span class="keyword">rune</span>(s)</span><br><span class="line">    l := <span class="built_in">len</span>(rs)</span><br><span class="line"></span><br><span class="line">    ret := []<span class="keyword">rune</span>&#123;&#125;</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; numRows; i++ &#123;</span><br><span class="line">        j := <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> &#123;</span><br><span class="line">            ind := (<span class="number">2</span>*numRows<span class="number">-2</span>)*j + i</span><br><span class="line">            <span class="keyword">if</span> ind &lt; l &#123;</span><br><span class="line">                ret = <span class="built_in">append</span>(ret, rs[ind])</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> i != <span class="number">0</span> &amp;&amp; i != numRows<span class="number">-1</span> &#123;</span><br><span class="line">                ind2 := (<span class="number">2</span>*numRows<span class="number">-2</span>)*(j+<span class="number">1</span>) - i</span><br><span class="line">                <span class="keyword">if</span> ind2 &lt; l &#123;</span><br><span class="line">                    ret = <span class="built_in">append</span>(ret, rs[ind2])</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            j++</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">string</span>(ret)</span><br><span class="line">&#125;</span><br></pre>          </td>        </tr>      </table>    </figure>  </li></ul><h4 id="7-整数反转"><a href="#7-整数反转" class="headerlink" title="7. 整数反转"></a>7. 整数反转</h4><blockquote>  <p>给出一个 32 位的有符号整数，你需要将这个整数中每位上的数字进行反转</p></blockquote><ul>  <li>code<figure class="highlight go">      <table>        <tr>          <td class="gutter">            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre>          </td>          <td class="code">            <pre><span class="line">  <span class="function"><span class="keyword">func</span> <span class="title">reverse</span><span class="params">(x <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> x &lt; <span class="number">0</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> -(reverse(-x))</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> y <span class="keyword">int32</span> = <span class="keyword">int32</span>(x)</span><br><span class="line">    bl := []<span class="keyword">int32</span>&#123;&#125;</span><br><span class="line">    <span class="keyword">for</span> y &gt; <span class="number">0</span> &#123;</span><br><span class="line">        bl = <span class="built_in">append</span>(bl, y%<span class="number">10</span>)</span><br><span class="line">        y = y / <span class="number">10</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> ret <span class="keyword">int32</span></span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(bl); i++ &#123;</span><br><span class="line">        <span class="keyword">if</span> ret &gt; (math.MaxInt32-bl[i])/<span class="number">10</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        &#125;</span><br><span class="line">        ret = <span class="number">10</span>*ret + bl[i]</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">int</span>(ret)</span><br><span class="line">&#125;</span><br></pre>          </td>        </tr>      </table>    </figure>  </li></ul><h4 id="8-字符串转换整数-atoi"><a href="#8-字符串转换整数-atoi" class="headerlink" title="8. 字符串转换整数 (atoi)"></a>8. 字符串转换整数 (atoi)</h4><blockquote>  <p>请你来实现一个 atoi 函数，使其能将字符串转换成整数。</p>  <p>首先，该函数会根据需要丢弃无用的开头空格字符，直到寻找到第一个非空格的字符为止。</p>  <p>当我们寻找到的第一个非空字符为正或者负号时，则将该符号与之后面尽可能多的连续数字组合起来，作为该整数的正负号；假如第一个非空字符是数字，则直接将其与之后连续的数字字符组合起来，形成整数。</p>  <p>该字符串除了有效的整数部分之后也可能会存在多余的字符，这些字符可以被忽略，它们对于函数不应该造成影响。</p>  <p>注意：假如该字符串中的第一个非空格字符不是一个有效整数字符、字符串为空或字符串仅包含空白字符时，则你的函数不需要进行转换。</p>  <p>在任何情况下，若函数不能进行有效的转换时，请返回 0。</p>  <p>说明：</p>  <p>假设我们的环境只能存储 32 位大小的有符号整数，那么其数值范围为 [−231, 231 − 1]。如果数值超过这个范围，qing返回 INT_MAX (231 − 1) 或 INT_MIN (−231) 。</p></blockquote><ul>  <li>    <p>code</p>    <figure class="highlight go">      <table>        <tr>          <td class="gutter">            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre>          </td>          <td class="code">            <pre><span class="line">  <span class="function"><span class="keyword">func</span> <span class="title">myAtoi</span><span class="params">(str <span class="keyword">string</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> max = math.MaxInt32</span><br><span class="line">    bas := <span class="number">1</span> <span class="comment">// 乘子</span></span><br><span class="line">    nbs := <span class="built_in">make</span>([]<span class="keyword">int</span>,<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">    start:=<span class="literal">false</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i:=<span class="keyword">range</span> str&#123;</span><br><span class="line">        b:=str[i]</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> !start&#123;</span><br><span class="line">            <span class="keyword">if</span> b==<span class="string">' '</span>&#123;</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> b == <span class="string">'-'</span>&#123;</span><br><span class="line">                bas = <span class="number">-1</span></span><br><span class="line">                start = <span class="literal">true</span></span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> b==<span class="string">'+'</span>&#123; </span><br><span class="line">                start = <span class="literal">true</span></span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> <span class="string">'0'</span>&lt;=b &amp;&amp; b&lt;=<span class="string">'9'</span>&#123;</span><br><span class="line">                start = <span class="literal">true</span></span><br><span class="line">            &#125;<span class="keyword">else</span>&#123; </span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="string">'0'</span>&lt;=b &amp;&amp; b&lt;=<span class="string">'9'</span>&#123;</span><br><span class="line">            nbs=<span class="built_in">append</span>(nbs,<span class="keyword">int</span>(b-<span class="string">'0'</span>))</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> bas == <span class="number">-1</span>&#123;</span><br><span class="line">        max += <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">    ret:=<span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i:=<span class="number">0</span>;i&lt;<span class="built_in">len</span>(nbs);i++&#123;</span><br><span class="line">        <span class="keyword">if</span> ret&gt;max/<span class="number">10</span> || (ret==max/<span class="number">10</span> &amp;&amp; nbs[i]&gt;max%<span class="number">10</span>)&#123;</span><br><span class="line">            ret = max</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        &#125;</span><br><span class="line">        ret = ret*<span class="number">10</span> + nbs[i]</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> bas * ret</span><br><span class="line">&#125;</span><br></pre>          </td>        </tr>      </table>    </figure>  </li></ul><h4 id="9-回文数"><a href="#9-回文数" class="headerlink" title="9. 回文数"></a>9. 回文数</h4><blockquote>  <p>判断一个整数是否是回文数。回文数是指正序（从左向右）和倒序（从右向左）读都是一样的整数。</p></blockquote><blockquote>  <p>解: TIP:反转一半就可以了</p></blockquote><ul>  <li>code<figure class="highlight go">      <table>        <tr>          <td class="gutter">            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre>          </td>          <td class="code">            <pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">isPalindrome</span><span class="params">(x <span class="keyword">int</span>)</span> <span class="title">bool</span></span> &#123;</span><br><span class="line">     <span class="keyword">if</span> x&lt;<span class="number">0</span>&#123;</span><br><span class="line">         <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">     &#125;</span><br><span class="line">     <span class="keyword">if</span> x==<span class="number">0</span>&#123;</span><br><span class="line">         <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">     &#125;</span><br><span class="line">     <span class="keyword">var</span> bl []<span class="keyword">int</span></span><br><span class="line">     <span class="keyword">for</span> x&gt;<span class="number">0</span>&#123;</span><br><span class="line">         bl = <span class="built_in">append</span>(bl, x%<span class="number">10</span>)</span><br><span class="line">         x = x/<span class="number">10</span></span><br><span class="line">     &#125;</span><br><span class="line">     l:=<span class="built_in">len</span>(bl)/<span class="number">2</span></span><br><span class="line">     <span class="keyword">for</span> i:=<span class="number">0</span>;i&lt;l;i++&#123;</span><br><span class="line">         <span class="keyword">if</span> bl[i]!=bl[<span class="built_in">len</span>(bl)-i<span class="number">-1</span>]&#123;</span><br><span class="line">             <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">         &#125;</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line"> &#125;</span><br></pre>          </td>        </tr>      </table>    </figure>  </li></ul><h4 id="10-正则表达式匹配"><a href="#10-正则表达式匹配" class="headerlink" title="10. 正则表达式匹配"></a>10. 正则表达式匹配</h4><blockquote>  <p>给定一个字符串 (s) 和一个字符模式 (p)。实现支持 ‘.’ 和 ‘*’ 的正则表达式匹配。</p>  <p>‘.’ 匹配任意单个字符。<br>‘*’ 匹配零个或多个前面的元素。<br>匹配应该覆盖整个字符串 (s) ，而不是部分字符串。</p>  <p>说明:</p>  <p>s 可能为空，且只包含从 a-z 的小写字母。<br>p 可能为空，且只包含从 a-z 的小写字母，以及字符 . 和 *。</p></blockquote><blockquote>  <p>解: 递归，很明显的</p></blockquote><ul>  <li>    <p>code</p>    <figure class="highlight go">      <table>        <tr>          <td class="gutter">            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre>          </td>          <td class="code">            <pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">isMatch</span><span class="params">(s <span class="keyword">string</span>, p <span class="keyword">string</span>)</span> <span class="title">bool</span></span> &#123;</span><br><span class="line">    lp := <span class="built_in">len</span>(p)</span><br><span class="line">    ls := <span class="built_in">len</span>(s)</span><br><span class="line">    <span class="keyword">if</span> ls == <span class="number">0</span> &amp;&amp; lp == <span class="number">0</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> ls !=<span class="number">0</span> &amp;&amp; lp == <span class="number">0</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> ls == <span class="number">0</span> &amp;&amp; lp!=<span class="number">0</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> p[lp<span class="number">-1</span>] == <span class="string">'*'</span>&#123;</span><br><span class="line">            <span class="keyword">if</span> lp == <span class="number">1</span>&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> isMatch(s, p[:lp<span class="number">-2</span>])</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> p[lp<span class="number">-1</span>] == <span class="string">'.'</span> || p[lp<span class="number">-1</span>] == s[ls<span class="number">-1</span>]&#123;</span><br><span class="line">        <span class="keyword">return</span> isMatch(s[:ls<span class="number">-1</span>], p[:lp<span class="number">-1</span>])</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">if</span> p[lp<span class="number">-1</span>] == <span class="string">'*'</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> isMatch(s, p[:lp<span class="number">-2</span>])&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (s[ls<span class="number">-1</span>] == p[lp<span class="number">-2</span>] || p[lp<span class="number">-2</span>] == <span class="string">'.'</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> isMatch(s[:ls<span class="number">-1</span>], p);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125;</span><br></pre>          </td>        </tr>      </table>    </figure>  </li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;6-Z-字形变换&quot;&gt;&lt;a href=&quot;#6-Z-字形变换&quot; class=&quot;headerlink&quot; title=&quot;6. Z 字形变换&quot;&gt;&lt;/a&gt;6. Z 字形变换&lt;/h4&gt;
&lt;blockquote&gt;
  &lt;p&gt;将一个给定字符串根据给定的行数，以从上往下、从左到右进行 Z 字形排列。比如输入字符串 为”LEETCODEISHIRING” 行数为 3 时，排列如下（忽略下划线）：&lt;br&gt; L _ C _ I _ R&lt;br&gt; E T O E S I I G&lt;br&gt; E _ D _ H _ N&lt;br&gt;之后，你的输出需要从左往右逐行读取，产生出一个新的字符串，比如：”LCIRETOESIIGEDHN”。请你实现这个将字符串进行指定行数变换的函数。&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="日常练习" scheme="http://ipiao.top/categories/%E6%97%A5%E5%B8%B8%E7%BB%83%E4%B9%A0/"/>
    
    
      <category term="leetcode" scheme="http://ipiao.top/tags/leetcode/"/>
    
  </entry>
  
  <entry>
    <title>Leetcode 3</title>
    <link href="http://ipiao.top/2018/12/24/Leetcode-3/"/>
    <id>http://ipiao.top/2018/12/24/Leetcode-3/</id>
    <published>2018-12-24T09:03:00.000Z</published>
    <updated>2018-12-26T10:20:36.451Z</updated>
    
    <content type="html"><![CDATA[<h4 id="字符串的排列"><a href="#字符串的排列" class="headerlink" title="字符串的排列"></a>字符串的排列</h4><blockquote>  <p>给定两个字符串 s1 和 s2，写一个函数来判断 s2 是否包含 s1 的排列。换句话说，第一个字符串的排列之一是第二个字符串的子串。注意：</p>  <ol>    <li>输入的字符串只包含小写字母</li>    <li>两个字符串的长度都在 [1, 10,000] 之间</li>  </ol></blockquote><ul>  <li>code </li></ul><figure class="highlight go">  <table>    <tr>      <td class="gutter">        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre>      </td>      <td class="code">        <pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">checkInclusion</span><span class="params">(s1 <span class="keyword">string</span>, s2 <span class="keyword">string</span>)</span> <span class="title">bool</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(s1) &gt; <span class="built_in">len</span>(s2) &#123; <span class="comment">// 长度比较</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">    v1 := sumstring(s1)</span><br><span class="line">    i:=<span class="built_in">len</span>(s1)</span><br><span class="line">    v2 := sumstring(s2[:i])</span><br><span class="line">    <span class="keyword">for</span> i &lt;= <span class="built_in">len</span>(s2) &#123;</span><br><span class="line">        <span class="keyword">if</span> i &gt; <span class="built_in">len</span>(s1)&#123;</span><br><span class="line">            v2 += <span class="keyword">int</span>(s2[i<span class="number">-1</span>]) - <span class="keyword">int</span>(s2[i-<span class="built_in">len</span>(s1)<span class="number">-1</span>])</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> v1 == v2 &#123; <span class="comment">// 在字符值相等的情况下才去判断是否是排列</span></span><br><span class="line">            <span class="keyword">if</span> p(s1, s2[i-<span class="built_in">len</span>(s1):i]) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        i++</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sumstring</span><span class="params">(s <span class="keyword">string</span>)</span> <span class="title">int</span></span> &#123; <span class="comment">// 计算string值</span></span><br><span class="line">    sum := <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i := <span class="keyword">range</span> s &#123;</span><br><span class="line">        sum += <span class="keyword">int</span>(s[i])</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> sum</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">p</span><span class="params">(b1, b2 <span class="keyword">string</span>)</span> <span class="title">bool</span></span> &#123;  <span class="comment">// 判断是否是排列，也可以用排序算法降低空间复杂度</span></span><br><span class="line">    m1 := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">byte</span>]<span class="keyword">int</span>)</span><br><span class="line">    m2 := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">byte</span>]<span class="keyword">int</span>)</span><br><span class="line">    <span class="keyword">for</span> i := <span class="keyword">range</span> b1 &#123;</span><br><span class="line">        m1[b1[i]] += <span class="number">1</span></span><br><span class="line">        m2[b2[i]] += <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> b, i := <span class="keyword">range</span> m1 &#123;</span><br><span class="line">        <span class="keyword">if</span> m2[b] != i &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre>      </td>    </tr>  </table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h4 id=&quot;字符串的排列&quot;&gt;&lt;a href=&quot;#字符串的排列&quot; class=&quot;headerlink&quot; title=&quot;字符串的排列&quot;&gt;&lt;/a&gt;字符串的排列&lt;/h4&gt;
&lt;blockquote&gt;
  &lt;p&gt;给定两个字符串 s1 和 s2，写一个函数来判断 s2 是否包含 s1 的排
      
    
    </summary>
    
      <category term="日常练习" scheme="http://ipiao.top/categories/%E6%97%A5%E5%B8%B8%E7%BB%83%E4%B9%A0/"/>
    
    
      <category term="字符串" scheme="http://ipiao.top/tags/%E5%AD%97%E7%AC%A6%E4%B8%B2/"/>
    
  </entry>
  
  <entry>
    <title>Leetcode 1-5</title>
    <link href="http://ipiao.top/2018/12/24/Leetcode-1-5/"/>
    <id>http://ipiao.top/2018/12/24/Leetcode-1-5/</id>
    <published>2018-12-24T08:15:00.000Z</published>
    <updated>2018-12-25T09:52:07.708Z</updated>
    
    <content type="html"><![CDATA[<h4 id="1-两数之和"><a href="#1-两数之和" class="headerlink" title="1. 两数之和"></a>1. 两数之和</h4><blockquote>  <p>给定一个整数数组<code>nums</code>和一个目标值<code>target</code>，请你在该数组中找出和为目标值的那两个整数，并返回他们的数组下标。</p></blockquote><blockquote>  <p>解: 目的是要返回数组下标。</p>  <ul>    <li>如果不考虑空间复杂度</li>    <li>如果考虑时间复杂度，就要保留一份数组备份，空间复杂度至少O(n),然后对数组进行排序，通过二分法查找，时间复杂度最优的是O(nlogn)</li>  </ul></blockquote><a id="more"></a><ul>  <li>    <p>code</p>    <figure class="highlight go">      <table>        <tr>          <td class="gutter">            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre>          </td>          <td class="code">            <pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">twoSum</span><span class="params">(nums []<span class="keyword">int</span>, target <span class="keyword">int</span>)</span> []<span class="title">int</span></span> &#123;</span><br><span class="line">m := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">int</span>]<span class="keyword">int</span>)</span><br><span class="line">      <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(nums); i++ &#123;</span><br><span class="line">          another := target - nums[i]</span><br><span class="line">          <span class="keyword">if</span> _, ok := m[another]; ok &#123;</span><br><span class="line">              <span class="keyword">return</span> []<span class="keyword">int</span>&#123;m[another], i&#125;</span><br><span class="line">          &#125;</span><br><span class="line">          m[nums[i]] = i</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">func</span> <span class="title">twoSum</span><span class="params">(nums []<span class="keyword">int</span>, target <span class="keyword">int</span>)</span> []<span class="title">int</span></span> &#123;</span><br><span class="line">      onum := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="built_in">len</span>(nums))</span><br><span class="line">      <span class="built_in">copy</span>(onum, nums) <span class="comment">// 保留备份</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">// Onlgn</span></span><br><span class="line">      sort.Ints(nums) <span class="comment">// 原数组排序</span></span><br><span class="line"></span><br><span class="line">      <span class="keyword">var</span> find = <span class="function"><span class="keyword">func</span><span class="params">(anum []<span class="keyword">int</span>, dest <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123; <span class="comment">// 二分查找数组中是否存在值为dest的元素</span></span><br><span class="line">          start := <span class="number">0</span></span><br><span class="line">          end := <span class="built_in">len</span>(anum) - <span class="number">1</span></span><br><span class="line">          <span class="keyword">var</span> mid <span class="keyword">int</span></span><br><span class="line">          <span class="keyword">for</span> start &lt; end<span class="number">-1</span> &#123;</span><br><span class="line">              mid = (start + end) / <span class="number">2</span></span><br><span class="line">              <span class="keyword">if</span> anum[mid] == dest &#123;</span><br><span class="line">                  <span class="keyword">return</span> mid</span><br><span class="line">              &#125;</span><br><span class="line">              <span class="keyword">if</span> anum[mid] &gt; dest &#123;</span><br><span class="line">                  end = mid</span><br><span class="line">              &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                  start = mid</span><br><span class="line">              &#125;</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">if</span> anum[start] == dest &#123;</span><br><span class="line">              <span class="keyword">return</span> start</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">if</span> anum[end] == dest &#123;</span><br><span class="line">              <span class="keyword">return</span> end</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 遍历数组匹配</span></span><br><span class="line">      <span class="keyword">for</span> i := <span class="keyword">range</span> nums &#123;</span><br><span class="line">          <span class="keyword">if</span> cj := find(nums[i+<span class="number">1</span>:], target-nums[i]); cj != <span class="number">-1</span> &#123;</span><br><span class="line">              <span class="keyword">var</span> ret = <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">0</span>)</span><br><span class="line">              <span class="keyword">for</span> j := <span class="keyword">range</span> onum &#123;</span><br><span class="line">                  <span class="keyword">if</span> onum[j] == nums[i] || onum[j] == nums[i+<span class="number">1</span>+cj] &#123;</span><br><span class="line">                      ret = <span class="built_in">append</span>(ret, j)</span><br><span class="line">                  &#125;</span><br><span class="line">              &#125;</span><br><span class="line">              <span class="keyword">return</span> ret</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">  &#125;</span><br></pre>          </td>        </tr>      </table>    </figure>  </li></ul><h4 id="2-两数相加"><a href="#2-两数相加" class="headerlink" title="2. 两数相加"></a>2. 两数相加</h4><blockquote>  <p>给出两个非空的链表用来表示两个非负的整数。其中，它们各自的位数是按照逆序的方式存储的，并且它们的每个节点只能存储一位数字。如果，我们将这两个数相加起来，则会返回一个新的链表来表示它们的和。您可以假设除了数字0之外，这两个数都不会以0开头。</p></blockquote><blockquote>  <p>解: 注意的只有两点</p>  <ul>    <li>进位</li>    <li>链表遍历到最后做长度判断和拼接</li>  </ul></blockquote><ul>  <li>    <p>code</p>    <figure class="highlight go">      <table>        <tr>          <td class="gutter">            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre>          </td>          <td class="code">            <pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * type ListNode struct &#123;</span></span><br><span class="line"><span class="comment"> *     Val int</span></span><br><span class="line"><span class="comment"> *     Next *ListNode</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">addTwoNumbers</span><span class="params">(l1 *ListNode, l2 *ListNode)</span> *<span class="title">ListNode</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> l1 == <span class="literal">nil</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> l2</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> l2 == <span class="literal">nil</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> l1</span><br><span class="line">    &#125;</span><br><span class="line">    node := <span class="built_in">new</span>(ListNode)</span><br><span class="line">    sum := l1.Val + l2.Val</span><br><span class="line">    node.Next = addTwoNumbers(l1.Next,l2.Next)</span><br><span class="line">    <span class="keyword">if</span> sum &lt;<span class="number">10</span>&#123;</span><br><span class="line">        node.Val = sum</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        node.Val = sum <span class="number">-10</span></span><br><span class="line">        node.Next = addTwoNumbers(node.Next, &amp;ListNode&#123;Val:<span class="number">1</span>&#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> node</span><br><span class="line">&#125;</span><br></pre>          </td>        </tr>      </table>    </figure>  </li></ul><h4 id="3-无重复字符的最长子串"><a href="#3-无重复字符的最长子串" class="headerlink" title="3. 无重复字符的最长子串"></a>3. 无重复字符的最长子串</h4><blockquote>  <p>给定一个字符串，请你找出其中不含有重复字符的<strong>最长子串</strong>的长度</p></blockquote><ul>  <li>    <p>code</p>    <figure class="highlight go">      <table>        <tr>          <td class="gutter">            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre>          </td>          <td class="code">            <pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">lengthOfLongestSubstring</span><span class="params">(s <span class="keyword">string</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> bMap = <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">rune</span>]<span class="keyword">int</span>) <span class="comment">// 存储字符索引，用于判断重复</span></span><br><span class="line">    <span class="keyword">var</span> startInd = <span class="number">0</span>              <span class="comment">// 有效点开始</span></span><br><span class="line">    <span class="keyword">var</span> maxLen = <span class="number">0</span>                <span class="comment">// 长度</span></span><br><span class="line">    <span class="keyword">for</span> i, r := <span class="keyword">range</span> s &#123;</span><br><span class="line">        ind,ok :=  bMap[r]</span><br><span class="line">        <span class="keyword">if</span> ok &amp;&amp; ind &gt;= startInd &#123;  <span class="comment">// 判断是否在有效区间内重复</span></span><br><span class="line">             startInd = ind + <span class="number">1</span>     <span class="comment">// 如果是，直接修改起始有效索引，没有比较的必要</span></span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            l := i - startInd + <span class="number">1</span>   <span class="comment">// 否则，每一步计算当前有效区间长度，避免临界问题</span></span><br><span class="line">            <span class="keyword">if</span> l &gt; maxLen&#123;          <span class="comment">// 与已有最大长度比较，如果超过最大长度就更新</span></span><br><span class="line">                maxLen = l</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        bMap[r] = i                 <span class="comment">// 赋值覆盖</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> maxLen</span><br><span class="line">&#125;</span><br></pre>          </td>        </tr>      </table>    </figure>  </li></ul><h4 id="4-寻找两个有序数组的中位数"><a href="#4-寻找两个有序数组的中位数" class="headerlink" title="4. 寻找两个有序数组的中位数"></a>4. 寻找两个有序数组的中位数</h4><blockquote>  <p>给定两个大小为m和n的有序数组nums1和nums2请你找出这两个有序数组的中位数，并且要求算法的时间复杂度为O(log(m + n))。你可以假设nums1和nums2不会同时为空。</p></blockquote><blockquote>  <p>解：有序数组，要求时间复杂度是O(log)级别的，应该是要使用二分法的。但是直接的二分法似乎没有可行之路，逐步分析下，发现通过递归可以实现。</p></blockquote><ul>  <li>    <p>code</p>    <figure class="highlight go">      <table>        <tr>          <td class="gutter">            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre>          </td>          <td class="code">            <pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">findMedianSortedArrays</span><span class="params">(nums1 []<span class="keyword">int</span>, nums2 []<span class="keyword">int</span>)</span> <span class="title">float64</span></span> &#123;</span><br><span class="line">    total := <span class="built_in">len</span>(nums1) + <span class="built_in">len</span>(nums2)</span><br><span class="line">    <span class="keyword">if</span> total%<span class="number">2</span> == <span class="number">1</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">float64</span>(findKthNum(nums1, nums2, total/<span class="number">2</span>+<span class="number">1</span>))</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0.5</span> * <span class="keyword">float64</span>(findKthNum(nums1, nums2, total/<span class="number">2</span>)+findKthNum(nums1, nums2, total/<span class="number">2</span>+<span class="number">1</span>))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 查找第k个数</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">findKthNum</span><span class="params">(nums1, nums2 []<span class="keyword">int</span>, k <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    l1, l2 := <span class="built_in">len</span>(nums1), <span class="built_in">len</span>(nums2)</span><br><span class="line">    <span class="keyword">if</span> l1 &gt; l2 &#123;</span><br><span class="line">        <span class="keyword">return</span> findKthNum(nums2, nums1, k)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> l1 == <span class="number">0</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> nums2[k<span class="number">-1</span>]</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> k == <span class="number">1</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> nums1[<span class="number">0</span>] &lt; nums2[<span class="number">0</span>] &#123;</span><br><span class="line">            <span class="keyword">return</span> nums1[<span class="number">0</span>]</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> nums2[<span class="number">0</span>]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> pa, pb <span class="keyword">int</span></span><br><span class="line">    <span class="keyword">if</span> l1 &lt; k/<span class="number">2</span> &#123;</span><br><span class="line">        pa = l1</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        pa = k / <span class="number">2</span></span><br><span class="line">    &#125;</span><br><span class="line">    pb = k - pa</span><br><span class="line">    <span class="comment">// 比较较小端可以直接去除，不可能落在那里面，类二分</span></span><br><span class="line">    <span class="keyword">if</span> nums1[pa<span class="number">-1</span>] &lt; nums2[pb<span class="number">-1</span>] &#123;</span><br><span class="line">        <span class="keyword">return</span> findKthNum(nums1[pa:], nums2, k-pa)</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> nums2[pb<span class="number">-1</span>] &lt; nums1[pa<span class="number">-1</span>] &#123;</span><br><span class="line">        <span class="keyword">return</span> findKthNum(nums1, nums2[pb:], k-pb)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> nums1[pa<span class="number">-1</span>]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre>          </td>        </tr>      </table>    </figure>  </li></ul><h4 id="5-最长回文子串"><a href="#5-最长回文子串" class="headerlink" title="5. 最长回文子串"></a>5. 最长回文子串</h4><blockquote>  <p>给定一个字符串 s，找到 s 中最长的回文子串。你可以假设 s 的最大长度为 1000。</p></blockquote><blockquote>  <p>解: 硬算</p></blockquote><ul>  <li>    <p>code</p>    <figure class="highlight go">      <table>        <tr>          <td class="gutter">            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre>          </td>          <td class="code">            <pre><span class="line"> <span class="function"><span class="keyword">func</span> <span class="title">longestPalindrome</span><span class="params">(s <span class="keyword">string</span>)</span> <span class="title">string</span></span> &#123;</span><br><span class="line">    rs := []<span class="keyword">rune</span>(s)</span><br><span class="line">    l := <span class="built_in">len</span>(rs)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> l&lt;=<span class="number">1</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> s</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    mp := rs[<span class="number">0</span>:<span class="number">1</span>] <span class="comment">// 最长子串</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; l<span class="number">-1</span>; i++ &#123;</span><br><span class="line">        temp1 := findPalindrome(rs, i, i)</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(temp1) &gt; <span class="built_in">len</span>(mp) &#123;</span><br><span class="line">            mp = temp1</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> rs[i] == rs[i+<span class="number">1</span>] &#123;</span><br><span class="line">            temp2 := findPalindrome(rs, i, i+<span class="number">1</span>)</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">len</span>(temp2) &gt; <span class="built_in">len</span>(mp) &#123;</span><br><span class="line">                mp = temp2</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">string</span>(mp)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">findPalindrome</span><span class="params">(rs []<span class="keyword">rune</span>, si, ei <span class="keyword">int</span>)</span> []<span class="title">rune</span></span> &#123;</span><br><span class="line">    <span class="keyword">for</span> si &gt; <span class="number">0</span> &amp;&amp; ei &lt; <span class="built_in">len</span>(rs)<span class="number">-1</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> rs[si<span class="number">-1</span>] == rs[ei+<span class="number">1</span>] &#123;</span><br><span class="line">            si--</span><br><span class="line">            ei++</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> rs[si : ei+<span class="number">1</span>]</span><br><span class="line">&#125;</span><br></pre>          </td>        </tr>      </table>    </figure>  </li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;1-两数之和&quot;&gt;&lt;a href=&quot;#1-两数之和&quot; class=&quot;headerlink&quot; title=&quot;1. 两数之和&quot;&gt;&lt;/a&gt;1. 两数之和&lt;/h4&gt;
&lt;blockquote&gt;
  &lt;p&gt;给定一个整数数组&lt;code&gt;nums&lt;/code&gt;和一个目标值&lt;code&gt;target&lt;/code&gt;，请你在该数组中找出和为目标值的那两个整数，并返回他们的数组下标。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
  &lt;p&gt;解: 目的是要返回数组下标。&lt;/p&gt;
  &lt;ul&gt;
    &lt;li&gt;如果不考虑空间复杂度&lt;/li&gt;
    &lt;li&gt;如果考虑时间复杂度，就要保留一份数组备份，空间复杂度至少O(n),然后对数组进行排序，通过二分法查找，时间复杂度最优的是O(nlogn)&lt;/li&gt;
  &lt;/ul&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="日常练习" scheme="http://ipiao.top/categories/%E6%97%A5%E5%B8%B8%E7%BB%83%E4%B9%A0/"/>
    
    
      <category term="leetcode" scheme="http://ipiao.top/tags/leetcode/"/>
    
  </entry>
  
  <entry>
    <title>Project Euler 1</title>
    <link href="http://ipiao.top/2018/12/24/Project-Euler-1/"/>
    <id>http://ipiao.top/2018/12/24/Project-Euler-1/</id>
    <published>2018-12-24T07:28:00.000Z</published>
    <updated>2018-12-24T08:14:18.361Z</updated>
    
    <content type="html"><![CDATA[<h4 id="1-3的倍数和5的倍数"><a href="#1-3的倍数和5的倍数" class="headerlink" title="1.3的倍数和5的倍数"></a>1.3的倍数和5的倍数</h4><blockquote>  <p>如果我们列出10以内所有3或5的倍数，我们将得到3、5、6和9，这些数的和是23。求1000以内所有3或5的倍数的和。</p></blockquote><blockquote>  <ul>    <li>中学经典求和问题。计算 和=3的倍数和+5的倍数和-15的倍数和。<figure class="highlight lsl">        <table>          <tr>            <td class="gutter">              <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre>            </td>            <td class="code">              <pre><span class="line"><span class="number">3</span>的倍数和 s1 = <span class="number">333</span>*<span class="number">334</span>/<span class="number">2</span>*<span class="number">3</span> = <span class="number">166833</span></span><br><span class="line"><span class="number">5</span>的倍数和 s2 = <span class="number">199</span>*<span class="number">200</span>/<span class="number">2</span>*<span class="number">5</span> = <span class="number">99500</span></span><br><span class="line"><span class="number">15</span>的倍数和 s3 = <span class="number">66</span>*<span class="number">67</span>/<span class="number">2</span>*<span class="number">15</span> = <span class="number">33165</span></span><br><span class="line">s = <span class="number">233168</span></span><br></pre>            </td>          </tr>        </table>      </figure>    </li>  </ul></blockquote><blockquote>  <ul>    <li>code<figure class="highlight clean">        <table>          <tr>            <td class="gutter">              <pre><span class="line">1</span><br></pre>            </td>            <td class="code">              <pre><span class="line">...</span><br></pre>            </td>          </tr>        </table>      </figure>    </li>  </ul></blockquote><a id="more"></a><h4 id="2-偶斐波那契数"><a href="#2-偶斐波那契数" class="headerlink" title="2.偶斐波那契数"></a>2.偶斐波那契数</h4><blockquote>  <p>斐波那契数列中的每一项都是前两项的和。由1和2开始生成的斐波那契数列前10项为：1, 2, 3, 5, 8, 13, 21, 34, 55, 89, … 考虑该斐波那契数列中不超过四百万的项，求其中为偶数的项之和。。</p></blockquote><blockquote></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;1-3的倍数和5的倍数&quot;&gt;&lt;a href=&quot;#1-3的倍数和5的倍数&quot; class=&quot;headerlink&quot; title=&quot;1.3的倍数和5的倍数&quot;&gt;&lt;/a&gt;1.3的倍数和5的倍数&lt;/h4&gt;
&lt;blockquote&gt;
  &lt;p&gt;如果我们列出10以内所有3或5的倍数，我们将得到3、5、6和9，这些数的和是23。求1000以内所有3或5的倍数的和。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
  &lt;ul&gt;
    &lt;li&gt;中学经典求和问题。计算 和=3的倍数和+5的倍数和-15的倍数和。&lt;figure class=&quot;highlight lsl&quot;&gt;
        &lt;table&gt;
          &lt;tr&gt;
            &lt;td class=&quot;gutter&quot;&gt;
              &lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;
            &lt;/td&gt;
            &lt;td class=&quot;code&quot;&gt;
              &lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;的倍数和 s1 = &lt;span class=&quot;number&quot;&gt;333&lt;/span&gt;*&lt;span class=&quot;number&quot;&gt;334&lt;/span&gt;/&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;*&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt; = &lt;span class=&quot;number&quot;&gt;166833&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;的倍数和 s2 = &lt;span class=&quot;number&quot;&gt;199&lt;/span&gt;*&lt;span class=&quot;number&quot;&gt;200&lt;/span&gt;/&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;*&lt;span class=&quot;number&quot;&gt;5&lt;/span&gt; = &lt;span class=&quot;number&quot;&gt;99500&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;15&lt;/span&gt;的倍数和 s3 = &lt;span class=&quot;number&quot;&gt;66&lt;/span&gt;*&lt;span class=&quot;number&quot;&gt;67&lt;/span&gt;/&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;*&lt;span class=&quot;number&quot;&gt;15&lt;/span&gt; = &lt;span class=&quot;number&quot;&gt;33165&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;s = &lt;span class=&quot;number&quot;&gt;233168&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
        &lt;/table&gt;
      &lt;/figure&gt;
    &lt;/li&gt;
  &lt;/ul&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
  &lt;ul&gt;
    &lt;li&gt;code&lt;figure class=&quot;highlight clean&quot;&gt;
        &lt;table&gt;
          &lt;tr&gt;
            &lt;td class=&quot;gutter&quot;&gt;
              &lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;
            &lt;/td&gt;
            &lt;td class=&quot;code&quot;&gt;
              &lt;pre&gt;&lt;span class=&quot;line&quot;&gt;...&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
        &lt;/table&gt;
      &lt;/figure&gt;
    &lt;/li&gt;
  &lt;/ul&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="我爱数学" scheme="http://ipiao.top/categories/%E6%88%91%E7%88%B1%E6%95%B0%E5%AD%A6/"/>
    
    
      <category term="pe" scheme="http://ipiao.top/tags/pe/"/>
    
  </entry>
  
  <entry>
    <title>链表（一）</title>
    <link href="http://ipiao.top/2018/12/17/%E5%BF%AB%E6%85%A2%E6%8C%87%E9%92%88%E6%B3%95/"/>
    <id>http://ipiao.top/2018/12/17/快慢指针法/</id>
    <published>2018-12-17T03:27:00.000Z</published>
    <updated>2018-12-17T08:33:13.332Z</updated>
    
    <content type="html"><![CDATA[<h4 id="快慢指针法"><a href="#快慢指针法" class="headerlink" title="快慢指针法"></a>快慢指针法</h4><ul>  <li>基本算法：<a href="https://www.cnblogs.com/songdechiu/p/6686520.html" target="_blank" rel="noopener">https://www.cnblogs.com/songdechiu/p/6686520.html</a> </li>  <li>扩展应用：<a href="https://www.cnblogs.com/hxsyl/p/4395794.html" target="_blank" rel="noopener">https://www.cnblogs.com/hxsyl/p/4395794.html</a></li></ul><blockquote>  <p>判断一个链表是否存在环<br><a id="more"></a>  </p></blockquote><ul>  <li>code</li></ul><figure class="highlight java">  <table>    <tr>      <td class="gutter">        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre>      </td>      <td class="code">        <pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * class ListNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     ListNode next;</span></span><br><span class="line"><span class="comment"> *     ListNode(int x) &#123;</span></span><br><span class="line"><span class="comment"> *         val = x;</span></span><br><span class="line"><span class="comment"> *         next = null;</span></span><br><span class="line"><span class="comment"> *     &#125;</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hasCycle</span><span class="params">(ListNode head)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(head==<span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">if</span>(head.next==<span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">if</span>(head.next.next==<span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        </span><br><span class="line">        ListNode slow=head;</span><br><span class="line">        ListNode fast=head;</span><br><span class="line">        <span class="keyword">while</span>(fast!=<span class="keyword">null</span> &amp;&amp; fast.next!=<span class="keyword">null</span>)&#123;</span><br><span class="line">             slow=slow.next;</span><br><span class="line">             fast=fast.next.next;</span><br><span class="line">             <span class="keyword">if</span>(fast==slow)&#123;</span><br><span class="line">                 <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">             &#125;</span><br><span class="line">         &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre>      </td>    </tr>  </table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;快慢指针法&quot;&gt;&lt;a href=&quot;#快慢指针法&quot; class=&quot;headerlink&quot; title=&quot;快慢指针法&quot;&gt;&lt;/a&gt;快慢指针法&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;基本算法：&lt;a href=&quot;https://www.cnblogs.com/songdechiu/p/6686520.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://www.cnblogs.com/songdechiu/p/6686520.html&lt;/a&gt; &lt;/li&gt;
  &lt;li&gt;扩展应用：&lt;a href=&quot;https://www.cnblogs.com/hxsyl/p/4395794.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://www.cnblogs.com/hxsyl/p/4395794.html&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
  &lt;p&gt;判断一个链表是否存在环&lt;br&gt;
    
    </summary>
    
      <category term="日常练习" scheme="http://ipiao.top/categories/%E6%97%A5%E5%B8%B8%E7%BB%83%E4%B9%A0/"/>
    
    
      <category term="leetcode" scheme="http://ipiao.top/tags/leetcode/"/>
    
      <category term="链表" scheme="http://ipiao.top/tags/%E9%93%BE%E8%A1%A8/"/>
    
  </entry>
  
  <entry>
    <title>数——丑数</title>
    <link href="http://ipiao.top/2018/12/17/%E4%B8%91%E6%95%B0%E8%AE%A1%E7%AE%97/"/>
    <id>http://ipiao.top/2018/12/17/丑数计算/</id>
    <published>2018-12-17T02:37:00.000Z</published>
    <updated>2018-12-17T08:35:01.619Z</updated>
    
    <content type="html"><![CDATA[<h4 id="丑数计算"><a href="#丑数计算" class="headerlink" title="丑数计算"></a>丑数计算</h4><blockquote>  <p>要求输入一个n数输出第n个丑数。丑数是素因子只有2,3,5,7…</p></blockquote><a id="more"></a><figure class="highlight go">  <table>    <tr>      <td class="gutter">        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre>      </td>      <td class="code">        <pre><span class="line"><span class="keyword">package</span> cal</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">"math"</span></span><br><span class="line"><span class="string">"sort"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// Ugly 丑数，基础</span></span><br><span class="line"><span class="comment">// base 素数数组 可以是 2,3,5|3,5,7</span></span><br><span class="line"><span class="keyword">type</span> Ugly <span class="keyword">struct</span> &#123;</span><br><span class="line">base  []<span class="keyword">int</span>   <span class="comment">// 基础素因子</span></span><br><span class="line">bmul  <span class="keyword">int</span>     <span class="comment">// 基础素因子 乘积</span></span><br><span class="line">cbase [][]<span class="keyword">int</span> <span class="comment">// 素因子对应的第i次计算次数</span></span><br><span class="line">ranks [][]<span class="keyword">int</span> <span class="comment">// 素因子各次值排序</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// NewUgly 创建一个丑数计算基础</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">NewUgly</span><span class="params">(base []<span class="keyword">int</span>)</span> *<span class="title">Ugly</span></span> &#123;</span><br><span class="line">sort.Ints(base)</span><br><span class="line">u := &amp;Ugly&#123;</span><br><span class="line">base: base,</span><br><span class="line">bmul: mul(base),</span><br><span class="line">&#125;</span><br><span class="line">u.calNext()</span><br><span class="line"><span class="keyword">return</span> u</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Get 获取第n个丑数</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(u *Ugly)</span> <span class="title">Get</span><span class="params">(n <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line"><span class="keyword">for</span> sumLen(u.ranks) &lt; n &#123;</span><br><span class="line">u.calNext()</span><br><span class="line">&#125;</span><br><span class="line">sl := <span class="number">0</span></span><br><span class="line">ret := <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> i := <span class="keyword">range</span> u.ranks &#123;</span><br><span class="line">li := <span class="built_in">len</span>(u.ranks[i])</span><br><span class="line"><span class="keyword">if</span> sl+li &gt;= n &#123;</span><br><span class="line">ret = u.ranks[i][n-sl<span class="number">-1</span>]</span><br><span class="line"><span class="keyword">break</span></span><br><span class="line">&#125;</span><br><span class="line">sl += li</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> ret</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 第n次计算</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(u *Ugly)</span> <span class="title">calNext</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="keyword">var</span> n = <span class="built_in">len</span>(u.cbase) + <span class="number">1</span></span><br><span class="line"><span class="keyword">var</span> bb = <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="built_in">len</span>(u.base))</span><br><span class="line"><span class="keyword">for</span> i, b := <span class="keyword">range</span> u.base &#123;</span><br><span class="line">bb[i] = maxc(pow(u.bmul, n), b)</span><br><span class="line">&#125;</span><br><span class="line">u.cbase = <span class="built_in">append</span>(u.cbase, bb)</span><br><span class="line"><span class="comment">//</span></span><br><span class="line">bn := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="built_in">len</span>(bb))</span><br><span class="line"><span class="keyword">var</span> rank []<span class="keyword">int</span></span><br><span class="line">min := pow(u.bmul, n<span class="number">-1</span>)</span><br><span class="line"><span class="keyword">for</span> autoAdd(bn, bb) &#123;</span><br><span class="line">pm := powmul(u.base, bn)</span><br><span class="line"><span class="keyword">if</span> pm &gt; min &amp;&amp; pm &lt;= pow(u.bmul, n) &#123;</span><br><span class="line">rank = <span class="built_in">append</span>(rank, pm)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">sort.Ints(rank)</span><br><span class="line">u.ranks = <span class="built_in">append</span>(u.ranks, rank)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 多元排序自增</span></span><br><span class="line"><span class="comment">// 返回是否还有下一个</span></span><br><span class="line"><span class="comment">// ln下限</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">autoAdd</span><span class="params">(bn, ln []<span class="keyword">int</span>)</span> <span class="title">bool</span></span> &#123;</span><br><span class="line"><span class="keyword">if</span> bn[<span class="number">0</span>] &lt; ln[<span class="number">0</span>] &#123;</span><br><span class="line">bn[<span class="number">0</span>]++</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line">bn[<span class="number">0</span>] = <span class="number">0</span></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">len</span>(bn) == <span class="number">1</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> autoAdd(bn[<span class="number">1</span>:], ln[<span class="number">1</span>:])</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取a以b为底的整数部分</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">maxc</span><span class="params">(a, b <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">int</span>(math.Log(<span class="keyword">float64</span>(a)) / math.Log(<span class="keyword">float64</span>(b)))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取乘积</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">mul</span><span class="params">(nums []<span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">ret := <span class="number">1</span></span><br><span class="line"><span class="keyword">for</span> _, n := <span class="keyword">range</span> nums &#123;</span><br><span class="line">ret *= n</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> ret</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取数组所有长度</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sumLen</span><span class="params">(a [][]<span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">l := <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> _, aa := <span class="keyword">range</span> a &#123;</span><br><span class="line">l += <span class="built_in">len</span>(aa)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> l</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">pow</span><span class="params">(x, n <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line"><span class="keyword">if</span> n == <span class="number">0</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line">ret := <span class="number">1</span></span><br><span class="line"><span class="keyword">for</span> i := <span class="number">0</span>; i &lt; n; i++ &#123;</span><br><span class="line">ret *= x</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> ret</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">powmul</span><span class="params">(a, b []<span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line"><span class="keyword">var</span> c = <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="built_in">len</span>(a))</span><br><span class="line"><span class="keyword">for</span> i := <span class="keyword">range</span> a &#123;</span><br><span class="line">c[i] = pow(a[i], b[i])</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> mul(c)</span><br><span class="line">&#125;</span><br></pre>      </td>    </tr>  </table></figure><h5 id="测试代码"><a href="#测试代码" class="headerlink" title="测试代码"></a>测试代码</h5><figure class="highlight css">  <table>    <tr>      <td class="gutter">        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre>      </td>      <td class="code">        <pre><span class="line"><span class="selector-tag">func</span> <span class="selector-tag">TestUgly</span>(<span class="selector-tag">t</span> *<span class="selector-tag">testing</span><span class="selector-class">.T</span>) &#123;</span><br><span class="line">    <span class="attribute">ug </span>:= <span class="built_in">NewUgly</span>([]int&#123;2, 3, 5&#125;)</span><br><span class="line">    n := ug.<span class="built_in">Get</span>(1500)</span><br><span class="line">    t.<span class="built_in">Log</span>(n)</span><br><span class="line">    t.<span class="built_in">Log</span>(sumLen(ug.ranks))</span><br><span class="line">    // t.<span class="built_in">Log</span>(ug.ranks)</span><br><span class="line">&#125;</span><br></pre>      </td>    </tr>  </table></figure><h5 id="返回结果-与网上一些博客给出的答案859963392有差距1个index，本人是以2作为第一个丑数的"><a href="#返回结果-与网上一些博客给出的答案859963392有差距1个index，本人是以2作为第一个丑数的" class="headerlink" title="返回结果,与网上一些博客给出的答案859963392有差距1个index，本人是以2作为第一个丑数的"></a>返回结果,与网上一些博客给出的答案<code>859963392</code>有差距1个index，本人是以2作为第一个丑数的</h5><figure class="highlight bash">  <table>    <tr>      <td class="gutter">        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre>      </td>      <td class="code">        <pre><span class="line">go <span class="built_in">test</span> -v -run <span class="string">'TestUgly'</span></span><br><span class="line">=== RUN   TestUgly</span><br><span class="line">--- PASS: TestUgly (0.00s)</span><br><span class="line">    cal_test.go:32: 860934420</span><br><span class="line">    cal_test.go:33: 2254</span><br><span class="line">PASS</span><br><span class="line">ok  github.com/ipiao/metools/math/cal0.006s</span><br></pre>      </td>    </tr>  </table></figure><h5 id="附上目标丑数附近的丑数序列"><a href="#附上目标丑数附近的丑数序列" class="headerlink" title="附上目标丑数附近的丑数序列"></a>附上目标丑数附近的丑数序列</h5><figure class="highlight bash">  <table>    <tr>      <td class="gutter">        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre>      </td>      <td class="code">        <pre><span class="line">810000000 816293376 819200000 820125000 829440000 838860800 839808000 843750000</span><br><span class="line">849346560 850305600 854296875 859963392 860934420 864000000 874800000 878906250</span><br><span class="line">884736000 885735000 895795200 900000000 905969664 906992640 911250000</span><br></pre>      </td>    </tr>  </table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;丑数计算&quot;&gt;&lt;a href=&quot;#丑数计算&quot; class=&quot;headerlink&quot; title=&quot;丑数计算&quot;&gt;&lt;/a&gt;丑数计算&lt;/h4&gt;
&lt;blockquote&gt;
  &lt;p&gt;要求输入一个n数输出第n个丑数。丑数是素因子只有2,3,5,7…&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="日常练习" scheme="http://ipiao.top/categories/%E6%97%A5%E5%B8%B8%E7%BB%83%E4%B9%A0/"/>
    
    
      <category term="博客迁移" scheme="http://ipiao.top/tags/%E5%8D%9A%E5%AE%A2%E8%BF%81%E7%A7%BB/"/>
    
      <category term="leetcode" scheme="http://ipiao.top/tags/leetcode/"/>
    
      <category term="数" scheme="http://ipiao.top/tags/%E6%95%B0/"/>
    
  </entry>
  
  <entry>
    <title>Go return,defer,panic执行分析</title>
    <link href="http://ipiao.top/2018/12/17/Go-return-defer-panic%E6%89%A7%E8%A1%8C%E5%88%86%E6%9E%90/"/>
    <id>http://ipiao.top/2018/12/17/Go-return-defer-panic执行分析/</id>
    <published>2018-12-17T02:13:00.000Z</published>
    <updated>2018-12-17T02:49:32.125Z</updated>
    
    <content type="html"><![CDATA[<h3 id="基本原则"><a href="#基本原则" class="headerlink" title="基本原则"></a>基本原则</h3><blockquote>  <ul>    <li>defer表示在函数结束前执行，并且多个defer是FILO的执行顺序</li>    <li>panic只会执行一个，recover的不算，后续的不会执行</li>    <li>return 返回与函数定义的是否带有返回参数是不一样的</li>  </ul></blockquote><a id="more"></a><h3 id="return-和-defer"><a href="#return-和-defer" class="headerlink" title="return 和 defer"></a>return 和 defer</h3><p>一个有返回值的函数，可以有以下2种定义:</p><figure class="highlight go">  <table>    <tr>      <td class="gutter">        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre>      </td>      <td class="code">        <pre><span class="line"><span class="comment">// 不带有返回值参数</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sum1</span><span class="params">(x,y <span class="keyword">int</span>)</span><span class="title">int</span></span>&#123;</span><br><span class="line">   s := x+y</span><br><span class="line">   <span class="keyword">return</span> s <span class="comment">// 假设返回参数是唯一变量s1，这里相当于显式的把s赋值给s1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 带有返回值参数</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sum2</span><span class="params">(x,y <span class="keyword">int</span>)</span><span class="params">(s <span class="keyword">int</span>)</span></span>&#123;</span><br><span class="line">    s = x+y</span><br><span class="line">    <span class="keyword">return</span> <span class="comment">// return的一定是s</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    s1 := sum1(<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line">    s2 := sum2(<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line">    <span class="built_in">print</span>(s1)   <span class="comment">// 3</span></span><br><span class="line">    <span class="built_in">print</span>(s2)   <span class="comment">// 3</span></span><br><span class="line">&#125;</span><br></pre>      </td>    </tr>  </table></figure><p>这sum1和sum2结果是一样的，但是组合上defer，会有不一样结果:</p><figure class="highlight go">  <table>    <tr>      <td class="gutter">        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre>      </td>      <td class="code">        <pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sum3</span><span class="params">(x,y <span class="keyword">int</span>)</span><span class="title">int</span></span>&#123;</span><br><span class="line">    s := x+y</span><br><span class="line">    <span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span>&#123;</span><br><span class="line">        s += <span class="number">2</span>  <span class="comment">// 第二步，对s进行自增运算，不影响s1的值</span></span><br><span class="line">    &#125;()</span><br><span class="line">    <span class="keyword">return</span> s <span class="comment">// 第一步，把值赋予给s1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sum4</span><span class="params">(x,y <span class="keyword">int</span>)</span><span class="params">(s <span class="keyword">int</span>)</span></span>&#123;</span><br><span class="line">    s = x+y</span><br><span class="line">    <span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span>&#123;</span><br><span class="line">        s += <span class="number">2</span> <span class="comment">// 第二步，对s进行自增运算，影响返回值s</span></span><br><span class="line">    &#125;()</span><br><span class="line">    <span class="keyword">return</span> <span class="comment">// 第一步，把值赋予给s本身(s2:=x+y;return s2是一样的)</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    s3 := sum3(<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line">    s4 := sum4(<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line">    <span class="built_in">println</span>(s3)   <span class="comment">// 3</span></span><br><span class="line">    <span class="built_in">println</span>(s4)   <span class="comment">// 5</span></span><br><span class="line">&#125;</span><br></pre>      </td>    </tr>  </table></figure><p>s3=3,s4=5，简单理解：</p><ol>  <li>函数在开始执行的时候，先初始化了它的返回值，如果未声明，随机一个tempS,如果声明了，即s</li>  <li>在执行到return（返回标志）的时候赋值。<ul>      <li>sum3函数先在执行到return时候，将tempS赋值为s，即3。由于s和tempS3是不同的变量，defer中的s+2就与tempS3无关。 </li>      <li>sum4函数由于声明了返回变量s，return时候，如果是 <code>return x+y</code>，其实将<code>x+y</code>复制给s，如果直接return，可以理解为跳过了复制操作。<br>在return之后的defer，s与sum3所谓的tempS3其实是一个，所以defer的操作是有效的。</li>    </ul>  </li></ol><h3 id="defer-和-panic"><a href="#defer-和-panic" class="headerlink" title="defer 和 panic"></a>defer 和 panic</h3><figure class="highlight go">  <table>    <tr>      <td class="gutter">        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre>      </td>      <td class="code">        <pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> a <span class="keyword">int</span></span><br><span class="line">    <span class="comment">// fn1</span></span><br><span class="line">    <span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">        a = <span class="number">3</span></span><br><span class="line">        <span class="keyword">if</span> err := <span class="built_in">recover</span>(); err != <span class="literal">nil</span> &#123;</span><br><span class="line">            a = <span class="number">4</span></span><br><span class="line">            fmt.Println(<span class="string">"++++"</span>)</span><br><span class="line">            f := err.(<span class="function"><span class="keyword">func</span><span class="params">()</span> <span class="title">string</span>)</span></span><br><span class="line"><span class="function">            <span class="title">fmt</span>.<span class="title">Println</span><span class="params">(err, f()</span>, <span class="title">reflect</span>.<span class="title">TypeOf</span><span class="params">(err)</span>.<span class="title">Kind</span><span class="params">()</span>.<span class="title">String</span><span class="params">()</span>)</span></span><br><span class="line"><span class="function">        &#125; <span class="title">else</span></span> &#123;</span><br><span class="line">            fmt.Println(<span class="string">"fatal"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;()</span><br><span class="line">    <span class="comment">// fn2</span></span><br><span class="line">    <span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">        a = <span class="number">2</span></span><br><span class="line">        <span class="keyword">if</span> r := <span class="built_in">recover</span>(); r != <span class="literal">nil</span> &#123;  <span class="comment">// 这里的recover()去掉感受一下效果</span></span><br><span class="line">            <span class="built_in">panic</span>(r)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">panic</span>(<span class="function"><span class="keyword">func</span><span class="params">()</span> <span class="title">string</span></span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"defer panic"</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;()</span><br><span class="line">    a = <span class="number">1</span></span><br><span class="line">    <span class="built_in">panic</span>(<span class="string">"panic1"</span>)  <span class="comment">// 这里的panic去掉感受一下效果</span></span><br><span class="line">    <span class="comment">// panic("panic2")</span></span><br><span class="line">&#125;</span><br></pre>      </td>    </tr>  </table></figure><blockquote>  <p>没什么好说的…</p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;基本原则&quot;&gt;&lt;a href=&quot;#基本原则&quot; class=&quot;headerlink&quot; title=&quot;基本原则&quot;&gt;&lt;/a&gt;基本原则&lt;/h3&gt;
&lt;blockquote&gt;
  &lt;ul&gt;
    &lt;li&gt;defer表示在函数结束前执行，并且多个defer是FILO的执行顺序&lt;/li&gt;
    &lt;li&gt;panic只会执行一个，recover的不算，后续的不会执行&lt;/li&gt;
    &lt;li&gt;return 返回与函数定义的是否带有返回参数是不一样的&lt;/li&gt;
  &lt;/ul&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="日常练习" scheme="http://ipiao.top/categories/%E6%97%A5%E5%B8%B8%E7%BB%83%E4%B9%A0/"/>
    
    
      <category term="go" scheme="http://ipiao.top/tags/go/"/>
    
      <category term="博客迁移" scheme="http://ipiao.top/tags/%E5%8D%9A%E5%AE%A2%E8%BF%81%E7%A7%BB/"/>
    
  </entry>
  
  <entry>
    <title>Apns 推送表情问题</title>
    <link href="http://ipiao.top/2018/12/14/Apns-%E6%8E%A8%E9%80%81%E8%A1%A8%E6%83%85%E9%97%AE%E9%A2%98/"/>
    <id>http://ipiao.top/2018/12/14/Apns-推送表情问题/</id>
    <published>2018-12-14T02:54:00.000Z</published>
    <updated>2018-12-19T09:00:22.832Z</updated>
    
    <content type="html"><![CDATA[<h3 id="Apns表情推送"><a href="#Apns表情推送" class="headerlink" title="Apns表情推送"></a>Apns表情推送</h3><p>1.常规的，服务端，尤其是go，发起apns推送是可以直接推送UTF-8表情的。</p><h3 id="问题场景"><a href="#问题场景" class="headerlink" title="问题场景"></a>问题场景</h3><ol>  <li>发起apns推送，用户名中有emoji表情，推送结果显示不出来。    <a id="more"></a>  </li></ol><blockquote>  <p>解决方案: 一顿操作以后，发现数据库字符是utf8mb4，字段字符集是<code>utf8_general_ci</code>。需要将字符集改成<code>utf8_unicode_ci</code>。有两种方式:</p>  <ul>    <li>直接修改数据库配置，或者值修改相应字段的字符集</li>    <li>在程序中连接mysql的时候修改连接设置(基于对连接参数设置的支持)，charset=utf8mb4&amp;collation=utf8_unicode_ci。与前者的差异是，这种修改只是针对当前连接的，以及字符集修改是针对数据库的，会产生相应的效率问题。</li>  </ul></blockquote><blockquote>  <p>    <font color="red">问题补充:</font> 发现在使用utf8_unicode_ci之后，数据库的插入出错(之前先插入缓存，所以问题没有及时发现)，所以在有插入需求的时候还是需要修改数据库的字段类型，这个时候发现<code>utf8_unicode_ci</code>就不是很好用，使用<code>utf8mb4_general_ci</code>  </p></blockquote><h3 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h3><ol>  <li><a href="https://developer.apple.com/library/archive/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/PayloadKeyReference.html#//apple_ref/doc/uid/TP40008194-CH17-SW1" target="_blank" rel="noopener">apns文档</a></li>  <li><a href="https://www.cnblogs.com/zhangwufei/p/7017325.html" target="_blank" rel="noopener">mysql Emoji存储方案</a></li>  <li><a href="https://blog.csdn.net/qingxili/article/details/82764072" target="_blank" rel="noopener">go 连接mysql参数设置</a></li></ol>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;Apns表情推送&quot;&gt;&lt;a href=&quot;#Apns表情推送&quot; class=&quot;headerlink&quot; title=&quot;Apns表情推送&quot;&gt;&lt;/a&gt;Apns表情推送&lt;/h3&gt;
&lt;p&gt;1.常规的，服务端，尤其是go，发起apns推送是可以直接推送UTF-8表情的。&lt;/p&gt;
&lt;h3 id=&quot;问题场景&quot;&gt;&lt;a href=&quot;#问题场景&quot; class=&quot;headerlink&quot; title=&quot;问题场景&quot;&gt;&lt;/a&gt;问题场景&lt;/h3&gt;
&lt;ol&gt;
  &lt;li&gt;发起apns推送，用户名中有emoji表情，推送结果显示不出来。
    
    </summary>
    
      <category term="第三方" scheme="http://ipiao.top/categories/%E7%AC%AC%E4%B8%89%E6%96%B9/"/>
    
    
      <category term="apns" scheme="http://ipiao.top/tags/apns/"/>
    
      <category term="emoji" scheme="http://ipiao.top/tags/emoji/"/>
    
  </entry>
  
</feed>
