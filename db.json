{"meta":{"version":1,"warehouse":"2.2.0"},"models":{"Asset":[{"_id":"themes/BlueLake/source/apple-touch-icon.png","path":"apple-touch-icon.png","modified":1,"renderable":1},{"_id":"themes/BlueLake/source/favicon.ico","path":"favicon.ico","modified":1,"renderable":1},{"_id":"themes/BlueLake/source/css/highlight.styl","path":"css/highlight.styl","modified":1,"renderable":1},{"_id":"themes/BlueLake/source/css/style.styl","path":"css/style.styl","modified":1,"renderable":1},{"_id":"themes/BlueLake/source/iconfont/iconfont.eot","path":"iconfont/iconfont.eot","modified":1,"renderable":1},{"_id":"themes/BlueLake/source/iconfont/iconfont.svg","path":"iconfont/iconfont.svg","modified":1,"renderable":1},{"_id":"themes/BlueLake/source/iconfont/iconfont.ttf","path":"iconfont/iconfont.ttf","modified":1,"renderable":1},{"_id":"themes/BlueLake/source/iconfont/iconfont.woff","path":"iconfont/iconfont.woff","modified":1,"renderable":1},{"_id":"themes/BlueLake/source/js/search.json.js","path":"js/search.json.js","modified":1,"renderable":1},{"_id":"themes/BlueLake/source/js/toctotop.js","path":"js/toctotop.js","modified":1,"renderable":1},{"_id":"themes/BlueLake/source/js/totop.js","path":"js/totop.js","modified":1,"renderable":1},{"_id":"themes/BlueLake/source/img/bg.jpg","path":"img/bg.jpg","modified":1,"renderable":1},{"_id":"source/images/DASHENG-900x700-1.png","path":"images/DASHENG-900x700-1.png","modified":1,"renderable":0},{"_id":"source/images/DASHENG-900x700-2.png","path":"images/DASHENG-900x700-2.png","modified":1,"renderable":0},{"_id":"source/images/DASHENG-900x700-4.png","path":"images/DASHENG-900x700-4.png","modified":1,"renderable":0},{"_id":"source/images/DASHENG-900x700-3.png","path":"images/DASHENG-900x700-3.png","modified":1,"renderable":0}],"Cache":[{"_id":"source/hexo-admin-ehc-images.json","hash":"0d165d7223eabfe5ebab834a5d89c8cb9731b5ff","modified":1544680855391},{"_id":"themes/BlueLake/LICENSE","hash":"3e191ca3f51efc111863c4941051291a696ef43e","modified":1544768167474},{"_id":"themes/BlueLake/README.en.md","hash":"b9f84036214ec79a8c319c5383696e0076305dfe","modified":1544768167474},{"_id":"themes/BlueLake/README.md","hash":"152969bd5a7e94a595d058f085c517b65d3b61d2","modified":1544768167475},{"_id":"themes/BlueLake/_config.yml","hash":"e78be705607fd8331c3ace0ea38d1af09b40be32","modified":1544770358051},{"_id":"themes/BlueLake/db.json","hash":"dfe8380263ace8fb180b4eb527e82db3e5a11978","modified":1544769915179},{"_id":"themes/BlueLake/package.json","hash":"d9c1ab4a4387665474aa8b4e2c60d3a7665ca899","modified":1544769914379},{"_id":"source/_discarded/first-post.md","hash":"9fec52b6f0f7053e7ee03fd1cb10e417dc6eea07","modified":1544755701950},{"_id":"source/_posts/Apns-推送表情问题.md","hash":"6ce5e8223111cdbe2a2a8be2b2170831833e7902","modified":1544765752883},{"_id":"source/_posts/TODO-博客迁移.md","hash":"c8d6114f1c42b3fed6d713bca5bf12c79a5cfd93","modified":1544755801771},{"_id":"source/_posts/hello-world.md","hash":"8a02477044e2b77f1b262da2c48c01429e4a32e4","modified":1544595524537},{"_id":"source/about/index.md","hash":"61f298228844e609464e5056d7a472701bc4213a","modified":1544770160859},{"_id":"themes/BlueLake/.git/FETCH_HEAD","hash":"43e963878ff7bf79f7905e99dedaf325a1350342","modified":1544771852111},{"_id":"themes/BlueLake/.git/HEAD","hash":"acbaef275e46a7f14c1ef456fff2c8bbe8c84724","modified":1544768167470},{"_id":"themes/BlueLake/.git/ORIG_HEAD","hash":"c292cfc66fa6a171bcb9e25157b4ee8f09da6755","modified":1544771852140},{"_id":"themes/BlueLake/.git/config","hash":"2cae29a06bbe4294fa78136833031d42847dd7e6","modified":1544768167470},{"_id":"themes/BlueLake/.git/description","hash":"9635f1b7e12c045212819dd934d809ef07efa2f4","modified":1544768163225},{"_id":"themes/BlueLake/.git/index","hash":"6d7855b1cdfd1da5aa5d9dd18431729ba2ef2c40","modified":1544768167480},{"_id":"themes/BlueLake/.git/packed-refs","hash":"842a64dcd40e108353d1da6314a0c447e35b921d","modified":1544768167462},{"_id":"themes/BlueLake/languages/de-DE.yml","hash":"3e78b20edc66b153cb6b708734ad9aa5381266bc","modified":1544768167475},{"_id":"themes/BlueLake/languages/en.yml","hash":"88f4e4cffce5598f949192d7e76c863a0d409981","modified":1544768167475},{"_id":"themes/BlueLake/languages/es-ES.yml","hash":"83ee131065111147d20ec13c4634a27ee4fd541d","modified":1544768167475},{"_id":"themes/BlueLake/languages/fr-FR.yml","hash":"d9f90ef2c6b4d8c95d142d021a5f47dda8462715","modified":1544768167475},{"_id":"themes/BlueLake/languages/ko.yml","hash":"20c7df4087ee65d75e96f68c71fdb050eb63677f","modified":1544768167475},{"_id":"themes/BlueLake/languages/tr.yml","hash":"1c623122f1ff7878595de6783bd83afc3a746373","modified":1544768167475},{"_id":"themes/BlueLake/languages/zh-CN.yml","hash":"0755af57d92a07ecff0e327f78eb25b0623a5852","modified":1544768167475},{"_id":"themes/BlueLake/languages/zh-TW.yml","hash":"61f419488d4a8f62c2b90ee766b6e68ba2e88bd7","modified":1544768167475},{"_id":"themes/BlueLake/layout/archive.jade","hash":"0497469c869f0ac28f150295dbddf6920e6582c1","modified":1544768167476},{"_id":"themes/BlueLake/layout/base.jade","hash":"2e65a06a499fbb67c72f8345d71222e40e9ef523","modified":1544768167477},{"_id":"themes/BlueLake/layout/category.jade","hash":"384e2e2588ecab3f518f03f11f2b052d3827fad8","modified":1544768167477},{"_id":"themes/BlueLake/layout/index.jade","hash":"ba1ea647af5c134b1a950638ea864663b29d4e22","modified":1544768167477},{"_id":"themes/BlueLake/layout/page.jade","hash":"7d2a48f6a902605fd6cfc237e3c2f9c02d76492e","modified":1544768167477},{"_id":"themes/BlueLake/layout/post.jade","hash":"3025e7e259d69551a35f17db3c3981aaa77fe7bc","modified":1544768167477},{"_id":"themes/BlueLake/layout/tag.jade","hash":"835da21846c730f0e3e344dc7e2e59154030b4f7","modified":1544768167477},{"_id":"themes/BlueLake/source/apple-touch-icon.png","hash":"98f0ecbdcdc1a0e8e52f4d786cbc011e5e06fa65","modified":1544768167477},{"_id":"themes/BlueLake/source/favicon.ico","hash":"94e5d25d942bff5479470322454c951f2ddebac6","modified":1544768167478},{"_id":"themes/BlueLake/.git/hooks/applypatch-msg.sample","hash":"86b9655a9ebbde13ac8dd5795eb4d5b539edab0f","modified":1544768163225},{"_id":"themes/BlueLake/.git/hooks/commit-msg.sample","hash":"ee1ed5aad98a435f2020b6de35c173b75d9affac","modified":1544768163225},{"_id":"themes/BlueLake/.git/hooks/post-update.sample","hash":"b614c2f63da7dca9f1db2e7ade61ef30448fc96c","modified":1544768163225},{"_id":"themes/BlueLake/.git/hooks/pre-applypatch.sample","hash":"42fa41564917b44183a50c4d94bb03e1768ddad8","modified":1544768163225},{"_id":"themes/BlueLake/.git/hooks/pre-commit.sample","hash":"e6c9fe47f7506171be08ed90baaf91d49bc7fe0c","modified":1544768163225},{"_id":"themes/BlueLake/.git/hooks/pre-push.sample","hash":"503c3d2cd9066c2329ae84309c03a4c274f6d90e","modified":1544768163225},{"_id":"themes/BlueLake/.git/hooks/pre-rebase.sample","hash":"5885a56ab4fca8075a05a562d005e922cde9853b","modified":1544768163225},{"_id":"themes/BlueLake/.git/hooks/prepare-commit-msg.sample","hash":"2b6275eda365cad50d167fe3a387c9bc9fedd54f","modified":1544768163225},{"_id":"themes/BlueLake/.git/hooks/update.sample","hash":"39355a075977d05708ef74e1b66d09a36e486df1","modified":1544768163225},{"_id":"themes/BlueLake/.git/info/exclude","hash":"c879df015d97615050afa7b9641e3352a1e701ac","modified":1544768163225},{"_id":"themes/BlueLake/.git/logs/HEAD","hash":"2856d310dc597aa84ea3f895eca8bcc2023e6ad4","modified":1544768167470},{"_id":"themes/BlueLake/layout/_partial/after_footer.jade","hash":"26ae121ecc5bbe351927dd273d58871f69454500","modified":1544768167475},{"_id":"themes/BlueLake/layout/_partial/comment_count.jade","hash":"52e4cacd58d5e0061924189ad75e0c3bf622aa7f","modified":1544768167475},{"_id":"themes/BlueLake/layout/_partial/comments.jade","hash":"af9a4a65eba65c5140921326f2b5cae9db5d7d28","modified":1544768167475},{"_id":"themes/BlueLake/layout/_partial/comments_js.jade","hash":"25e28dc48c392a5d10db1ed0f8a5899598d643d5","modified":1544768167476},{"_id":"themes/BlueLake/layout/_partial/footer.jade","hash":"dbc5c401f4d8aa80fe9e73423aadb8b8969f0b62","modified":1544768167476},{"_id":"themes/BlueLake/layout/_partial/helpers.jade","hash":"acdf9e2d52ee86c831fa15ce1570930c5779bc78","modified":1544768167476},{"_id":"themes/BlueLake/layout/_partial/mathjax.jade","hash":"b54b56faff9e47ab3ca3cdd55056c73e60776f3c","modified":1544768167476},{"_id":"themes/BlueLake/layout/_partial/mathjax2.jade","hash":"d6ac5dc4e9c7a1b866f1f92d88988cfb35aded4c","modified":1544768167476},{"_id":"themes/BlueLake/layout/_partial/paginator.jade","hash":"53f9cb77448e84a98da5eb688e2e12b173c555bb","modified":1544768167476},{"_id":"themes/BlueLake/layout/_partial/post_nav.jade","hash":"a2d698c84bb6da08195fe870dbd7215f65388d3f","modified":1544768167476},{"_id":"themes/BlueLake/layout/_partial/search.jade","hash":"1c988c7e1f716036e428ee16b8005a7b1bfb33c7","modified":1544768167476},{"_id":"themes/BlueLake/layout/_partial/share.jade","hash":"28d79fbb9d8ecc5692d3063e439f16224188abac","modified":1544768167476},{"_id":"themes/BlueLake/layout/_partial/tag.jade","hash":"0f0e6770e9d5dd8040e330d71bbbfadd2df36a28","modified":1544768167476},{"_id":"themes/BlueLake/layout/_partial/totop.jade","hash":"3e4141538285aef2bd019832ba62bafd094c6097","modified":1544768167476},{"_id":"themes/BlueLake/layout/_widget/archive.jade","hash":"082ae16dad18ada28913772675861d7230134bea","modified":1544768167476},{"_id":"themes/BlueLake/layout/_widget/category.jade","hash":"ba43bd011d64cd86fa420677c9000d328f4f6114","modified":1544768167476},{"_id":"themes/BlueLake/layout/_widget/links.jade","hash":"ff46afdedc1ab3c075ffed686b98f23aed066124","modified":1544768167476},{"_id":"themes/BlueLake/layout/_widget/recent_comments.jade","hash":"f8ae55d5514fe493651ec04fbe73cb5fc482f7cd","modified":1544768167476},{"_id":"themes/BlueLake/layout/_widget/recent_posts.jade","hash":"a0309137277323f2fd61a3c6691e1bc51026f711","modified":1544768167476},{"_id":"themes/BlueLake/layout/_widget/tag.jade","hash":"3df9a00a21d3bc151026b2d403a99c28fe1ccd13","modified":1544768167476},{"_id":"themes/BlueLake/layout/_widget/weibo.jade","hash":"53e99461ae7f8efb2a1e78ad3090dd93d18bcd5c","modified":1544768167476},{"_id":"themes/BlueLake/source/css/highlight.styl","hash":"be9ad73454b7029311caafd8e1faa469a5d4f58d","modified":1544768167477},{"_id":"themes/BlueLake/source/css/style.styl","hash":"5852cc541b74868e6464c7224b65683ea5aaa8d8","modified":1544768167478},{"_id":"themes/BlueLake/source/iconfont/iconfont.eot","hash":"e664dd848ca65fe3aca4acfc234ff9c18ffd4c33","modified":1544768167478},{"_id":"themes/BlueLake/source/iconfont/iconfont.svg","hash":"2b6a0b21bf63bdf746130117baf432fcb44ad210","modified":1544768167478},{"_id":"themes/BlueLake/source/iconfont/iconfont.ttf","hash":"5770696cc0d19d9c9479912a5cf54c9dd4ab24c4","modified":1544768167479},{"_id":"themes/BlueLake/source/iconfont/iconfont.woff","hash":"df2bd849134cbd02beb385e5061a30b923c99058","modified":1544768167479},{"_id":"themes/BlueLake/source/js/search.json.js","hash":"a0e8dfee9b9845aabd64360d497df7c0767b7235","modified":1544768167480},{"_id":"themes/BlueLake/source/js/toctotop.js","hash":"ad6386bc746ff375715ca9da17af4716ea86e06a","modified":1544768167480},{"_id":"themes/BlueLake/source/js/totop.js","hash":"5b1131830209c2daaf6fe34c5e39ab7c1059bfa4","modified":1544768167480},{"_id":"themes/BlueLake/source/img/bg.jpg","hash":"d23d92484e98adcbea7266ebfdfef7fb3fc42ee0","modified":1544768167480},{"_id":"source/images/DASHENG-900x700-1.png","hash":"8f275ab03560b758667ea8fbe2a32683d39840de","modified":1544680855525},{"_id":"themes/BlueLake/.git/objects/pack/pack-3a4d781b033c51b9e665879c04d9790cddf0febb.idx","hash":"407997a83a88a8396b35e82e6591f8f0943d5354","modified":1544768167419},{"_id":"themes/BlueLake/.git/refs/heads/master","hash":"c292cfc66fa6a171bcb9e25157b4ee8f09da6755","modified":1544768167470},{"_id":"source/images/DASHENG-900x700-2.png","hash":"a483686830d76d8c820c3a6f83ad6efaccbc48c1","modified":1544680855533},{"_id":"source/images/DASHENG-900x700-4.png","hash":"84179d4eb90ec12b2498bdd0f08982e86d5b1511","modified":1544680855533},{"_id":"source/images/DASHENG-900x700-3.png","hash":"c7da56072a60e52e3e8f2a8407859f47f69e0055","modified":1544680855536},{"_id":"themes/BlueLake/.git/logs/refs/heads/master","hash":"2856d310dc597aa84ea3f895eca8bcc2023e6ad4","modified":1544768167470},{"_id":"themes/BlueLake/.git/refs/remotes/origin/HEAD","hash":"d9427cda09aba1cdde5c69c2b13c905bddb0bc51","modified":1544768167469},{"_id":"themes/BlueLake/.git/logs/refs/remotes/origin/HEAD","hash":"2856d310dc597aa84ea3f895eca8bcc2023e6ad4","modified":1544768167470},{"_id":"themes/BlueLake/.git/objects/pack/pack-3a4d781b033c51b9e665879c04d9790cddf0febb.pack","hash":"4a772887b78fe207aeb39f26ef60cd34329ec6e8","modified":1544768167419},{"_id":"public/hexo-admin-ehc-images.json","hash":"0d165d7223eabfe5ebab834a5d89c8cb9731b5ff","modified":1544779601673},{"_id":"public/baidusitemap.xml","hash":"aaf6d8a6fcb59cc79c3261021ff1598064b18c92","modified":1544779601772},{"_id":"public/atom.xml","hash":"9003627e6725e4ab2cad5cee834232e26ea566fb","modified":1544779601772},{"_id":"public/content.json","hash":"bb83ec93ed3f4e2299d7fb89c1986ad02696b07d","modified":1544779601777},{"_id":"public/sitemap.xml","hash":"2abba3074e33afb530876d919df5cbce21b5ce8d","modified":1544779601777},{"_id":"public/about/index.html","hash":"132ef32459866912a27de5bd1df800bb1569b942","modified":1544779601795},{"_id":"public/2018/12/14/Apns-推送表情问题/index.html","hash":"29de36cb25d9840dde842490e5c5829d1ccdf3fa","modified":1544779601795},{"_id":"public/2018/12/14/TODO-博客迁移/index.html","hash":"f1a842da5239bb3e605986166b4f7f529c5396b9","modified":1544779601795},{"_id":"public/2018/12/12/hello-world/index.html","hash":"3ee4d423e0aa9b8082b8d07ddddbe043e7d8c72b","modified":1544779601795},{"_id":"public/archives/index.html","hash":"3620c71c8eb40c89305f2464ca9b786fb95cbfe9","modified":1544779601795},{"_id":"public/archives/2018/index.html","hash":"3620c71c8eb40c89305f2464ca9b786fb95cbfe9","modified":1544779601795},{"_id":"public/archives/2018/12/index.html","hash":"3620c71c8eb40c89305f2464ca9b786fb95cbfe9","modified":1544779601795},{"_id":"public/categories/第三方/index.html","hash":"5c89a17fa3d1500c8b8b05b8f0d89747c99adadd","modified":1544779601795},{"_id":"public/index.html","hash":"398c46c8b1aeff3137f31efe9c7ecf2cd2cbc97d","modified":1544779601796},{"_id":"public/tags/apns/index.html","hash":"c7e4f5a8b2858864aad43faee632e2de82621f2d","modified":1544779601796},{"_id":"public/tags/emoji/index.html","hash":"1966d9158a7b5965a613e91f4d06b61788958a27","modified":1544779601796},{"_id":"public/apple-touch-icon.png","hash":"98f0ecbdcdc1a0e8e52f4d786cbc011e5e06fa65","modified":1544779601798},{"_id":"public/favicon.ico","hash":"94e5d25d942bff5479470322454c951f2ddebac6","modified":1544779601798},{"_id":"public/iconfont/iconfont.eot","hash":"e664dd848ca65fe3aca4acfc234ff9c18ffd4c33","modified":1544779601798},{"_id":"public/iconfont/iconfont.svg","hash":"2b6a0b21bf63bdf746130117baf432fcb44ad210","modified":1544779601798},{"_id":"public/iconfont/iconfont.ttf","hash":"5770696cc0d19d9c9479912a5cf54c9dd4ab24c4","modified":1544779601798},{"_id":"public/iconfont/iconfont.woff","hash":"df2bd849134cbd02beb385e5061a30b923c99058","modified":1544779601798},{"_id":"public/img/bg.jpg","hash":"d23d92484e98adcbea7266ebfdfef7fb3fc42ee0","modified":1544779602317},{"_id":"public/css/highlight.css","hash":"81172a119d36c9639be63f459413b172f50bd29f","modified":1544779602425},{"_id":"public/js/search.json.js","hash":"54b3cf2ed272aabb1e45ff158823e04a00a8a8ca","modified":1544779602425},{"_id":"public/js/toctotop.js","hash":"5deabb279569c2f747bee34254169d31fb664f42","modified":1544779602426},{"_id":"public/js/totop.js","hash":"35f960ef35de0343051fa7f8feebd103efe06169","modified":1544779602426},{"_id":"public/css/style.css","hash":"54a3c6904fe56b33a2d290ee6d26af2baf244fa1","modified":1544779602426},{"_id":"public/images/DASHENG-900x700-1.png","hash":"8f275ab03560b758667ea8fbe2a32683d39840de","modified":1544779602431},{"_id":"public/images/DASHENG-900x700-2.png","hash":"a483686830d76d8c820c3a6f83ad6efaccbc48c1","modified":1544779602433},{"_id":"public/images/DASHENG-900x700-4.png","hash":"84179d4eb90ec12b2498bdd0f08982e86d5b1511","modified":1544779602433},{"_id":"public/images/DASHENG-900x700-3.png","hash":"c7da56072a60e52e3e8f2a8407859f47f69e0055","modified":1544779602434}],"Category":[{"name":"第三方","_id":"cjpntvz8l0004kt010r8xas12"}],"Data":[],"Page":[{"_content":"[{\"name\":\"DASHENG-900x700-1.png\",\"date\":1518959551960},{\"name\":\"DASHENG-900x700-2.png\",\"date\":1518959599098},{\"name\":\"DASHENG-900x700-3.png\",\"date\":1518959609913},{\"name\":\"DASHENG-900x700-4.png\",\"date\":1518959618105}]","source":"hexo-admin-ehc-images.json","raw":"[{\"name\":\"DASHENG-900x700-1.png\",\"date\":1518959551960},{\"name\":\"DASHENG-900x700-2.png\",\"date\":1518959599098},{\"name\":\"DASHENG-900x700-3.png\",\"date\":1518959609913},{\"name\":\"DASHENG-900x700-4.png\",\"date\":1518959618105}]","date":"2018-12-13T06:00:55.391Z","updated":"2018-12-13T06:00:55.391Z","path":"hexo-admin-ehc-images.json","layout":"false","title":"","comments":1,"_id":"cjpntvz790000kt01wjld3yk9","content":"[{\"name\":\"DASHENG-900x700-1.png\",\"date\":1518959551960},{\"name\":\"DASHENG-900x700-2.png\",\"date\":1518959599098},{\"name\":\"DASHENG-900x700-3.png\",\"date\":1518959609913},{\"name\":\"DASHENG-900x700-4.png\",\"date\":1518959618105}]","site":{"data":{}},"excerpt":"","more":"[{\"name\":\"DASHENG-900x700-1.png\",\"date\":1518959551960},{\"name\":\"DASHENG-900x700-2.png\",\"date\":1518959599098},{\"name\":\"DASHENG-900x700-3.png\",\"date\":1518959609913},{\"name\":\"DASHENG-900x700-4.png\",\"date\":1518959618105}]"},{"title":"about","date":"2018-12-14T06:49:20.000Z","_content":"","source":"about/index.md","raw":"---\ntitle: about\ndate: 2018-12-14 14:49:20\n---\n","updated":"2018-12-14T06:49:20.859Z","path":"about/index.html","comments":1,"layout":"page","_id":"cjpntvz8f0002kt01ui3d0ge3","content":"","site":{"data":{}},"excerpt":"","more":""}],"Post":[{"title":"Apns 推送表情问题","author":"ipiao","date":"2018-12-14T02:54:00.000Z","_content":"### Apns表情推送\n1.常规的，服务端，尤其是go，发起apns推送是可以直接推送UTF-8表情的。\n\n\n### 问题场景\n1. 发起apns推送，用户名中有emoji表情，推送结果显示不出来。\n\n  解决方案: 一顿操作以后，发现数据库字符是utf8mb4，字段字符集是utf8_general_ci。需要将字符集改成utf8_unicode_ci。有两种方式:\n  - 直接修改数据库配置，或者值修改相应字段的字符集\n  - 在程序中连接mysql的时候修改连接设置(基于对连接参数设置的支持)，charset=utf8mb4&collation=utf8_unicode_ci。与前者的差异是，这种修改只是针对当前连接的，以及字符集修改是针对数据库的，会产生相应的效率问题。\n\n\n### 参考资料\n1. [apns文档](https://developer.apple.com/library/archive/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/PayloadKeyReference.html#//apple_ref/doc/uid/TP40008194-CH17-SW1)\n2. [mysql Emoji存储方案](https://www.cnblogs.com/zhangwufei/p/7017325.html)\n3. [go 连接mysql参数设置](https://blog.csdn.net/qingxili/article/details/82764072)","source":"_posts/Apns-推送表情问题.md","raw":"title: Apns 推送表情问题\nauthor: ipiao\ntags:\n  - apns\n  - emoji\ncategories:\n  - 第三方\ndate: 2018-12-14 10:54:00\n---\n### Apns表情推送\n1.常规的，服务端，尤其是go，发起apns推送是可以直接推送UTF-8表情的。\n\n\n### 问题场景\n1. 发起apns推送，用户名中有emoji表情，推送结果显示不出来。\n\n  解决方案: 一顿操作以后，发现数据库字符是utf8mb4，字段字符集是utf8_general_ci。需要将字符集改成utf8_unicode_ci。有两种方式:\n  - 直接修改数据库配置，或者值修改相应字段的字符集\n  - 在程序中连接mysql的时候修改连接设置(基于对连接参数设置的支持)，charset=utf8mb4&collation=utf8_unicode_ci。与前者的差异是，这种修改只是针对当前连接的，以及字符集修改是针对数据库的，会产生相应的效率问题。\n\n\n### 参考资料\n1. [apns文档](https://developer.apple.com/library/archive/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/PayloadKeyReference.html#//apple_ref/doc/uid/TP40008194-CH17-SW1)\n2. [mysql Emoji存储方案](https://www.cnblogs.com/zhangwufei/p/7017325.html)\n3. [go 连接mysql参数设置](https://blog.csdn.net/qingxili/article/details/82764072)","slug":"Apns-推送表情问题","published":1,"updated":"2018-12-14T05:35:52.883Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjpntvz820001kt01cni1trcw","content":"<h3 id=\"Apns表情推送\"><a href=\"#Apns表情推送\" class=\"headerlink\" title=\"Apns表情推送\"></a>Apns表情推送</h3>\n<p>1.常规的，服务端，尤其是go，发起apns推送是可以直接推送UTF-8表情的。</p>\n<h3 id=\"问题场景\"><a href=\"#问题场景\" class=\"headerlink\" title=\"问题场景\"></a>问题场景</h3>\n<ol>\n  <li>\n    <p>发起apns推送，用户名中有emoji表情，推送结果显示不出来。</p>\n    <p>解决方案: 一顿操作以后，发现数据库字符是utf8mb4，字段字符集是utf8_general_ci。需要将字符集改成utf8_unicode_ci。有两种方式:</p>\n    <ul>\n      <li>直接修改数据库配置，或者值修改相应字段的字符集</li>\n      <li>在程序中连接mysql的时候修改连接设置(基于对连接参数设置的支持)，charset=utf8mb4&amp;collation=utf8_unicode_ci。与前者的差异是，这种修改只是针对当前连接的，以及字符集修改是针对数据库的，会产生相应的效率问题。</li>\n    </ul>\n  </li>\n</ol>\n<h3 id=\"参考资料\"><a href=\"#参考资料\" class=\"headerlink\" title=\"参考资料\"></a>参考资料</h3>\n<ol>\n  <li><a href=\"https://developer.apple.com/library/archive/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/PayloadKeyReference.html#//apple_ref/doc/uid/TP40008194-CH17-SW1\" target=\"_blank\" rel=\"noopener\">apns文档</a></li>\n  <li><a href=\"https://www.cnblogs.com/zhangwufei/p/7017325.html\" target=\"_blank\" rel=\"noopener\">mysql Emoji存储方案</a></li>\n  <li><a href=\"https://blog.csdn.net/qingxili/article/details/82764072\" target=\"_blank\" rel=\"noopener\">go 连接mysql参数设置</a></li>\n</ol>","site":{"data":{}},"excerpt":"","more":"<h3 id=\"Apns表情推送\"><a href=\"#Apns表情推送\" class=\"headerlink\" title=\"Apns表情推送\"></a>Apns表情推送</h3>\n<p>1.常规的，服务端，尤其是go，发起apns推送是可以直接推送UTF-8表情的。</p>\n<h3 id=\"问题场景\"><a href=\"#问题场景\" class=\"headerlink\" title=\"问题场景\"></a>问题场景</h3>\n<ol>\n  <li>\n    <p>发起apns推送，用户名中有emoji表情，推送结果显示不出来。</p>\n    <p>解决方案: 一顿操作以后，发现数据库字符是utf8mb4，字段字符集是utf8_general_ci。需要将字符集改成utf8_unicode_ci。有两种方式:</p>\n    <ul>\n      <li>直接修改数据库配置，或者值修改相应字段的字符集</li>\n      <li>在程序中连接mysql的时候修改连接设置(基于对连接参数设置的支持)，charset=utf8mb4&amp;collation=utf8_unicode_ci。与前者的差异是，这种修改只是针对当前连接的，以及字符集修改是针对数据库的，会产生相应的效率问题。</li>\n    </ul>\n  </li>\n</ol>\n<h3 id=\"参考资料\"><a href=\"#参考资料\" class=\"headerlink\" title=\"参考资料\"></a>参考资料</h3>\n<ol>\n  <li><a href=\"https://developer.apple.com/library/archive/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/PayloadKeyReference.html#//apple_ref/doc/uid/TP40008194-CH17-SW1\" target=\"_blank\" rel=\"noopener\">apns文档</a></li>\n  <li><a href=\"https://www.cnblogs.com/zhangwufei/p/7017325.html\" target=\"_blank\" rel=\"noopener\">mysql Emoji存储方案</a></li>\n  <li><a href=\"https://blog.csdn.net/qingxili/article/details/82764072\" target=\"_blank\" rel=\"noopener\">go 连接mysql参数设置</a></li>\n</ol>"},{"title":"TODO-博客迁移","author":"ipiao","date":"2018-12-14T02:48:00.000Z","_content":"\n#### TODO\n> [ghost](ghost.yukk.top)","source":"_posts/TODO-博客迁移.md","raw":"title: TODO-博客迁移\nauthor: ipiao\ntags: []\ncategories: []\ndate: 2018-12-14 10:48:00\n---\n\n#### TODO\n> [ghost](ghost.yukk.top)","slug":"TODO-博客迁移","published":1,"updated":"2018-12-14T02:50:01.771Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjpntvz8h0003kt01t1xinr0u","content":"<h4 id=\"TODO\"><a href=\"#TODO\" class=\"headerlink\" title=\"TODO\"></a>TODO</h4>\n<blockquote>\n  <p><a href=\"ghost.yukk.top\">ghost</a></p>\n</blockquote>","site":{"data":{}},"excerpt":"","more":"<h4 id=\"TODO\"><a href=\"#TODO\" class=\"headerlink\" title=\"TODO\"></a>TODO</h4>\n<blockquote>\n  <p><a href=\"ghost.yukk.top\">ghost</a></p>\n</blockquote>"},{"title":"Hello World","_content":"Welcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/deployment.html)\n","source":"_posts/hello-world.md","raw":"---\ntitle: Hello World\n---\nWelcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/deployment.html)\n","slug":"hello-world","published":1,"date":"2018-12-12T06:18:44.537Z","updated":"2018-12-12T06:18:44.537Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjpntvz8t0006kt01myfny5nw","content":"<p>Welcome to <a href=\"https://hexo.io/\" target=\"_blank\" rel=\"noopener\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\" target=\"_blank\" rel=\"noopener\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\" target=\"_blank\" rel=\"noopener\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\" target=\"_blank\" rel=\"noopener\">GitHub</a>.</p>\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2>\n<h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3>\n<figure class=\"highlight bash\">\n  <table>\n    <tr>\n      <td class=\"gutter\">\n        <pre><span class=\"line\">1</span><br></pre>\n      </td>\n      <td class=\"code\">\n        <pre><span class=\"line\">$ hexo new <span class=\"string\">\"My New Post\"</span></span><br></pre>\n      </td>\n    </tr>\n  </table>\n</figure>\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\" target=\"_blank\" rel=\"noopener\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3>\n<figure class=\"highlight bash\">\n  <table>\n    <tr>\n      <td class=\"gutter\">\n        <pre><span class=\"line\">1</span><br></pre>\n      </td>\n      <td class=\"code\">\n        <pre><span class=\"line\">$ hexo server</span><br></pre>\n      </td>\n    </tr>\n  </table>\n</figure>\n<p>More info: <a href=\"https://hexo.io/docs/server.html\" target=\"_blank\" rel=\"noopener\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3>\n<figure class=\"highlight bash\">\n  <table>\n    <tr>\n      <td class=\"gutter\">\n        <pre><span class=\"line\">1</span><br></pre>\n      </td>\n      <td class=\"code\">\n        <pre><span class=\"line\">$ hexo generate</span><br></pre>\n      </td>\n    </tr>\n  </table>\n</figure>\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\" target=\"_blank\" rel=\"noopener\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3>\n<figure class=\"highlight bash\">\n  <table>\n    <tr>\n      <td class=\"gutter\">\n        <pre><span class=\"line\">1</span><br></pre>\n      </td>\n      <td class=\"code\">\n        <pre><span class=\"line\">$ hexo deploy</span><br></pre>\n      </td>\n    </tr>\n  </table>\n</figure>\n<p>More info: <a href=\"https://hexo.io/docs/deployment.html\" target=\"_blank\" rel=\"noopener\">Deployment</a></p>","site":{"data":{}},"excerpt":"","more":"<p>Welcome to <a href=\"https://hexo.io/\" target=\"_blank\" rel=\"noopener\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\" target=\"_blank\" rel=\"noopener\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\" target=\"_blank\" rel=\"noopener\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\" target=\"_blank\" rel=\"noopener\">GitHub</a>.</p>\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2>\n<h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3>\n<figure class=\"highlight bash\">\n  <table>\n    <tr>\n      <td class=\"gutter\">\n        <pre><span class=\"line\">1</span><br></pre>\n      </td>\n      <td class=\"code\">\n        <pre><span class=\"line\">$ hexo new <span class=\"string\">\"My New Post\"</span></span><br></pre>\n      </td>\n    </tr>\n  </table>\n</figure>\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\" target=\"_blank\" rel=\"noopener\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3>\n<figure class=\"highlight bash\">\n  <table>\n    <tr>\n      <td class=\"gutter\">\n        <pre><span class=\"line\">1</span><br></pre>\n      </td>\n      <td class=\"code\">\n        <pre><span class=\"line\">$ hexo server</span><br></pre>\n      </td>\n    </tr>\n  </table>\n</figure>\n<p>More info: <a href=\"https://hexo.io/docs/server.html\" target=\"_blank\" rel=\"noopener\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3>\n<figure class=\"highlight bash\">\n  <table>\n    <tr>\n      <td class=\"gutter\">\n        <pre><span class=\"line\">1</span><br></pre>\n      </td>\n      <td class=\"code\">\n        <pre><span class=\"line\">$ hexo generate</span><br></pre>\n      </td>\n    </tr>\n  </table>\n</figure>\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\" target=\"_blank\" rel=\"noopener\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3>\n<figure class=\"highlight bash\">\n  <table>\n    <tr>\n      <td class=\"gutter\">\n        <pre><span class=\"line\">1</span><br></pre>\n      </td>\n      <td class=\"code\">\n        <pre><span class=\"line\">$ hexo deploy</span><br></pre>\n      </td>\n    </tr>\n  </table>\n</figure>\n<p>More info: <a href=\"https://hexo.io/docs/deployment.html\" target=\"_blank\" rel=\"noopener\">Deployment</a></p>"}],"PostAsset":[],"PostCategory":[{"post_id":"cjpntvz820001kt01cni1trcw","category_id":"cjpntvz8l0004kt010r8xas12","_id":"cjpntvz940008kt01fldq71ct"}],"PostTag":[{"post_id":"cjpntvz820001kt01cni1trcw","tag_id":"cjpntvz8s0005kt01cesrkuz0","_id":"cjpntvz940009kt012lr2age9"},{"post_id":"cjpntvz820001kt01cni1trcw","tag_id":"cjpntvz930007kt01285o0t4b","_id":"cjpntvz94000akt01ldjc534q"}],"Tag":[{"name":"apns","_id":"cjpntvz8s0005kt01cesrkuz0"},{"name":"emoji","_id":"cjpntvz930007kt01285o0t4b"}]}}