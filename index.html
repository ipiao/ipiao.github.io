<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta name="generator" content="Hexo 3.8.0">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
  <meta content="yes" name="apple-mobile-web-app-capable">
  <meta content="black-translucent" name="apple-mobile-web-app-status-bar-style">
  <meta content="telephone=no" name="format-detection">
  <meta name="description" content="没有理由，只是想做些什么">
  <meta name="keywords" content="go,ipiao">
  <title>欣欣然不知所以 | ......</title>
  <link rel="stylesheet" type="text/css" href="//fonts.neworld.org/css?family=Source+Code+Pro">
  <link rel="stylesheet" type="text/css" href="/css/style.css?v=2.0.1">
  <link rel="stylesheet" type="text/css" href="/css/highlight.css?v=2.0.1">
  <link rel="Shortcut Icon" href="/favicon.ico">
  <link rel="bookmark" href="/favicon.ico">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  <link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png">
  <link rel="alternate" type="application/atom+xml" href="/atom.xml">
</head>

<body>
  <div class="body_container">
    <div id="header">
      <div class="site-name">
        <h1 class="hidden">欣欣然不知所以</h1><a id="logo" href="/.">欣欣然不知所以</a>
        <p class="description">......</p>
      </div>
      <div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div>
      <div id="search-form">
        <div id="result-mask" class="hide"></div><label><input id="search-key" type="text" autocomplete="on" placeholder="input keyword to search..."></label>
        <div id="result-wrap" class="hide">
          <div id="search-result"></div>
        </div>
        <div class="hide"><template id="search-tpl">
            <div class="item"><a href="/{path}" title="{title}">
                <div class="title">{title}</div>
                <div class="time">{date}</div>
                <div class="tags">{tags}</div>
              </a></div>
          </template></div>
      </div>
    </div>
    <div id="layout" class="layout-g">
      <div class="layout-l">
        <div class="content_container">
          <div class="post">
            <h2 class="post-title"><a href="/2019/10/24/mysql并发调试命名/">mysql并发调试</a></h2>
            <div class="post-meta"><a href="/2019/10/24/mysql并发调试命名/#comments" class="comment-count"><span id="url::http://ipiao.top/2019/10/24/mysql并发调试命名/" class="cy_cmt_count"></span>留言,<span id="url::http://ipiao.top/2019/10/24/mysql并发调试命名/" class="cy_cmt_participate"></span>参与</a>
              <p><span class="date">19-10-24</span><span><a href="/categories/不务正业/" class="category">不务正业</a></span></p>
            </div>
            <div class="post-content">
              <h4 id="常用命令列举"><a href="#常用命令列举" class="headerlink" title="常用命令列举"></a>常用命令列举</h4>
            </div>
            <p class="readmore"><a href="/2019/10/24/mysql并发调试命名/">阅读更多</a></p>
          </div>
          <div class="post">
            <h2 class="post-title"><a href="/2019/09/11/TCP-Delayed-Ack-Ack确认延迟-Nagle-Algorithm-纳格算法/">TCP Delayed Ack(Ack确认延迟) &amp;&amp; Nagle Algorithm(纳格算法)</a></h2>
            <div class="post-meta"><a href="/2019/09/11/TCP-Delayed-Ack-Ack确认延迟-Nagle-Algorithm-纳格算法/#comments" class="comment-count"><span id="url::http://ipiao.top/2019/09/11/TCP-Delayed-Ack-Ack确认延迟-Nagle-Algorithm-纳格算法/" class="cy_cmt_count"></span>留言,<span id="url::http://ipiao.top/2019/09/11/TCP-Delayed-Ack-Ack确认延迟-Nagle-Algorithm-纳格算法/" class="cy_cmt_participate"></span>参与</a>
              <p><span class="date">19-09-11</span><span><a href="/categories/reading/" class="category">reading</a></span></p>
            </div>
            <div class="post-content">
              <p>[原文连接: <a href="https://www.jianshu.com/p/bc3c1d6dafe8?from=singlemessage]" target="_blank" rel="noopener">https://www.jianshu.com/p/bc3c1d6dafe8?from=singlemessage]</a></p>
              <p>如果一个 TCP 连接的一端启用了 Nagle‘s Algorithm，而另一端启用了 TCP Delayed<br>Ack，而发送的数据包又比较小，则可能会出现这样的情况：发送端在等 待接收端对上<br>一个packet 的 Ack 才发送当前的 packet，而接收端则正好延迟了 此 Ack 的发送，那么<br>这个正要被发送的 packet 就会同样被延迟。当然 Delayed Ack 是有个超时机制的，而默<br>认的超时正好就是40ms。</p>
            </div>
            <p class="readmore"><a href="/2019/09/11/TCP-Delayed-Ack-Ack确认延迟-Nagle-Algorithm-纳格算法/">阅读更多</a></p>
          </div>
          <div class="post">
            <h2 class="post-title"><a href="/2019/09/11/Go语言TCP网络编程/">Go语言TCP网络编程</a></h2>
            <div class="post-meta"><a href="/2019/09/11/Go语言TCP网络编程/#comments" class="comment-count"><span id="url::http://ipiao.top/2019/09/11/Go语言TCP网络编程/" class="cy_cmt_count"></span>留言,<span id="url::http://ipiao.top/2019/09/11/Go语言TCP网络编程/" class="cy_cmt_participate"></span>参与</a>
              <p><span class="date">19-09-11</span><span><a href="/categories/golang大法好/" class="category">golang大法好</a></span></p>
            </div>
            <div class="post-content">
              <p>[原文链接：<a href="https://blog.csdn.net/hacker00011000/article/details/53910367]" target="_blank" rel="noopener">https://blog.csdn.net/hacker00011000/article/details/53910367]</a></p>
              <h5 id="一、序言"><a href="#一、序言" class="headerlink" title="一、序言"></a>一、序言</h5>
              <p>Golang的主要 设计目标之一就是面向大规模后端服务程序，网络通信这块是服务端 程序必不可少也是至关重要的一部分。在日常应用中，我们也可以看到Go中的net以及其subdirectories下的包均是“高频+刚需”，而TCP socket则是网络编程的主流，即便您没有直接使用到net中有关TCP Socket方面的接口，但net/http总是用到了吧，http底层依旧是用tcp socket实现的</p>
              <p>网络编程方面，我们最常用的就是tcp socket编程了，在posix标准出来后，socket在各大主流OS平台上都得到了很好的支持。关于tcp programming，最好的资料莫过于W. Richard Stevens 的网络编程圣经《UNIX网络 编程 卷1：套接字联网API》 了，书中关于tcp socket接口的各种使用、行为模式、异常处理讲解的十分细致。Go是自带runtime的跨平台编程语言，Go中暴露给语言使用者的tcp socket api是建立OS原生tcp socket接口之上的。由于Go runtime调度的需要，golang tcp socket接口在行为特点与异常处理方面与OS原生接口有着一些差别。这篇博文的目标就是整理出关于Go tcp socket在各个场景下的使用方法、行为特点以及注意事项<br></p>
            </div>
            <p class="readmore"><a href="/2019/09/11/Go语言TCP网络编程/">阅读更多</a></p>
          </div>
          <div class="post">
            <h2 class="post-title"><a href="/2019/07/23/redis-其他/">redis_其他</a></h2>
            <div class="post-meta"><a href="/2019/07/23/redis-其他/#comments" class="comment-count"><span id="url::http://ipiao.top/2019/07/23/redis-其他/" class="cy_cmt_count"></span>留言,<span id="url::http://ipiao.top/2019/07/23/redis-其他/" class="cy_cmt_participate"></span>参与</a>
              <p><span class="date">19-07-23</span><span><a href="/categories/reading/" class="category">reading</a></span></p>
            </div>
            <div class="post-content">
              <h4 id="命令参考"><a href="#命令参考" class="headerlink" title="命令参考"></a>命令参考</h4>
              <ul>
                <li><a href="http://redisdoc.com/index.html" target="_blank" rel="noopener">http://redisdoc.com/index.html</a></li>
              </ul>
            </div>
            <p class="readmore"><a href="/2019/07/23/redis-其他/">阅读更多</a></p>
          </div>
          <div class="post">
            <h2 class="post-title"><a href="/2019/07/12/读-Redis设计与实现-与redis-5-0-源码-rdb/">读&lt;&lt;Redis设计与实现&gt;&gt;与redis(5.0)源码__rdb</a></h2>
            <div class="post-meta"><a href="/2019/07/12/读-Redis设计与实现-与redis-5-0-源码-rdb/#comments" class="comment-count"><span id="url::http://ipiao.top/2019/07/12/读-Redis设计与实现-与redis-5-0-源码-rdb/" class="cy_cmt_count"></span>留言,<span id="url::http://ipiao.top/2019/07/12/读-Redis设计与实现-与redis-5-0-源码-rdb/" class="cy_cmt_participate"></span>参与</a>
              <p><span class="date">19-07-12</span><span><a href="/categories/reading/" class="category">reading</a></span></p>
            </div>
            <div class="post-content">
              <h4 id="db"><a href="#db" class="headerlink" title="db"></a>db</h4>
              <figure class="highlight c">
                <table>
                  <tr>
                    <td class="gutter">
                      <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre>
                    </td>
                    <td class="code">
                      <pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">redisDb</span> &#123;</span></span><br><span class="line">    dict *dict;                 <span class="comment">/* The keyspace for this DB */</span></span><br><span class="line">    dict *expires;              <span class="comment">/* Timeout of keys with a timeout set */</span></span><br><span class="line">    dict *blocking_keys;        <span class="comment">/* Keys with clients waiting for data (BLPOP)*/</span></span><br><span class="line">    dict *ready_keys;           <span class="comment">/* Blocked keys that received a PUSH */</span></span><br><span class="line">    dict *watched_keys;         <span class="comment">/* WATCHED keys for MULTI/EXEC CAS */</span></span><br><span class="line">    <span class="keyword">int</span> id;                     <span class="comment">/* Database ID */</span></span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> avg_ttl;          <span class="comment">/* Average TTL, just for stats */</span></span><br><span class="line">    <span class="built_in">list</span> *defrag_later;         <span class="comment">/* List of key names to attempt to defrag one by one, gradually. */</span></span><br><span class="line">&#125; redisDb;</span><br></pre>
                    </td>
                  </tr>
                </table>
              </figure>
            </div>
            <p class="readmore"><a href="/2019/07/12/读-Redis设计与实现-与redis-5-0-源码-rdb/">阅读更多</a></p>
          </div>
          <div class="post">
            <h2 class="post-title"><a href="/2019/07/11/读-Redis设计与实现-与redis-5-0-源码-对象/">读&lt;&lt;Redis设计与实现&gt;&gt;与redis(5.0)源码__对象</a></h2>
            <div class="post-meta"><a href="/2019/07/11/读-Redis设计与实现-与redis-5-0-源码-对象/#comments" class="comment-count"><span id="url::http://ipiao.top/2019/07/11/读-Redis设计与实现-与redis-5-0-源码-对象/" class="cy_cmt_count"></span>留言,<span id="url::http://ipiao.top/2019/07/11/读-Redis设计与实现-与redis-5-0-源码-对象/" class="cy_cmt_participate"></span>参与</a>
              <p><span class="date">19-07-11</span><span><a href="/categories/reading/" class="category">reading</a></span></p>
            </div>
            <div class="post-content">
              <h4 id="redisObject"><a href="#redisObject" class="headerlink" title="redisObject"></a>redisObject</h4>
              <figure class="highlight c">
                <table>
                  <tr>
                    <td class="gutter">
                      <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre>
                    </td>
                    <td class="code">
                      <pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">redisObject</span> &#123;</span></span><br><span class="line">    <span class="keyword">unsigned</span> type:<span class="number">4</span>; <span class="comment">// 类型,4位</span></span><br><span class="line">    <span class="keyword">unsigned</span> encoding:<span class="number">4</span>; <span class="comment">// 编码</span></span><br><span class="line">    <span class="comment">// 上次访问时间</span></span><br><span class="line">    <span class="comment">// #define LRU_BITS 24</span></span><br><span class="line">    <span class="keyword">unsigned</span> lru:LRU_BITS; <span class="comment">/* LRU time (relative to global lru_clock) or</span></span><br><span class="line"><span class="comment">                            * LFU data (least significant 8 bits frequency</span></span><br><span class="line"><span class="comment">                            * and most significant 16 bits access time). */</span></span><br><span class="line">    <span class="keyword">int</span> refcount; <span class="comment">// 引用次数</span></span><br><span class="line">    <span class="keyword">void</span> *ptr;    <span class="comment">// 底层地址</span></span><br><span class="line">&#125; robj;</span><br></pre>
                    </td>
                  </tr>
                </table>
              </figure>
            </div>
            <p class="readmore"><a href="/2019/07/11/读-Redis设计与实现-与redis-5-0-源码-对象/">阅读更多</a></p>
          </div>
          <div class="post">
            <h2 class="post-title"><a href="/2019/07/11/读-Redis设计与实现-与redis-5-0-源码-ziplist/">读&lt;&lt;Redis设计与实现&gt;&gt;与redis(5.0)源码__ziplist</a></h2>
            <div class="post-meta"><a href="/2019/07/11/读-Redis设计与实现-与redis-5-0-源码-ziplist/#comments" class="comment-count"><span id="url::http://ipiao.top/2019/07/11/读-Redis设计与实现-与redis-5-0-源码-ziplist/" class="cy_cmt_count"></span>留言,<span id="url::http://ipiao.top/2019/07/11/读-Redis设计与实现-与redis-5-0-源码-ziplist/" class="cy_cmt_participate"></span>参与</a>
              <p><span class="date">19-07-11</span><span><a href="/categories/reading/" class="category">reading</a></span></p>
            </div>
            <div class="post-content">
              <h4 id="ziplist构成"><a href="#ziplist构成" class="headerlink" title="ziplist构成"></a>ziplist构成</h4>
              <blockquote>
                <table>
                  <thead>
                    <tr>
                      <th>zlbytes-</th>
                      <th>ztail-</th>
                      <th>zllen-</th>
                      <th>entrys-…-</th>
                      <th>zlend</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>uint32_t</td>
                      <td>uint32_t</td>
                      <td>uint16_t</td>
                      <td>zlentry</td>
                      <td>uint8_t</td>
                    </tr>
                  </tbody>
                </table>
              </blockquote>
              <blockquote>
                <p>因为zlend使用固定值<code>ZIP_END = 255</code>作为结束标志(0xFF作为uint8的最大值,与prevlen单字节长度0xFE进行区别,同时是最后面的两个数作为标志(这个懂的吧)).</p>
              </blockquote>
            </div>
            <p class="readmore"><a href="/2019/07/11/读-Redis设计与实现-与redis-5-0-源码-ziplist/">阅读更多</a></p>
          </div>
          <div class="post">
            <h2 class="post-title"><a href="/2019/07/10/vimium/">vimium</a></h2>
            <div class="post-meta"><a href="/2019/07/10/vimium/#comments" class="comment-count"><span id="url::http://ipiao.top/2019/07/10/vimium/" class="cy_cmt_count"></span>留言,<span id="url::http://ipiao.top/2019/07/10/vimium/" class="cy_cmt_participate"></span>参与</a>
              <p><span class="date">19-07-10</span><span><a href="/categories/不务正业/" class="category">不务正业</a></span></p>
            </div>
            <div class="post-content">
              <h4 id="chrome扩展vimium"><a href="#chrome扩展vimium" class="headerlink" title="chrome扩展vimium"></a>chrome扩展vimium</h4>
              <ul>
                <li>github: <a href="https://github.com/philc/vimium" target="_blank" rel="noopener">https://github.com/philc/vimium</a></li>
                <li>安装访问: chrome://extensions</li>
                <li>在无痕模式下是无效的</li>
              </ul>
              <h4 id="使用说明"><a href="#使用说明" class="headerlink" title="使用说明"></a>使用说明</h4>
              <ul>
                <li>
                  <p>前缀 c=ctrl, m=meta, a=alt,大写+shift</p>
                </li>
                <li>
                  <p>当前页的操作</p>
                  <ul>
                    <li>使用 ? 调出使用说明,快捷键列表</li>
                    <li>h,j,k,l 左下上右滚动</li>
                    <li>gg回到顶部</li>
                    <li>G到页面底部</li>
                    <li>d下滚半屏</li>
                    <li>u上滚半屏</li>
                    <li>f在当前tab打开链接</li>
                    <li>F在新tab打开链接</li>
                    <li>r刷新</li>
                    <li>gs查看源码</li>
                    <li>i 进入插入模式,其他键失效,知道ESC</li>
                    <li>yy复制当前url</li>
                    <li>yf复制链接url</li>
                    <li>gf进入下一个frame</li>
                    <li>gF回到上级frame</li>
                  </ul>
                </li>
              </ul>
            </div>
            <p class="readmore"><a href="/2019/07/10/vimium/">阅读更多</a></p>
          </div>
          <div class="post">
            <h2 class="post-title"><a href="/2019/07/09/读-Redis设计与实现-与redis-5-0-源码-skiplist/">读&lt;&lt;Redis设计与实现&gt;&gt;与redis(5.0)源码__skiplist</a></h2>
            <div class="post-meta"><a href="/2019/07/09/读-Redis设计与实现-与redis-5-0-源码-skiplist/#comments" class="comment-count"><span id="url::http://ipiao.top/2019/07/09/读-Redis设计与实现-与redis-5-0-源码-skiplist/" class="cy_cmt_count"></span>留言,<span id="url::http://ipiao.top/2019/07/09/读-Redis设计与实现-与redis-5-0-源码-skiplist/" class="cy_cmt_participate"></span>参与</a>
              <p><span class="date">19-07-09</span><span><a href="/categories/reading/" class="category">reading</a></span></p>
            </div>
            <div class="post-content">
              <h4 id="结构差异"><a href="#结构差异" class="headerlink" title="结构差异"></a>结构差异</h4>
              <blockquote>
                <p>结构定义在<code>server.h</code>文件<br>方法实现在<code>t_zset.c</code>文件(ziplist是压缩)</p>
              </blockquote>
              <ol>
                <li>
                  <p>zskiplistNode</p>
                  <figure class="highlight c">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">zskiplistNode</span> &#123;</span></span><br><span class="line">    sds ele; <span class="comment">// 原本是 robj *obj,表示保存的成员对象</span></span><br><span class="line">    <span class="keyword">double</span> score; <span class="comment">// 分值</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">zskiplistNode</span> *<span class="title">backward</span>;</span> <span class="comment">// 后退指针</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">zskiplistLevel</span> &#123;</span></span><br><span class="line">        <span class="class"><span class="keyword">struct</span> <span class="title">zskiplistNode</span> *<span class="title">forward</span>;</span> <span class="comment">// 前进指针</span></span><br><span class="line">        <span class="keyword">unsigned</span> <span class="keyword">long</span> span;            <span class="comment">// 跨度</span></span><br><span class="line">    &#125; level[];</span><br><span class="line">&#125; zskiplistNode;</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                </li>
                <li>
                  <p>zskiplist</p>
                  <figure class="highlight c">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">zskiplist</span> &#123;</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">zskiplistNode</span> *<span class="title">header</span>, *<span class="title">tail</span>;</span> <span class="comment">// 表头和表尾</span></span><br><span class="line">    <span class="keyword">unsigned</span> <span class="keyword">long</span> length; <span class="comment">// 长度,即节点数()不含表头</span></span><br><span class="line">    <span class="keyword">int</span> level; <span class="comment">// 跳跃表内层数最大的节点的层数</span></span><br><span class="line">&#125; zskiplist;</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                </li>
              </ol>
            </div>
            <p class="readmore"><a href="/2019/07/09/读-Redis设计与实现-与redis-5-0-源码-skiplist/">阅读更多</a></p>
          </div>
          <div class="post">
            <h2 class="post-title"><a href="/2019/07/04/读-Redis设计与实现-与redis-5-0-源码-dict/">读&lt;&lt;Redis设计与实现&gt;&gt;与redis(5.0)源码__dict</a></h2>
            <div class="post-meta"><a href="/2019/07/04/读-Redis设计与实现-与redis-5-0-源码-dict/#comments" class="comment-count"><span id="url::http://ipiao.top/2019/07/04/读-Redis设计与实现-与redis-5-0-源码-dict/" class="cy_cmt_count"></span>留言,<span id="url::http://ipiao.top/2019/07/04/读-Redis设计与实现-与redis-5-0-源码-dict/" class="cy_cmt_participate"></span>参与</a>
              <p><span class="date">19-07-04</span><span><a href="/categories/reading/" class="category">reading</a></span></p>
            </div>
            <div class="post-content">
              <h4 id="结构差异"><a href="#结构差异" class="headerlink" title="结构差异"></a>结构差异</h4>
              <ol>
                <li>dictEntry,该结构中<code>union</code>里面多了double类型d</li>
              </ol>
              <figure class="highlight c">
                <table>
                  <tr>
                    <td class="gutter">
                      <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre>
                    </td>
                    <td class="code">
                      <pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">dictEntry</span> &#123;</span></span><br><span class="line">    <span class="keyword">void</span> *key;</span><br><span class="line">    <span class="keyword">union</span> &#123;</span><br><span class="line">        <span class="keyword">void</span> *val;</span><br><span class="line">        <span class="keyword">uint64_t</span> u64;</span><br><span class="line">        <span class="keyword">int64_t</span> s64;</span><br><span class="line">        <span class="keyword">double</span> d;</span><br><span class="line">    &#125; v;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">dictEntry</span> *<span class="title">next</span>;</span></span><br><span class="line">&#125; dictEntry;</span><br></pre>
                    </td>
                  </tr>
                </table>
              </figure>
              <ol start="2">
                <li>dict,多了一个迭代标志</li>
              </ol>
              <figure class="highlight c">
                <table>
                  <tr>
                    <td class="gutter">
                      <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre>
                    </td>
                    <td class="code">
                      <pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">dict</span> &#123;</span></span><br><span class="line">    dictType *type;</span><br><span class="line">    <span class="keyword">void</span> *privdata;</span><br><span class="line">    dictht ht[<span class="number">2</span>];</span><br><span class="line">    <span class="keyword">long</span> rehashidx; <span class="comment">/* rehashing not in progress if rehashidx == -1 */</span></span><br><span class="line">    <span class="keyword">unsigned</span> <span class="keyword">long</span> iterators; <span class="comment">/* number of iterators currently running */</span></span><br><span class="line">&#125; dict;</span><br></pre>
                    </td>
                  </tr>
                </table>
              </figure>
              <ol start="3">
                <li>不知道是不是多出来的迭代器(adlist也有)<blockquote>
                    <p>迭代器,大多用在rdb,aof,cluster场景中<br>有safe的差异</p>
                    <figure class="highlight c">
                      <table>
                        <tr>
                          <td class="gutter">
                            <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre>
                          </td>
                          <td class="code">
                            <pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">dictIterator</span> &#123;</span></span><br><span class="line">    dict *d;</span><br><span class="line">    <span class="keyword">long</span> index;</span><br><span class="line">    <span class="keyword">int</span> table, safe;</span><br><span class="line">    dictEntry *entry, *nextEntry;</span><br><span class="line">    <span class="comment">/* unsafe iterator fingerprint for misuse detection. */</span></span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> fingerprint; <span class="comment">// 在非安全模式模式下,迭代的时候生成一个指纹,在后续再次处理相应键的时候,对比指纹是否一致,判断键值是否被修改</span></span><br><span class="line">&#125; dictIterator;</span><br></pre>
                          </td>
                        </tr>
                      </table>
                    </figure>
                  </blockquote>
                </li>
              </ol>
            </div>
            <p class="readmore"><a href="/2019/07/04/读-Redis设计与实现-与redis-5-0-源码-dict/">阅读更多</a></p>
          </div>
          <nav class="page-navigator"><span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/2/">下一页</a></nav>
        </div>
      </div>
      <div class="layout-r">
        <div id="sidebar">
          <div class="search-pla"></div>
          <div class="widget">
            <div class="widget-title"><i class="fa fa-xie"> 最新文章</i></div>
            <ul class="post-list">
              <li class="post-list-item"><a class="post-list-link" href="/2019/10/24/mysql并发调试命名/">mysql并发调试</a></li>
              <li class="post-list-item"><a class="post-list-link" href="/2019/09/11/TCP-Delayed-Ack-Ack确认延迟-Nagle-Algorithm-纳格算法/">TCP Delayed Ack(Ack确认延迟) && Nagle Algorithm(纳格算法)</a></li>
              <li class="post-list-item"><a class="post-list-link" href="/2019/09/11/Go语言TCP网络编程/">Go语言TCP网络编程</a></li>
              <li class="post-list-item"><a class="post-list-link" href="/2019/07/23/redis-其他/">redis_其他</a></li>
              <li class="post-list-item"><a class="post-list-link" href="/2019/07/12/读-Redis设计与实现-与redis-5-0-源码-rdb/">读<<redis设计与实现>>与redis(5.0)源码__rdb</redis设计与实现></a></li>
              <li class="post-list-item"><a class="post-list-link" href="/2019/07/11/读-Redis设计与实现-与redis-5-0-源码-对象/">读<<redis设计与实现>>与redis(5.0)源码__对象</redis设计与实现></a></li>
              <li class="post-list-item"><a class="post-list-link" href="/2019/07/11/读-Redis设计与实现-与redis-5-0-源码-ziplist/">读<<redis设计与实现>>与redis(5.0)源码__ziplist</redis设计与实现></a></li>
              <li class="post-list-item"><a class="post-list-link" href="/2019/07/10/vimium/">vimium</a></li>
              <li class="post-list-item"><a class="post-list-link" href="/2019/07/09/读-Redis设计与实现-与redis-5-0-源码-skiplist/">读<<redis设计与实现>>与redis(5.0)源码__skiplist</redis设计与实现></a></li>
              <li class="post-list-item"><a class="post-list-link" href="/2019/07/04/读-Redis设计与实现-与redis-5-0-源码-dict/">读<<redis设计与实现>>与redis(5.0)源码__dict</redis设计与实现></a></li>
            </ul>
          </div>
          <div class="widget">
            <div class="widget-title"><i class="fa fa-gui"> 分类</i></div>
            <ul class="category-list">
              <li class="category-list-item"><a class="category-list-link" href="/categories/golang大法好/">golang大法好</a><span class="category-list-count">10</span></li>
              <li class="category-list-item"><a class="category-list-link" href="/categories/reading/">reading</a><span class="category-list-count">8</span></li>
              <li class="category-list-item"><a class="category-list-link" href="/categories/不务正业/">不务正业</a><span class="category-list-count">9</span></li>
              <li class="category-list-item"><a class="category-list-link" href="/categories/我爱数学/">我爱数学</a><span class="category-list-count">1</span></li>
              <li class="category-list-item"><a class="category-list-link" href="/categories/日常练习/">日常练习</a><span class="category-list-count">8</span></li>
              <li class="category-list-item"><a class="category-list-link" href="/categories/第三方/">第三方</a><span class="category-list-count">1</span></li>
              <li class="category-list-item"><a class="category-list-link" href="/categories/装13指南/">装13指南</a><span class="category-list-count">1</span></li>
              <li class="category-list-item"><a class="category-list-link" href="/categories/闲文野趣/">闲文野趣</a><span class="category-list-count">1</span></li>
            </ul>
          </div>
          <div class="widget">
            <div class="widget-title"><i class="fa fa-biao"> 标签</i></div>
            <div class="tagcloud"><a href="/tags/sh/" style="font-size: 15px;">sh</a> <a href="/tags/吃瓜/" style="font-size: 15px;">吃瓜</a> <a href="/tags/emoji/" style="font-size: 15px;">emoji</a> <a href="/tags/go/" style="font-size: 15px;">go</a> <a href="/tags/博客迁移/" style="font-size: 15px;">博客迁移</a> <a href="/tags/tcp/" style="font-size: 15px;">tcp</a> <a href="/tags/leetcode/" style="font-size: 15px;">leetcode</a> <a href="/tags/字符串/" style="font-size: 15px;">字符串</a> <a href="/tags/pe/" style="font-size: 15px;">pe</a> <a href="/tags/apns/" style="font-size: 15px;">apns</a> <a href="/tags/mysql/" style="font-size: 15px;">mysql</a> <a href="/tags/python/" style="font-size: 15px;">python</a> <a href="/tags/redis/" style="font-size: 15px;">redis</a> <a href="/tags/爬虫/" style="font-size: 15px;">爬虫</a> <a href="/tags/其他/" style="font-size: 15px;">其他</a> <a href="/tags/数/" style="font-size: 15px;">数</a> <a href="/tags/链表/" style="font-size: 15px;">链表</a> <a href="/tags/魔术/" style="font-size: 15px;">魔术</a></div>
          </div>
          <div class="widget">
            <div class="widget-title"><i class="fa fa-archive"> 归档</i></div>
            <ul class="archive-list">
              <li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">十月 2019</a></li>
              <li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">九月 2019</a></li>
              <li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">七月 2019</a></li>
              <li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">六月 2019</a></li>
              <li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">四月 2019</a></li>
              <li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">一月 2019</a></li>
              <li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">十二月 2018</a></li>
            </ul>
          </div>
          <div class="widget">
            <div class="widget-title"><i class="fa fa-you"> 友情链接</i></div>
            <ul></ul><a href="https://chaoo.oschina.io" title="本站主题（BlueLake）" target="_blank">本站主题（BlueLake）</a>
            <ul></ul><a href="http://118.25.7.38:8080" title="旧站" target="_blank">旧站</a>
            <ul></ul><a href="http://pe-cn.github.io/problems/" title="欧拉计划（Project Euler）" target="_blank">欧拉计划（Project Euler）</a>
            <ul></ul><a href="https://leetcode-cn.com/" title="力扣题库（leetcode）" target="_blank">力扣题库（leetcode）</a>
          </div>
        </div>
      </div>
    </div><a id="totop" href="#top"></a>
    <div id="footer">
      <div class="footer-info">
        <p><a href="/baidusitemap.xml">Baidu Site Haritası</a> | <a href="/atom.xml">订阅</a> | <a href="/about/">关于</a></p>
        <p><span> Copyright &copy;<a href="/." rel="nofollow">ipiao.</a></span><span> Theme by<a rel="nofollow" target="_blank" href="https://github.com/chaooo/hexo-theme-BlueLake"> BlueLake.</a></span><span> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a></span></p>
      </div>
    </div>
  </div>
  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?6d320488e0e5cdce0a6edea059168872";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>
  <script type="text/javascript" src="/js/search.json.js?v=2.0.1"></script>
  <script type="text/javascript" src="/js/totop.js?v=2.0.1" async></script>
  <script id="cy_cmt_num" src="http://changyan.sohu.com/upload/plugins/plugins.list.count.js?clientId=cytY1dJ9s"></script>
</body>

</html>